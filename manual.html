<!DOCTYPE html>
<html>
<head>
    <title>Oak.js - Manual</title>
	<meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="Styles/styles.css">
</head>
<body style="background-color: #eee;">
    <ul class = "topbar">
        <li><a href="index.html">Oak.js</a></li>
        <li><a style="font-weight: bold;">Manual</a></li>
        <li><a href="https://github.com/Skyus/Oak.js">Source</a></li>
        </ul>
	<h2>Oak.js Manual</h2>
    <p>
        Oak.js is a web-based assembler, disassembler and simulator for the RISCV instruction set architecture. It is designed after version 2.1 and currently supports most of the RV32I base integer instruction set.
    </p>
    <p>
        Oak.js starts executing from address 0 and implements an "amorphous" structure; i.e., there is no distinction between program data and machine code in binary files. It is the programmer's responsibility to make sure static data is not interpreted as instructions (to halt execution, see environment call 10). 
    </p>
    <h3>Instruction Support</h3>
    <p>
        Oak.js supports the RV32I base integer instruction set, save for the following instructions:
    </p>
    <p><i>
        fence, fence.i, ebreak, csrrw, csrrs, cssrc, csrrwi, csrrsi, csrrci
    </i></p>
    <h4>Pseudoinstructions</h4>
    <p>
        As a limitation of Oak.js's architecture, very few pseudoinstructions are supported, and they all expand into only one instruction. The currently supported pseudoinstructions are li, mv, la, jr, scall, and syscall (the last two just mirror ecall).
    </p>
    <h4>Environment Calls</h4>
    <p>
        The calling convention is as follows:
    </p>
    <p>
        a7 - Service Number <br />
        a0-a6 - Arguments
    </p>
    <p>

        The return value will be placed in a7 as well. This was a project requirement- ideally the return value would be in another register.
    </p>
    <p>
        Oak.js supports four environment calls at the moment.
        <ul>
            <li><b>1: Print Integer.</b> Arguments: 0 - Integer to print.  Prints integer to console.</li>
            <li><b>4: Print String.</b> Arguments: 0 - Address of string to print in memory.  Prints string to console.</li>
            <li><b>5: Read Integer.</b> Arguments: None.  Reads integer from user, stores in a7.</li>
            <li><b>8: Read String.</b> Arguments: 0 - Address in memory to read string to.</li>
            <li><b>10: Exit.</b> Arguments: None. Concludes execution of the current program.</li>
        </ul>
    </p>
    <h3>Usage</h3>
    <p>
        Input text into the "assembly" field. Assemble using the <img src="Images/assemble.png" style="height: 16pt; vertical-align:middle;" /> button. Then you can <img src="Images/stepByStep.png" style="height: 16pt; vertical-align:middle;" /> start simulation. Simple!
    </p>
    <p>
        The checkmark is to show the machine code pane- the UI designer didn't make that super obvious until you assemble.
    </p>
    <p>
        You can create new tabs to manage multiple files as well, and the tabs do not share any memory or registers so you can keep different things running, no problem.
    </p>
    <p>
        The output pane has three output modes- console, memory and instructions. The console shows the output generated by environment calls (and also awaits your input in environment calls that require that), the memory shows the state of the memory following simulation, and instructions shows the step by step disassembly of the program. You can switch between them using the "Choose an action" prompt.
    </p>
    <p>
        Registers are also displayed to the right of the output pane, and you can switch between binary, decimal, unsigned decimal and hexadecimal using the "Choose an action" dropdown menu.
    </p>
    <h4>Uploading</h4>
    <p>
        You can also upload either assembly code or binary files directly to Oak.js.

        To upload a binary file, use the <img src="Images/fileUpload.png" style="height: 16pt; vertical-align:middle;" /> icon, then you can <img src="Images/stepByStep.png" style="height: 16pt; vertical-align:middle;" /> simulate normally. Assembly code upload using the <img src="Images/asmUpload.png" style="height: 16pt; vertical-align:middle;" />  icon is the same, though naturally you have to assemble first before simulation.
    </p>
    <h4>Downloading</h4>
    <p>
        Downloading is identical, though you use the <img src="Images/fileDownload.png" style="height: 16pt; vertical-align:middle;" /> and <img src="Images/asmDownload.png" style="height: 16pt; vertical-align:middle;" /> icons instead for binary and assembly respectively. Note that as of November 2016 downloading is only confirmed to behave as intended on Mozilla Firefox and Google Chrome, as it navigates to the link on Safari and was not tested on Microsoft Edge.
    </p>
</body>
</html>
