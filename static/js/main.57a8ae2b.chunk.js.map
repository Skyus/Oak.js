{"version":3,"sources":["actions/index.js","sections/texteditor.js","sections/navigation.js","sections/panelcontainer.js","modules/select.js","sections/numberttransform.js","sections/panelmemory.js","sections/panelconsole.js","sections/panellog.js","sections/help.js","developer_list.js","sections/about.js","modules/hotkey.js","sections/settings.js","modules/input.js","../oak/VirtualOS.js","../oak/Enum.js","../oak/Utils.js","../oak/InstructionSet.js","../oak/Assembler.js","../oak/Core.js","../oak/index.js","sections/panelsettings.js","sections/panelconversion.js","sections/panelregisters.js","sections/panelmachinecode.js","../isas/RISCV.js","../isas/MIPS.js","app.js","reducers/tab.js","reducers/selectedtab.js","reducers/globalsettings.js","reducers/projectsettings.js","reducers/setvisibility.js","reducers/index.js","index.js"],"names":["Actions","setSettingsVisible","state","type","setHelpVisible","setAboutVisible","selectTab","id","updateTab","index","tab","setProjectSettings","n","s","i","payload","file_name","memory_size","isa","TextEditor","addTab","props","handleTabChange","tabs","name","core","memorySize","instruction_set","handleTabClose","event","stopPropagation","selected","selectedtab","Math","min","max","length","deleteTab","setEditorValue","val","current_tab","content","this","className","map","onClick","key","mode","theme","onChange","width","height","value","readOnly","is_disabled","editorProps","$blockScrolling","Infinity","Component","connect","dispatch","ownProps","SimulatingStatus","Navigation","assemble_css","runningStatus","console_input_type","handleAddTabRiscv","handleAddTabMips","handleLoadAsm","handleLoadBin","handleDownloadAsm","downloadBin","downloadBinH","downloadRam","showSettings","showHelp","showAbout","assemble","simulate","stepbystep","withLocalize","visible","PanelContainer","renderTabs","React","Children","children","child","display_name","e","handleClickTab","preventDefault","setState","childrenProps","cloneElement","onMouseDown","handleStartDrag","Select","style","backgroundImage","icon","placeholder","padNumber","str","padded","PanelMemory","handleType","register_type","parseInt","target","translateRegister","input","toString","memory","empty","defaultValue","byte","PanelConsole","log","console","running","line","show_input","PanelLog","instruction","Help","handleClose","handleStopClose","options","renderInnerHtml","panel_visibility","help","additional","translators","About","printdev","arr","element","href","link","src","pic","alt","job","affiliation","desc","devs","lang","about","HotkeyInput","handleClick","capturing","window","addEventListener","handleKey","toLowerCase","shift","shiftKey","ctrl","ctrlKey","altKey","key_name","removeEventListener","save","testKey","key_ctrl","key_alt","key_shift","setKey","done","getKey","setKeyStr","upos","indexOf","mods","substr","combo","c","tabIndex","themes","Settings","canhandleinput","cancel","hotkey","comp_new","current","comp_load","comp_save","comp_assemble","comp_step","comp_sim","hotkeyfns","fn_new","fn_load","fn_save","fn_ass","fn_step","fn_sim","setDefaults","setTheme","setDefaultsSave","saveSettings","d","Date","setTime","getTime","exp","toUTCString","document","cookie","continuefn","includes","forEach","getElementById","disabled","handleISA","default_isa","handleTheme","acceptCookies","use_cookies","deleteAllCookies","cookies","split","eqPos","createRef","has_cookies","ca","charAt","substring","eq","display","position","colSpan","ref","settings","Input","VirtualOS","continueInputString","reg","virtualOSArgumentVectorStart","arg","registerFile","read","array","push","charCodeAt","memset","continueInputInt","write","service","virtualOSServiceRegister","start","outputInt","iterator","char","memcpy","outStr","String","fromCharCode","join","outputString","inputInt","inputString","handleHalt","Enum","object","Utils","bits","mutableValue","abs","signExt","bytes","bigEndian","reverse","storage","number","digits","radix","hexadecimal","hexRepresentation","toUpperCase","Parameter","immediate","register","condition","offset","special","fpImmediate","Endianness","little","big","bi","Keyword","directive","comment","label","stringMarker","charMarker","string","numberic","Directive","text","data","cString","_8bit","_16bit","_32bit","_64bit","fixedPoint","floatingPoint","custom","BitRange","field","constant","signed","totalBits","limitStart","limitEnd","parameter","parameterType","parameterDefaultValue","Format","ranges","regex","disassembly","processSpecialParameter","decodeSpecialParameter","Instruction","mnemonic","format","constants","constValues","executor","signatoryOverride","pseudoInstructionFor","computedBits","computedMask","computedTemplate","machineCode","machineCodeMutable","maskBits","mask","bit","count","ceil","range","before","end","addition","pad","after","temp","InstructionSet","formats","instructions","pseudoInstructions","abiNames","keywords","directives","incrementOnFetch","exampleCode","sort","a","b","result","hasPrefix","captures","exec","args","output","replace","prototype","interpretedBytes","hexes","isNaN","needle","Kind","noise","Line","raw","addressThisPass","sensitive","kind","sensitivityList","possibleInstructions","assembler","keywordRegexes","tmp","pieces","processed","RegExp","directiveData","undefined","invalidReason","instructionSet","match","slice","minimum","fill","zeroDelimitedString","elements","generalCharacters","characters","found","character","Assembler","escapedCharacters","isInstruction","lines","address","candidates","testingInstructions","possibleInstruction","template","j","limited","store","process","errorMessage","context","startBit","endBit","smallestPossibleInstruction","filter","pi","stored","assembleText","assembleData","lineByLabel","linesByLabel","sensor","sensorLength","newAssembly","file","endianness","memoryMap","words","numeric","radixList","escapable","escapedCharacterList","instructionLength","registerNo","reference","extraction","radixes","interpretable","rangeCheck","pass","errors","assemblerModeText","initialProcess","asm","list","keyword","Object","keys","'","CoreFactory","ISAs","architecture","virtualOS","generator","Core","insts","decoded","arguments","fetched","bitRanges","limit","pc","disassemble","factory","PanelSettings","handleFileName","project_settings","handleMemorySize","test","handleSubmit","submitChanges","isas","OakJS","getCoreList","onSubmit","PanelConversion","calculateOutput","in_type","out_type","onChangeInput","input_type","output_type","out","has_value","onChangeInputType","onChangeOutputType","PanelRegisters","getChangedRegisterClass","registers","physicalFile","register_changed","register_names","cellSpacing","cellPadding","register_dpy","data-info","PanelMachineCode","machinecode","machine_code","RISCVRegisterFile","modifiedRegisters","registerNumber","modReg","getRegisterCount","RISCVCore","virtualOSArgumentVectorEnd","Array","reset","catBytes","opts","parameterized","rType","JSBI","toNumber","bitwiseAnd","add","BigInt","subtract","multiplier","multiplicant","product","multiply","productNumber","signedRightShift","dividend","divisor","equal","divide","remainder","iType","ilSubtype","isSubtype","sType","uType","sbType","ujType","allConstSubtype","ecall","mvPseudo","liPseudo","jrPseudo","MIPSRegisterFile","MIPSCore","rjSubtype","rsSubtype","rcSubtype","ibSubtype","iluiSubtype","ilsSubtype","writeAddress","jType","decode_error_msg","MessageType","App","handleKeyPress","console_input","cursor","cursor_pos","continueAfterConsole","which","keyCode","l","keycode","isNum","addConsoleMessage","msg_type","virtual_os","checkUpdatedTabs","mod_reg","getModifiedRegisters","addTabFull","code","mem_size","get_example_code","getCore","new_tab","from","getDefaultISA","addTabDefault","addTabDefaultRISCV","addTabDefaultMIPS","handleUpload","files","component_input","is_upload_bin","blob","size","fr","FileReader","me","Uint8Array","readAsArrayBuffer","res","readAsText","click","el","createElement","Blob","blobLink","URL","createObjectURL","setAttribute","body","appendChild","removeChild","byteArray","finalFile","padStart","resetUI","uiSimulate","uiAssemble","fetch","decode","execute","uiStepByStep","arrayFromFile","passZero","passCounter","reduce","concat","handleSettingsChange","isa_type","diff_isa","diff_mem","new_isa_found","handleStartDragX","handleDragX","handleStopDragX","handleX","x","pageX","w","innerWidth","documentElement","clientWidth","panel_x","handleY","y","pageY","h","innerHeight","clientHeight","panel_y","handleStartDragY","handleDragY","handleStopDragY","alert","initialize","languages","renderToStaticMarkup","addTranslationForLanguage","enTranslations","has_tabs","Fragment","gridTemplateColumns","gridTemplateRows","tabReducer","action","t","assign","selectedTabReducer","globalSettingsReducer","projectSettingsReducer","combineReducers","global_settings","localize","localizeReducer","createStore","allReducers","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render"],"mappings":"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","file":"static/js/main.57a8ae2b.chunk.js","sourcesContent":["export const Actions = {\n    SELECT_TAB: 'SELECT_TAB',\n    ADD_TAB: 'ADD_TAB',\n    UPDATE_TAB: 'UPDATE_TAB',\n    DELETE_TAB: 'DELETE_TAB',\n    UPDATE_PROJECT_SETTINGS: 'UPDATE_PROJECT_SETTINGS',\n    SET_HELP_VISIBLE: 'SET_HELP_VISIBLE',\n    SET_ABOUT_VISIBLE: 'SET_ABOUT_VISIBLE',\n    SET_SETTINGS_VISIBLE: 'SET_SETTINGS_VISIBLE'\n};\n\nexport const setSettingsVisible = (state) => ({\n    type: Actions.SET_SETTINGS_VISIBLE,\n    state\n});\n\nexport const setHelpVisible = (state) => ({\n    type: Actions.SET_HELP_VISIBLE,\n    state\n});\n\nexport const setAboutVisible = (state) => ({\n    type: Actions.SET_ABOUT_VISIBLE,\n    state\n});\n\nexport const selectTab = id => ({\n    type: Actions.SELECT_TAB,\n    id\n});\n\nexport const addTab = tab => ({\n    type: Actions.ADD_TAB,\n    tab\n});\n\nexport const updateTab = (index, tab) => ({\n    type: Actions.UPDATE_TAB,\n    index,\n    tab\n});\n\nexport const deleteTab = id => ({\n    type: Actions.DELETE_TAB,\n    id\n});\n\nexport const setProjectSettings = (n, s, i) => ({\n    type: Actions.UPDATE_PROJECT_SETTINGS,\n    payload: {\n        file_name: n,\n        memory_size: s,\n        isa: i\n    }\n})","import React, { Component } from 'react'\nimport AceEditor from 'react-ace';\n\nimport 'ace-builds/src-noconflict/mode-java';\nimport 'ace-builds/src-noconflict/theme-github';\n\nimport { selectTab, deleteTab, updateTab, setProjectSettings } from \"../actions\"\nimport { connect } from 'react-redux';\n\nclass TextEditor extends Component {\n\taddTab = () => {\n\t\tthis.props.addTab();\n\t}\n\t\n\thandleTabChange = (id) => {\n\t\tthis.props.selectTab(id);\n\t\tlet tab = this.props.tabs[id];\n\n\t\tif (tab) {\n\t\t\tthis.props.setProjectSettings(tab.name, tab.core.memorySize, tab.instruction_set);\n\t\t}\n\t}\n\n\thandleTabClose = (event, id) => {\n\t\tevent.stopPropagation();\n\n\t\tlet selected = this.props.selectedtab;\n\t\tif (selected >= id)\n\t\t\tselected -= 1;\n\n\t\tselected = Math.min(Math.max(selected, 0), this.props.tabs.length - 1);\n\n\t\tthis.props.selectTab(selected);\n\n\t\tlet tab = this.props.tabs[selected];\n\n\t\tif (tab) {\n\t\t\tthis.props.setProjectSettings(tab.name, tab.core.memorySize, tab.instruction_set);\n\t\t}\n\n\t\tthis.props.deleteTab(id);\n\t}\n\n\tsetEditorValue = (val) => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\t\ttab.content = val;\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\trender() {\n\t\tlet tabs = this.props.tabs;\n\t\t\n\t\treturn (\n\t\t\t<main id=\"text_editor\" className=\"text_editor\">\n\t\t\t\t<ul className=\"page_tabs\">\n\t\t\t\t\t{tabs.map((tab, id) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t<li onClick={() => this.handleTabChange(id)} key={id} className={(this.props.selectedtab === id) ? \"selected\" : \"\"}>\n\t\t\t\t\t\t\t<span>{tab.name}</span>\n\t\t\t\t\t\t\t<div onClick={(event) => this.handleTabClose(event, id)}></div>\n\t\t\t\t\t\t</li>);\n\t\t\t\t\t})}\n\t\t\t\t\t<li className=\"add_tab\" onClick={this.addTab}></li>\n\t\t\t\t</ul>\n\t\t\t\t{<AceEditor\n\t\t\t\t\tmode=\"java\"\n\t\t\t\t\ttheme=\"github\"\n\t\t\t\t\tonChange={this.setEditorValue}\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\theight=\"\"\n\t\t\t\t\tname=\"editor_area\"\n\t\t\t\t\tclassName=\"editor_area\"\n\t\t\t\t\tvalue={tabs[this.props.selectedtab].content}\n\t\t\t\t\treadOnly={this.props.is_disabled}\n\t\t\t\t\teditorProps={{$blockScrolling: Infinity}}\n\t\t\t\t/>}\n\t\t\t</main>\n\t\t)\n\t}\n}\n\nconst stateToProps = state => {\n\treturn {\n\t\ttabs: state.tabs,\n\t\tselectedtab: state.selectedtab\n\t};\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n\tselectTab: (id) => dispatch(selectTab(id)),\n\tupdateTab: (index, tab) => dispatch(updateTab(index, tab)),\n\tdeleteTab: (id) => dispatch(deleteTab(id)),\n\tsetProjectSettings: (n, s, i) => dispatch(setProjectSettings(n, s, i))\n})\n\nexport default connect(\n\tstateToProps,\n\tdispatchToProps\n\t)(TextEditor);","import React, { Component } from 'react';\nimport { Translate, withLocalize } from 'react-localize-redux';\nimport { connect } from 'react-redux';\nimport { setSettingsVisible, setHelpVisible, setAboutVisible } from \"../actions\"\n\nconst SimulatingStatus = {\n\tStopped:\t0,\n\tStep:\t\t1,\n\tPlay:\t\t2\n};\n\nconst CONSOLE_INPUT_NONE  = 0;\n\nclass Navigation extends Component {\n\trender() {\n\t\tlet assemble_css = \"\";\n\t\tconst tab  = this.props.tabs[this.props.selectedtab];\n\n\t\tif (tab) {\n\t\t\tif (tab.runningStatus === SimulatingStatus.Stopped) {\n\t\t\t\tassemble_css = \" assemble_ready\";\n\t\t\t}\n\n\t\t\tif (tab.console_input_type !== CONSOLE_INPUT_NONE) {\n\t\t\t\tassemble_css += \" simulate_prevent_input\";\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<nav id=\"navigation\" className=\"navigation\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li className=\"oak_logo\">\n\t\t\t\t\t\t<ul className=\"drop_down\">\n\t\t\t\t\t\t\t<li onClick={this.props.handleAddTabRiscv}><Translate id=\"menus.add_tab_riscv\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleAddTabMips}><Translate id=\"menus.add_tab_mips\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleLoadAsm}><Translate id=\"menus.load_assembly\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleLoadBin}><Translate id=\"menus.load_binary\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleDownloadAsm}><Translate id=\"menus.download_assembly\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.downloadBin}><Translate id=\"menus.download_binary\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.downloadBinH}><Translate id=\"menus.download_binary_h\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.downloadRam}><Translate id=\"menus.download_memory\" /></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li onClick={this.props.showSettings}><Translate id=\"menus.settings\" /></li>\n\t\t\t\t\t<li onClick={this.props.showHelp}><Translate id=\"menus.help\" /></li>\n\t\t\t\t\t<li onClick={this.props.showAbout}><Translate id=\"menus.about\" /></li>\n\t\t\t\t</ul>\n\n\t\t\t\t<div className=\"buttons_right\">\n\t\t\t\t\t<button className={`assemble`} onClick={this.props.assemble}></button>\n\t\t\t\t\t<button className={`simulate${assemble_css}`} onClick={this.props.simulate}></button>\n\t\t\t\t\t<button className={`simulate_step${assemble_css}`} onClick={this.props.stepbystep}></button>\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n};\n\nconst stateToProps = state => {\n\treturn {\n\t\ttabs: state.tabs,\n\t\tselectedtab: state.selectedtab\n\t};\n};\n\nconst appDispatchToProps = (dispatch, ownProps) => ({\n\tshowHelp: (visible) => dispatch(setHelpVisible(visible)),\n\tshowAbout: (visible) => dispatch(setAboutVisible(visible)),\n\tshowSettings: (visible) => dispatch(setSettingsVisible(visible))\n});\n\nexport default withLocalize(\n\tconnect(\n\t\tstateToProps,\n\t\tappDispatchToProps\n\t)(\n\t\tNavigation\n\t)\n);","import React, { Component } from 'react'\n\nexport default class PanelContainer extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            selected: 0\n        };\n    }\n    \n    handleClickTab(e, key) {\n        e.preventDefault();\n        this.setState({selected: key});\n    }\n\n    renderTabs = () => {\n        return (\n            <ul className=\"panel_tabs\">\n                {React.Children.map(this.props.children, (child, i) => \n                    <li className={(this.state.selected === i) ? \"selected\": \"\"} key={child.type.display_name} onClick={(e) => this.handleClickTab(e, i)}>\n                        {child.type.display_name}\n                    </li>\n                )}\n            </ul>\n        );\n    }\n    \n    render() {\n        const { children } = this.props;\n        const childrenProps = React.Children.map(children, (child, id) => {\n            return (this.state.selected === id) && React.cloneElement(child);\n        });\n        return (\n            <div id=\"panel_container\" className={`panel_container ${this.props.className}`}>\n                <div onMouseDown={this.props.handleStartDrag} className=\"panel_drag\"></div>\n                {this.renderTabs()}\n                {childrenProps}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nexport default class Select extends Component {\n    render() {\n        return (\n            <div className=\"select_group\">\n                <select onChange={this.props.onChange} value={this.props.value} style={{backgroundImage: `url(images/icons/input_select_arrow.svg), url(${this.props.icon})`}}>\n                    {this.props.children}\n                </select>\n                <label className=\"group_label\">{this.props.placeholder}</label>\n            </div>\n        );\n    }\n}\n","export function padNumber(str, length) {\n    var padded = str;\n    for (var i = 0; i < length - str.length; i++)\n    {\n        padded = \"0\" + padded;\n    }\n    return padded;\n};\n    \nexport function parseToFloat(num) {\n    return num;\n};\n\n// From Jonas Raoni Soares Silva, JSFromHell states\n//          that code can be redistributed and modified\n//          as long as original credits are kept.\n// http://jsfromhell.com/classes/binary-parser\nexport function encodeFloat(number) {\n    return number;\n    /*var n = +number,\n        status = (n !== n) || n === -Infinity || n == +Infinity ? n : 0,\n        exp = 0,\n        len = 281, // 2 * 127 + 1 + 23 + 3,\n        bin = new Array(len),\n        signal = (n = status !== 0 ? 0 : n) < 0,\n        n = Math.abs(n),\n        intPart = Math.floor(n),\n        floatPart = n - intPart,\n        i, lastBit, rounded, j, exponent;\n\n    if (status !== 0) {\n        if (n !== n) {\n            return 0x7fc00000;\n        }\n        if (n === Infinity) {\n            return 0x7f800000;\n        }\n        if (n === -Infinity) {\n            return 0xff800000\n        }\n    }\n\n    i = len;\n    while (i) {\n        bin[--i] = 0;\n    }\n\n    i = 129;\n    while (intPart && i) {\n        bin[--i] = intPart % 2;\n        intPart = Math.floor(intPart / 2);\n    }\n\n    i = 128;\n    while (floatPart > 0 && i) {\n        (bin[++i] = ((floatPart *= 2) >= 1) - 0) && --floatPart;\n    }\n\n    i = -1;\n    while (++i < len && !bin[i]);\n\n    if (bin[(lastBit = 22 + (i = (exp = 128 - i) >= -126 && exp <= 127 ? i + 1 : 128 - (exp = -127))) + 1]) {\n        if (!(rounded = bin[lastBit])) {\n            j = lastBit + 2;\n            while (!rounded && j < len) {\n                rounded = bin[j++];\n            }\n        }\n\n        j = lastBit + 1;\n        while (rounded && --j >= 0) {\n            (bin[j] = !bin[j] - 0) && (rounded = 0);\n        }\n    }\n    i = i - 2 < 0 ? -1 : i - 3;\n    while(++i < len && !bin[i]);\n    (exp = 128 - i) >= -126 && exp <= 127 ? ++i : exp < -126 && (i = 255, exp = -127);\n    (intPart || status !== 0) && (exp = 128, i = 129, status == -Infinity ? signal = 1 : (status !== status) && (bin[i] = 1));\n\n    n = Math.abs(exp + 127);\n    exponent = 0;\n    j = 0;\n    while (j < 8) {\n        exponent += (n % 2) << j;\n        n >>= 1;\n        j++;\n    }\n\n    var mantissa = 0;\n    n = i + 23;\n    for (; i < n; i++) {\n        mantissa = (mantissa << 1) + bin[i];\n    }\n    return ((signal ? 0x80000000 : 0) + (exponent << 23) + mantissa) | 00;*/\n}","import React, { Component } from 'react'\nimport Select from '../modules/select'\nimport {padNumber} from './numberttransform'\nimport { connect } from 'react-redux';\n\nclass PanelMemory extends Component {\n    static display_name = \"memory\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            register_type: 0,\n        }\n    }\n\n    handleType = (event) => {\n        this.setState({register_type: parseInt(event.target.value, 10)});\n    };\n\n    translateRegister = (input) => {\n        switch(this.state.register_type) {\n            default:\n            case 0: // Hex\n                return padNumber((input >>> 0).toString(16), 2);\n            case 1: // uint\n                return padNumber((input >>> 0).toString(10), 3);\n            case 2: // octal\n                return padNumber((input >>> 0).toString(8), 3);\n            case 3: // bin\n                return padNumber((input >>> 0).toString(2), 8);\n        }\n    };\n\n    render() {\n        let tabs = this.props.tabs;\n        if (tabs.length === 0)\n            return <div></div>;\n            \n        let memory = tabs[this.props.selectedtab].core.memory;\n        let empty = memory.length === 0;\n        return (\n            <div id=\"panel_memory\" className=\"panel panel_memory\">\n                {empty && <span className=\"panel_empty\">Memory Empty</span>}\n                {!empty && <Select onChange={this.handleType} icon=\"images/icons/input_type.svg\" placeholder=\"Display Type\" defaultValue=\"0\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Decimal</option>\n                    <option value=\"2\">Octal</option>\n                    <option value=\"3\">Binary</option>\n                </Select>}\n                \n                {!empty && memory.map((byte, i) => {\n                    let val = this.translateRegister(byte);\n                    return (<span key={i}>{val} </span>);\n                })}\n            </div>\n        )\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelMemory);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\n\nconst SimulatingStatus = {\n\tStopped:\t0,\n\tStep:\t\t1,\n\tPlay:\t\t2\n};\n\nclass PanelConsole extends Component {\n    static display_name = \"console\";\n\n    render() {\n        let tab = this.props.tabs[this.props.selectedtab];\n        if (!tab)\n            return <div></div>;\n            \n        let log = tab.console;\n        let empty = log.length === 0;\n\n        const running = tab.runningStatus !== SimulatingStatus.Stopped;\n        \n        return (<div id=\"panel_console\" className=\"panel panel_console\">\n            {empty && <span className=\"panel_empty\">Console Empty</span>}\n            {!empty && log.map((line, i) => {\n                return (<div key={i}>{line}</div>);\n            })}\n            {this.props.show_input && <span><span className=\"blinker\">{\"<<\"}</span> {this.props.input}</span>}\n            {running && <div className=\"running_console\">Simulation still not completed...</div>}\n        </div>)\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelConsole);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\n\nclass PanelLog extends Component {\n    static display_name = \"log\";\n\n    render() {\n        let empty = this.props.core.log.length === 0;\n        return (<div id=\"panel_log\" className=\"panel panel_log\">\n            {empty && <span className=\"panel_empty\">Instruction Log Empty</span>}\n            {!empty && this.props.core.log.map((instruction, i) => {\n                return (<div key={i}>{instruction}</div>);\n            })}\n        </div>)\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n\t\tcore: state.tabs[state.selectedtab]\n\t};\n};\n\nexport default connect(stateToProps)(PanelLog);","import React, { Component } from 'react'\n\nimport { connect } from 'react-redux';\nimport { Translate, withLocalize } from \"react-localize-redux\";\nimport { setHelpVisible } from \"../actions\"\n\nclass Help extends Component {\n    handleClose = (e) => {\n        e.preventDefault();\n        this.props.setHelpVisible(false);\n    };\n\n    handleStopClose = (event) => {\n        event.stopPropagation();\n    };\n    \n    render() {\n        return (\n            <div id=\"help\" onClick={this.handleClose} className={`settings_overlay overlay fader${this.props.visible ? \" fader_shown\" : \"\"}`}>\n                <div className=\"settings_container\" onClick={this.handleStopClose}>\n                    <button className=\"floating_close\" onClick={this.handleClose}></button>\n                    <h2><Translate id=\"help.title\" /></h2>\n                    <div className=\"overlay_contents\">\n                        <Translate id=\"help.data\" options={{ renderInnerHtml: true }} />\n                        <button className=\"button\" onClick={this.handleClose}>Close</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst stateToProps = state => {\n    return {\n        visible: state.panel_visibility.help\n    };\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n    setHelpVisible: (visible) => dispatch(setHelpVisible(visible))\n});\n\nexport default withLocalize(\n    connect(stateToProps,\n            dispatchToProps\n    )(Help));","export default {\n    core: [\n        {\n            \"affiliation\": \"Research Associate, American University in Cairo\",\n            \"pic\": \"donn.jpg\",\n            \"name\": \"Mohamed \\\"Donn\\\" Gaber\",\n            \"job\": \"Assembler / Simulator Developer\",\n            \"link\": \"https://donn.website/\",\n            \"desc\": \"Maintainer of the Cloud V platform on both https://cloudv.io and https://efabless.com. I consume an unhealthy amount of video games in my spare time.\"\n        },\n        {\n            \"affiliation\": \"Student, American University in Cairo (formerly)\",\n            \"pic\": \"karimio.jpg\",\n            \"name\": \"Karim Abdel Hamid\",\n            \"job\": \"Primary Front-End/IDE Developer\",\n            \"link\": \"https://karimio.github.io/\",\n            \"desc\": \"I'm a game and web developer; love to write stories, play guitar, & paint.\"\n        }\n    ],\n    additional: [\n        {\n            \"affiliation\": \"Student, American University in Cairo (formerly)\",\n            \"pic\": \"ali_khaled.jpg\",\n            \"name\": \"Ali Khaled\",\n            \"job\": \"MIPS Assistance\",\n            \"link\": \"https://github.com/loshya\",\n            \"desc\": \"りゅうがわがてきをクラウ！\"\n        },\n        {\n            \"affiliation\": \"Professor, American University in Cairo\",\n            \"pic\": \"shalan.jpg\",\n            \"name\": \"Dr. Mohamed Shalan\",\n            \"job\": \"Advisor\",\n            \"link\": \"https://github.com/shalan\",\n            \"desc\": \"Founder at Cloud V, Open Hardware Researcher and Advocate\"\n        }\n    ],\n    translators: []\n};","import React, { Component } from 'react'\n\nimport { connect } from 'react-redux';\nimport { Translate, withLocalize } from \"react-localize-redux\";\nimport { setAboutVisible } from \"../actions\"\nimport devs from \"../developer_list.js\"\n\nclass About extends Component {\n    handleClose = (e) => {\n        e.preventDefault();\n        this.props.setAboutVisible(false);\n    };\n\n    handleStopClose = (event) => {\n        event.stopPropagation();\n    };\n\n    printdev = (arr) => {\n        return arr.map((element, i) => {\n            return <a key={i} href={element.link}>\n                <img src={`images/about/${element.pic}`} alt={element.name} />\n                <h4>{element.name}</h4>\n                <span>{element.job}</span>\n                <span>{element.affiliation}</span>\n                <p>{element.desc}</p>\n            </a>;\n        })\n    }\n    \n    render() {\n        return (\n            <div id=\"about\" onClick={this.handleClose} className={`settings_overlay overlay fader${this.props.visible ? \" fader_shown\" : \"\"}`}>\n                <div className=\"settings_container\" onClick={this.handleStopClose}>\n                    <button className=\"floating_close\" onClick={this.handleClose}></button>\n                    <h2><Translate id=\"about.title\" /></h2>\n                    <div className=\"overlay_contents\">\n                        <div className=\"devlist\">\n                            <h3><Translate id=\"about.core_devs\" /></h3>\n                            {\n                                this.printdev(devs.core)\n                            }\n                        </div>\n                        <div className=\"devlist\">\n                            <h3><Translate id=\"about.additional_devs\" /></h3>\n                            {\n                                this.printdev(devs.additional)\n                            }\n                        </div>\n                        {devs.translators.length > 0  && <div className=\"translatorlist\">\n                            <h3><Translate id=\"about.translators\" /></h3>\n                            {\n                                devs.translators.map((element, i) => {\n                                    return <a key={i} href={element.link}>\n                                        <h4>{element.name}</h4>\n                                        <span>{element.lang}</span>\n                                    </a>;\n                                })\n                            }\n                        </div>}\n                    </div>\n                    <button className=\"button\" onClick={this.handleClose}>Close</button>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst stateToProps = state => {\n    return {\n        visible: state.panel_visibility.about\n    };\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n    setAboutVisible: (visible) => dispatch(setAboutVisible(visible))\n});\n\nexport default withLocalize(\n    connect(stateToProps,\n            dispatchToProps\n    )(About));","import React, { Component } from 'react'\n\nexport default class HotkeyInput extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            capturing: false,\n            combo: \"a_110\",\n            shift: true,\n            alt: true,\n            ctrl: true,\n            key_name: \"n\"\n        }\n    }\n\n    handleClick = (event) => {\n        this.setState({capturing: true});\n\t\twindow.addEventListener(\"keydown\", this.handleKey);\n    }\n\n    handleKey = (event) => {\n        if (this.state.capturing) {\n            event.stopPropagation();\n            event.preventDefault();\n\n            let key = event.key.toLowerCase();\n            if (key === \"control\" || key === \"shift\" || key === \"alt\")\n                return false;\n\n            this.setState({\n                shift: event.shiftKey,\n                ctrl: event.ctrlKey,\n                alt: event.altKey,\n                key_name: key,\n                capturing: false\n            });\n\n            window.removeEventListener(\"keydown\", this.handleKey);\n            this.props.save();\n        }\n    }\n\n    testKey = (key_ctrl, key_alt, key_shift, key_name) => {\n        return (key_shift === this.state.shift &&\n            key_alt=== this.state.alt &&\n            key_ctrl === this.state.ctrl &&\n            key_name === this.state.key_name);\n    }\n\n    setKey = (key_ctrl, key_alt, key_shift, key_name, done = () => {}) => {\n        this.setState({\n            ctrl: key_ctrl,\n            alt: key_alt,\n            shift: key_shift,\n            key_name: key_name\n        }, done);\n    }\n\n    getKey = () => {\n        let key = \"_\" + this.state.key_name;\n        if (this.state.shift)\n            key = \"s\" + key;\n            \n        if (this.state.alt)\n            key = \"a\" + key;\n        \n        if (this.state.ctrl)\n            key = \"c\" + key;\n\n        return key;\n    }\n\n    setKeyStr = (str) => {\n        let upos = str.indexOf(\"_\");\n        let mods = str.substr(0, upos);\n\n\t\tlet shift = (mods.indexOf(\"s\")!==-1);\n\t\tlet alt = (mods.indexOf(\"a\")!==-1);\n\t\tlet ctrl = (mods.indexOf(\"c\")!==-1);\n        let key = str.substr(upos + 1);\n        \n        this.setKey(ctrl, alt, shift, key);\n    }\n    \n    render() {\n        let c = !this.state.capturing;\n        return (<div className={`key_bar${this.state.capturing ? \" capturing\" : \"\"}`} onClick={this.handleClick} tabIndex={0}>\n                    {!c && <span>Capturing</span>}\n                    {c && this.state.ctrl && <span>Ctrl</span>}\n                    {c && this.state.alt && <span>Alt</span>}\n                    {c && this.state.shift && <span>Shift</span>}\n                    {c && <span>{this.state.key_name}</span>}\n                </div>);\n    }\n}","import React, { Component } from 'react'\nimport HotkeyInput from '../modules/hotkey.js'\nimport Select from '../modules/select'\n\nimport { connect } from 'react-redux';\nimport { withLocalize } from \"react-localize-redux\";\nimport { setSettingsVisible } from \"../actions\"\n\nconst themes = [\n    \"theme_light\",\n    \"theme_dark\",\n    \"theme_dos\",\n    \"theme_apple2\"\n];\n\nclass Settings extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            default_isa: \"RISC-V\",\n            theme: \"theme_light\",\n            use_cookies: false\n        };\n        \n\t\twindow.addEventListener(\"keydown\", this.handleKey);\n\n        for (let i = 1; i < themes.length; ++i)\n            document.getElementById(themes[i]).disabled = true;\n\n\t\tthis.comp_new = React.createRef();\n\t\tthis.comp_load = React.createRef();\n\t\tthis.comp_save = React.createRef();\n\t\tthis.comp_assemble = React.createRef();\n\t\tthis.comp_sim = React.createRef();\n        this.comp_step = React.createRef();\n    }\n\n    handleClose = (e) => {\n        e.preventDefault();\n        this.props.setSettingsVisible(false);\n    };\n\n    handleStopClose = (event) => {\n        event.stopPropagation();\n    };\n\n    handleKey = (event) => {\n        if (this.props.canhandleinput) {\n            let key_name = event.key.toLowerCase();\n            if (key_name === \"control\" || key_name === \"shift\" || key_name === \"alt\")\n                return false;\n\n            let key_ctrl = event.ctrlKey;\n            let key_alt = event.altKey;\n            let key_shift = event.shiftKey;\n            let cancel = false;\n\n            let hotkey = [\n                this.comp_new.current,\n                this.comp_load.current,\n                this.comp_save.current,\n                this.comp_assemble.current,\n                this.comp_step.current,\n                this.comp_sim.current\n            ];\n\n            let hotkeyfns = [\n                this.props.fn_new,\n                this.props.fn_load,\n                this.props.fn_save,\n                this.props.fn_ass,\n                this.props.fn_step,\n                this.props.fn_sim\n            ];\n\n            for (let i = 0; i < hotkey.length; ++i) {\n                if (hotkey[i].testKey(key_ctrl, key_alt, key_shift, key_name)) {\n                    hotkeyfns[i]();\n                    cancel = true;\n                }\n            }\n\n            if (cancel) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    }\n\n    setDefaults = (done = () => {}) => {\n        this.comp_new.current.setKey(false, true, false, \"n\", () => {\n            this.comp_load.current.setKey(true, false, false, \"o\", () => {\n                this.comp_save.current.setKey(true, false, false, \"s\", () => {\n                    this.comp_assemble.current.setKey(false, true, false, \"f5\", () => {\n                        this.comp_sim.current.setKey(false, true, false, \"f7\", () => {\n                            this.comp_step.current.setKey(false, true, false, \"f6\", () => {\n                                this.setTheme(\"theme_light\", done);\n                            });\n                        });\n                    });\n                });\n            });\n        });\n    }\n\n    setDefaultsSave = () => {\n        this.setDefaults(this.saveSettings);\n    }\n\n    /*function getCookie(cname) {\n        var name = cname + \"=\";\n        var ca = document.cookie.split(';');\n        for(var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) === ' ') {\n                c = c.substring(1);\n            }\n            if (c.indexOf(name) === 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    }*/\n    \n    saveSettings = () => {\n        var d = new Date();\n        d.setTime(d.getTime() + (30*24*60*60*1000));\n        var expires = d.toUTCString();\n        let exp = \"; expires=\" + expires + \"; path=/\";\n        \n        document.cookie = \"ojs_hotkey_new=\" + this.comp_new.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_load=\" + this.comp_load.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_save=\" + this.comp_save.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_ass=\" + this.comp_assemble.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_sim=\" + this.comp_sim.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_step=\" + this.comp_step.current.getKey() + exp;\n        document.cookie = \"ojs_theme=\" + this.state.theme + exp;\n    }\n\n    setTheme = (val, continuefn = () => {}) => {\n        if (!themes.includes(val)) {\n            val = themes[0];\n        }\n\n        themes.forEach(function(element) {\n            document.getElementById(element).disabled = (element !== val);\n        });\n\n        this.setState({theme: val}, continuefn);\n    }\n\n    componentDidMount() {\n        let has_cookies = false;\n\n        let ca = document.cookie.split(\"; \");\n\n        let i = 0;\n        for (; i < ca.length; i++) {\n            var c = ca[i];\n            \n            while (c.charAt(0) === ' ') {\n                c = c.substring(1);\n            }\n            \n            let eq = c.indexOf(\"=\");\n            let str = c.substr(0, eq);\n            let val = c.substr(eq+1);\n            if (str === \"ojs_hotkey_new\") {\n                this.comp_new.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_load\") {\n                this.comp_load.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_save\") {\n                this.comp_save.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_ass\") {\n                this.comp_assemble.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_sim\") {\n                this.comp_sim.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_step\") {\n                this.comp_step.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_theme\") {\n                this.setTheme(val);\n                has_cookies = true;\n            }\n        }\n\n        if (has_cookies) {\n            this.setState({use_cookies: true});\n        }\n    }\n\n    handleISA = (event) => {\n        this.setState({default_isa: event.target.value});\n    };\n\n    handleTheme = (event) => {\n        this.setTheme(event.target.value, this.saveSettings);\n    };\n\n    acceptCookies = (e) => {\n        e.preventDefault();\n\n        this.setState({use_cookies: true});\n        this.setDefaultsSave();\n    }\n\n    deleteAllCookies = () => {\n        var cookies = document.cookie.split(\"; \");\n\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i];\n            var eqPos = cookie.indexOf(\"=\");\n            var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n            let startojs = name.substr(0, 3);\n            if (startojs === \"ojs\")\n                document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n        \n        }\n\n        this.setState({use_cookies: false});\n        this.setDefaults();\n    }\n\n    render() {\n        return (\n            <div id=\"settings\" onClick={this.handleClose} className={`settings_overlay overlay fader${this.props.visible ? \" fader_shown\" : \"\"}`}>\n                <div className=\"settings_container\" onClick={this.handleStopClose}>\n                    <button className=\"floating_close\" onClick={this.handleClose}></button>\n                    <h2>Settings</h2>\n                    {!this.state.use_cookies && \n                        <div className=\"cookie_screen\">\n                            <h3>Cookies</h3>\n                            <p>In order to set your own settings, you need to enable cookies. Cookies are the way websites store data for individual users. We store your cookies directly in the browser, and only store the options stored here.</p>\n                            <button onClick={this.acceptCookies} className=\"button\">Accept Cookies, Show Settings</button>\n                            <button onClick={this.handleClose} className=\"button subbutton\">Close Window</button>\n                        </div>\n                    }\n                    <div style={{display: (this.state.use_cookies ? \"block\" : \"none\"), position: \"relative\"}}>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <td colSpan={2}>General Settings</td>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {/*<tr>\n                                    <td colSpan={2}>\n                                        <Select onChange={this.handleISA} icon=\"/images/icons/input_type.svg\" placeholder=\"Default ISA\" value={this.state.default_isa}>\n                                            <option>RISC-V</option>\n                                            <option>MIPS</option>\n                                        </Select>\n                                    </td>\n                                </tr>*/}\n                                <tr>\n                                    <td colSpan={2}>\n                                        <Select onChange={this.handleTheme} icon=\"images/icons/input_type.svg\" placeholder=\"Theme\" value={this.state.theme}>\n                                            <option value=\"theme_light\">Light</option>\n                                            <option value=\"theme_dark\">Dark</option>\n                                            <option value=\"theme_dos\">DOS</option>\n                                            <option value=\"theme_apple2\">Apple ][</option>\n                                        </Select>\n                                    </td>\n                                </tr>\n                            </tbody>\n                            <thead>\n                                <tr>\n                                    <td colSpan={2}>Hotkeys</td>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td>New Tab</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_new} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Save Tab</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_save} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Load</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_load} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Assemble</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_assemble} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Step-By-Step</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_step} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Simulate</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_sim} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <button className=\"button\" onClick={this.handleClose}>Accept Changes</button>\n                        <button className=\"button subbutton\" onClick={this.setDefaultsSave}>Restore Defaults</button>\n                        <button className=\"button subbutton\" onClick={this.deleteAllCookies}>Delete Cookies</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst stateToProps = state => {\n    return {\n        visible: state.panel_visibility.settings\n    };\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n    setSettingsVisible: (visible) => dispatch(setSettingsVisible(visible))\n});\n\nexport default withLocalize(\n    connect(stateToProps,\n            dispatchToProps\n    )(Settings));","import React, { Component } from 'react'\n\nexport default class Input extends Component {\n    render() {\n        return (\n            <div className=\"input_group\">\n                <input onChange={this.props.onChange} value={this.props.value} style={{backgroundImage: `url(${this.props.icon})`}} type={this.props.type} placeholder={this.props.placeholder} />\n                <label className=\"group_label\">{this.props.placeholder}</label>\n            </div>\n        );\n    }\n}\n","export class VirtualOS {\n    constructor() {\n        this.continueInputString = (core, val) => {\n            let reg = core.virtualOSArgumentVectorStart;\n            let arg = core.registerFile.read(reg);\n            let array = [];\n            for (let i = 0; i < val.length; ++i) {\n                array.push(val.charCodeAt(i));\n            }\n            core.memset(arg, array);\n        };\n        this.continueInputInt = (core, val) => {\n            let reg = core.virtualOSArgumentVectorStart;\n            core.registerFile.write(reg, val);\n        };\n    }\n    ecall(core) {\n        let service = core.registerFile.read(core.virtualOSServiceRegister);\n        const start = core.virtualOSArgumentVectorStart;\n        switch (service) {\n            case 1: {\n                let val = core.registerFile.read(start);\n                this.outputInt(val);\n                break;\n            }\n            case 4: {\n                let iterator = core.registerFile.read(start);\n                let array = [];\n                let char = null;\n                while ((char = core.memcpy(iterator, 1)[0]) !== 0) {\n                    array.push(char);\n                    iterator += 1;\n                }\n                let outStr = array.map(c => String.fromCharCode(c)).join('');\n                this.outputString(outStr);\n                return null;\n            }\n            case 5: {\n                this.inputInt();\n                return \"WAIT\";\n            }\n            case 8: {\n                this.inputString();\n                return \"WAIT\";\n            }\n            case 10:\n                this.handleHalt();\n                return \"HALT\";\n            default:\n                return \"UNHANDLED\";\n        }\n        return null;\n    }\n}\n","export class Enum {\n    constructor(object) {\n        for (let key in object) {\n            this[key] = object[key];\n            this[object[key]] = key;\n        }\n    }\n}","\nexport class Utils {\n    /*\n        signExt\n\n        Sign extends an n-bit value to fit Javascript limits.\n    */\n    static signExt(value, bits) {\n        let mutableValue = value;\n        if ((mutableValue & (1 << (bits - 1))) !== 0) {\n            mutableValue = ((~(0) >>> bits) << bits) | value;\n        }\n        return mutableValue;\n    }\n    \n    /*\n        rangeCheck\n\n        Checks if a value can fit within a certain number of bits.\n    */\n   static rangeCheck(value, bits) {\n        if (bits >= 32) {\n            return null; // No stable way of checking.\n        }\n        if (Math.abs(value).toString(2).length > bits) {\n            return false;\n        }\n        var min = -(1 << bits - 1);\n        var max = (1 << bits - 1) - 1;\n        value = this.signExt(value, bits);\n        if ((min <= (value >> 0)) && ((value >> 0) <= max)) {\n            return true;\n        }\n        return false;\n    }\n    \n    /*\n        catBytes\n        \n        Converts bytes stored in a little endian fashion to a proper js integer.\n    */\n   static catBytes(bytes, bigEndian = false) {\n        if (bytes.length > 4) {\n            return null;\n        }\n        if (bigEndian) {\n            bytes.reverse();\n        }\n        let storage = 0 >>> 0;\n        for (let i = 0; i < bytes.length; i++) {\n            storage = storage | (bytes[i] << (8 * i));\n        }\n        return storage;\n    }\n    \n    /*\n        pad\n        \n        Turns a number to a padded string.\n    */\n    static pad(number, digits, radix) {\n        let padded = number.toString(radix);\n        while (digits > padded.length) {\n            padded = \"0\" + padded;\n        }\n        return padded;\n    }\n    \n    static hex(array) {\n        let hexadecimal = \"\";\n        for (let i = 0; i < array.length; i++) {\n            let hexRepresentation = array[i].toString(16).toUpperCase();\n            if (hexRepresentation.length === 1) {\n                hexRepresentation = \"0\" + hexRepresentation;\n            }\n            hexadecimal += hexRepresentation + \" \";\n        }\n        return hexadecimal;\n    }\n}","import { Enum } from \"./Enum.js\";\nimport { Utils } from \"./Utils.js\";\n\nexport const Parameter = new Enum({\n    immediate: 0,\n    register: 1,\n    condition: 2,\n    offset: 3,\n    special: 4,\n    fpImmediate: 5\n});\n\nexport const Endianness = new Enum({\n    little: 0,\n    big: 1,\n    bi: 2\n});\n\nexport const Keyword = new Enum({\n    directive: 0,\n    comment: 1,\n    label: 2,\n    stringMarker: 3,\n    charMarker: 4,\n    register: 5,\n\n    string: 6,\n    char: 7,\n    numberic: 8\n});\n\nexport const Directive = new Enum({\n    text: 0,\n    data: 1,\n    string: 2,\n    cString: 3,\n\n    _8bit: 4,\n    _16bit: 5,\n    _32bit: 6,\n    _64bit: 7,\n\n    fixedPoint: 8,\n    floatingPoint: 9,\n\n    custom: 10\n});\n\nexport class BitRange {\n    constructor(field, start, bits, constant = null, signed = false) {\n        this.field = field;\n        this.start = start;\n        this.bits = bits;\n        this.constant = constant;\n        this.signed = signed;\n    }\n    get end() {\n        return this.start + this.bits - 1;\n    }\n    limited(totalBits, limitStart = null, limitEnd = null) {\n        this.totalBits = totalBits;\n        this.limitStart = limitStart;\n        this.limitEnd = limitEnd;\n        return this;\n    }\n    parameterized(parameter, parameterType, parameterDefaultValue = null) {\n        this.parameter = parameter;\n        this.parameterDefaultValue = parameterDefaultValue;\n        this.parameterType = parameterType;\n        return this;\n    }\n}\n\nexport class Format {\n    constructor(ranges, regex, disassembly, processSpecialParameter = null, decodeSpecialParameter = null) {\n        this.ranges = ranges;\n        this.regex = regex;\n        this.disassembly = disassembly;\n        this.processSpecialParameter = processSpecialParameter;\n        this.decodeSpecialParameter = decodeSpecialParameter;\n    }\n}\n\nexport class Instruction {\n    constructor(mnemonic, format, constants, constValues, executor, signatoryOverride = null, pseudoInstructionFor = []) {\n        this.computedBits = null;\n        /*\n         Mask\n         \n         It's basically the bits of each format, but with Xs replacing parts that aren't constant in every instruction.\n         For example, if an 8-bit ISA defines 5 bits for the register and 3 bits for the opcode, and the opcode for ADD is 101 then the ADD instruction's mask is XXXXX101.\n        */\n        this.computedMask = null;\n        this.computedTemplate = null;\n        this.mnemonic = mnemonic;\n        this.format = format;\n        this.constants = [];\n        for (let i in constants) {\n            this.constants[constants[i]] = constValues[i];\n        }\n        this.executor = executor;\n        this.signatoryOverride = signatoryOverride;\n        this.pseudoInstructionFor = pseudoInstructionFor;\n    }\n    pad(str, length) {\n        let padded = str;\n        for (let i = 0; i < length - str.length; i++) {\n            padded = \"0\" + padded;\n        }\n        return padded;\n    }\n    get bits() {\n        if (this.computedBits !== null) {\n            return this.computedBits;\n        }\n        let count = 0;\n        for (var i in this.format.ranges) {\n            count += this.format.ranges[i].bits;\n        }\n        this.computedBits = count;\n        return this.computedBits;\n    }\n    get bytes() {\n        return Math.ceil(this.bits / 8);\n    }\n    get mask() {\n        if (this.computedMask !== null) {\n            return this.computedMask;\n        }\n        var string = '';\n        for (let i = 0; i < this.bits; i += 1) {\n            string += 'X';\n        }\n        for (let i in this.format.ranges) {\n            let range = this.format.ranges[i];\n            let constant = this.constants[range.field];\n            if (constant === null) {\n                constant = range.constant;\n            }\n            if (constant != null) {\n                let before = string.substr(0, this.bits - range.end - 1);\n                let addition = Utils.pad(constant, range.bits, 2);\n                let after = range.start === 0 ? '' : string.substr(-range.start);\n                string = before + addition + after;\n            }\n        }\n        this.computedMask = string;\n        return this.computedMask;\n    }\n    ;\n    match(machineCode) {\n        let machineCodeMutable = machineCode >>> 0;\n        let maskBits = this.mask.split(\"\");\n        for (let i = this.bits - 1; i >= 0; i--) {\n            let bit = (machineCodeMutable & 1);\n            machineCodeMutable >>= 1;\n            if (maskBits[i] === \"X\") {\n                continue;\n            }\n            if (parseInt(maskBits[i], 10) !== bit) {\n                return false;\n            }\n        }\n        return true;\n    }\n    get template() {\n        if (this.computedTemplate != null) {\n            return this.computedTemplate;\n        }\n        let temp = 0 >>> 0;\n        for (let i in this.format.ranges) {\n            let range = this.format.ranges[i];\n            let constant = this.constants[range.field];\n            if (constant === null) {\n                constant = range.constant;\n            }\n            if (constant != null) {\n                temp |= (constant << range.start);\n            }\n        }\n        this.computedTemplate = temp;\n        return temp;\n    }\n    ;\n}\n\nexport class PseudoInstruction {\n}\n\nexport class InstructionSet {\n    /*\n        InstructionSet initializer\n    */\n    constructor(bits, formats, instructions, pseudoInstructions, abiNames, keywords, directives, incrementOnFetch, exampleCode) {\n        this.bits = bits;\n        this.formats = formats;\n        this.instructions = instructions;\n        instructions.sort((a, b) => a.bytes - b.bytes);\n        this.pseudoInstructions = pseudoInstructions;\n        this.abiNames = abiNames;\n        this.keywords = keywords;\n        this.directives = directives;\n        this.incrementOnFetch = incrementOnFetch;\n        this.exampleCode = exampleCode;\n    }\n    //Return Mnemonic Index (pseudo)\n    pseudoMnemonicSearch(mnemonic) {\n        return -1;\n    } //Worst case = instructions.length\n    //Return Mnemonic Index (True)\n    mnemonicSearch(mnemonic) {\n        for (let i = 0; i < this.instructions.length; i++) {\n            if (this.instructions[i].mnemonic === mnemonic) {\n                return i;\n            }\n        }\n        return -1;\n    } //Worst case = instructions.length\n    instructionsPrefixing(line) {\n        var result = [];\n        for (let i in this.instructions) {\n            let instruction = this.instructions[i];\n            if (line.toUpperCase().hasPrefix(instruction.mnemonic)) {\n                let captures = instruction.format.regex.exec(line);\n                if (captures && captures[1].toUpperCase() === instruction.mnemonic) {\n                    result.push(instruction);\n                }\n            }\n        }\n        return result;\n    }\n    disassemble(instruction, args) {\n        let output = instruction.format.disassembly;\n        output = output.replace(\"@mnem\", instruction.mnemonic);\n        for (let i = 0; i < instruction.format.ranges.length; i++) {\n            let range = instruction.format.ranges[i];\n            let parameter = range.parameter;\n            if (parameter != null) {\n                output = output.replace(\"@arg\" + range.parameter, (range.parameterType === Parameter.register) ? this.abiNames[args[parameter]] : args[parameter].toString());\n            }\n        }\n        return output;\n    }\n}","import { Enum } from \"./Enum.js\";\nimport { Parameter, Keyword, Directive } from \"./InstructionSet.js\";\nimport { Utils } from \"./Utils.js\";\n\n// Changes a string of hex bytes to an array of numbers.\nString.prototype.interpretedBytes = function () {\n    let hexes = this.split(' '); // Remove spaces, then seperate characters\n    let bytes = [];\n    for (let i = 0; i < hexes.length; i++) {\n        let value = parseInt(hexes[i], 16);\n        if (!isNaN(value)) {\n            bytes.push(value);\n        }\n    }\n    return bytes;\n};\n\n// Check if haystack has needle in the beginning.\nString.prototype.hasPrefix = function (needle) {\n    return this.substr(0, needle.length) === needle;\n};\n\nexport const Kind = new Enum({\n    instruction: 0,\n    data: 1,\n    directive: 2,\n    noise: 3\n});\n\nexport class Line {\n    constructor(raw, number) {\n        this.addressThisPass = null;\n        this.sensitive = false;\n        this.machineCode = [];\n        this.raw = raw;\n        this.number = number;\n        this.kind = Kind.noise;\n        this.sensitivityList = [];\n        this.possibleInstructions = [];\n    }\n    static arrayFromFile(file) {\n        return file.split('\\n').map((line, index) => new Line(line, index));\n    }\n    initialProcess(assembler, text = true) {\n        let comment = assembler.keywordRegexes[Keyword.comment];\n        let tmp = comment.exec(this.raw)[1];\n        let label = assembler.keywordRegexes[Keyword.label];\n        let pieces = label.exec(tmp);\n        this.label = pieces[1];\n        this.processed = pieces[2] || '';\n        if (/^s*$/.exec(this.processed) !== null) {\n            return text;\n        }\n        if (assembler.keywordRegexes[Keyword.directive] != null) {\n            let captures = RegExp(assembler.keywordRegexes[Keyword.directive]).exec(this.processed);\n            if (captures !== null) {\n                this.directive = assembler.directives[captures[1]];\n                this.directiveData = captures[2];\n            }\n        }\n        if (text) {\n            if (this.directive !== undefined) {\n                switch (this.directive) {\n                    case Directive.data:\n                        this.kind = Kind.directive;\n                        return false;\n                    case Directive.text:\n                        this.kind = Kind.directive;\n                        break;\n                    default:\n                        this.invalidReason = `Unsupported directive.`;\n                }\n                return true;\n            }\n            this.kind = Kind.instruction;\n            assembler.instructionSet.instructions.forEach(instruction => {\n                let match = instruction.format.regex.exec(this.processed);\n                if (match !== null && match[1].toUpperCase() === instruction.mnemonic) {\n                    this.possibleInstructions.push([instruction, match.slice(2), [], null]);\n                }\n                return match !== null;\n            });\n            if (this.possibleInstructions.length === 0) {\n                this.invalidReason = `Could not find any matching instructions.`;\n                return true;\n            }\n            let minimum = this.possibleInstructions[0][0].bytes;\n            (this.machineCode = []).length = minimum;\n            this.machineCode.fill(0);\n            return true;\n        }\n        else {\n            let count = null; // byte count\n            let zeroDelimitedString = 0;\n            if (this.directive !== undefined) {\n                this.kind = Kind.data;\n                switch (this.directive) {\n                    case Directive.data:\n                        this.kind = Kind.directive;\n                        break;\n                    case Directive.text:\n                        this.kind = Kind.directive;\n                        return true;\n                    case Directive._32bit:\n                        count = count || 4;\n                    // fall through\n                    case Directive._16bit:\n                        count = count || 2;\n                    // fall through\n                    case Directive._8bit:\n                        count = count || 1;\n                        let elements = this.directiveData.split(/\\s*,\\s*/);\n                        (this.machineCode = []).length = (elements.length * count);\n                        this.machineCode.fill(0);\n                        this.kind = Kind.data;\n                        break;\n                    case Directive.cString:\n                        zeroDelimitedString = 1;\n                    // fall through\n                    case Directive.string:\n                        if (assembler.keywordRegexes[Keyword.string] === null) {\n                            this.invalidReason = `This instruction set does not define a string keyword.`;\n                        }\n                        let match = assembler.keywordRegexes[Keyword.string].exec(this.directiveData);\n                        if (match === null) {\n                            this.invalidReason = `Invalid string \"${this.directiveData}\".`;\n                        }\n                        else {\n                            let regex = RegExp(assembler.generalCharacters, \"g\");\n                            let characters = [];\n                            let found = null;\n                            while ((found = regex.exec(match[1]))) {\n                                characters.push(found);\n                            }\n                            (this.machineCode = []).length = (characters.length + zeroDelimitedString);\n                            for (let c in characters) {\n                                let character = String(characters[c]);\n                                let value = character.charCodeAt(0);\n                                if (character.length > 2) {\n                                    value = Assembler.escapedCharacters[character[1]];\n                                }\n                                this.machineCode[c] = value;\n                            }\n                            if (zeroDelimitedString === 1) {\n                                this.machineCode[this.machineCode.length - 1] = 0;\n                            }\n                        }\n                        this.kind = Kind.data;\n                        break;\n                    default:\n                        this.invalidReason = `Unrecognized directive.`;\n                }\n            }\n            else {\n                let isInstruction = false;\n                assembler.instructionSet.instructions.forEach(instruction => {\n                    let match = instruction.format.regex.exec(this.processed);\n                    if (match !== null && match[1].toUpperCase() === instruction.mnemonic) {\n                        isInstruction = true;\n                    }\n                });\n                if (isInstruction) {\n                    this.invalidReason = `Matched instruction in data section.`;\n                }\n                else {\n                    this.invalidReason = `Unknown input in the data section.`;\n                }\n            }\n            return false;\n        }\n    }\n    assembleText(assembler, lines, address) {\n        let candidates = false;\n        testingInstructions: for (let i in this.possibleInstructions) {\n            let possibleInstruction = this.possibleInstructions[i];\n            let instruction = possibleInstruction[0];\n            let args = possibleInstruction[1];\n            let machineCode = instruction.template;\n            for (var j in instruction.format.ranges) {\n                let range = instruction.format.ranges[j];\n                if (range.parameter === undefined) {\n                    continue;\n                }\n                let limited = range.totalBits;\n                let bits = limited || range.bits;\n                let store = null;\n                if (range.parameterType == Parameter.special) {\n                    store = instruction.format.processSpecialParameter(args[range.parameter], Parameter.special, bits, address, assembler);\n                }\n                else {\n                    store = assembler.process(args[range.parameter], range.parameterType, bits, address, instruction.bytes);\n                }\n                if (store.errorMessage !== null) {\n                    possibleInstruction[3] = store.errorMessage;\n                    continue testingInstructions;\n                }\n                else if (store.context !== null && store.value === null) {\n                    store.context.sensitivityList.push(this);\n                    this.sensitive = true;\n                    break testingInstructions;\n                }\n                else {\n                    let register = store.value;\n                    let startBit = range.limitStart;\n                    let endBit = range.limitEnd;\n                    if (limited !== undefined && startBit !== undefined && endBit !== undefined) {\n                        register >>= startBit; // discard start bits bits\n                        let bits = (endBit - startBit + 1);\n                        register &= (1 << bits) - 1; // mask end - start + 1 bits\n                    }\n                    let masked = register & (1 << bits) - 1;\n                    machineCode |= masked << range.start;\n                }\n            }\n            for (let i = 0; i < instruction.bytes; i += 1) {\n                possibleInstruction[2].push(machineCode & 0xFF);\n                machineCode >>>= 8;\n            }\n            candidates = true;\n        }\n        if (candidates) {\n            // Expand machine code if applicable\n            let smallestPossibleInstruction = this.possibleInstructions.filter(pi => pi[3] === null)[0];\n            this.machineCode = smallestPossibleInstruction[2];\n        }\n        // Handle errors\n        let errorMessage = null;\n        let errorOccurred = !(candidates || this.sensitive);\n        if (errorOccurred) {\n            errorMessage = this.possibleInstructions[this.possibleInstructions.length - 1][3]; //Typically the most lenient option is last\n        }\n        return errorMessage;\n    }\n    assembleData(assembler, lines, address) {\n        let errorMessage = null;\n        let count = null;\n        switch (this.directive) {\n            case Directive._32bit:\n                count = count || 4;\n            // fall through\n            case Directive._16bit:\n                count = count || 2;\n            // fall through\n            case Directive._8bit:\n                count = count || 1;\n                let elements = this.directiveData.split(/\\s*,\\s*/);\n                for (let i = 0; i < elements.length; i += 1) {\n                    let element = elements[i];\n                    let bits = count << 3;\n                    let store = assembler.process(element, Parameter.immediate, bits, address, 0);\n                    if (store.errorMessage !== null) {\n                        errorMessage = store.errorMessage;\n                        break;\n                    }\n                    else if (store.context !== null && store.value === null) {\n                        store.context.sensitivityList.push(this);\n                        this.sensitive = true;\n                        break;\n                    }\n                    else {\n                        let stored = store.value;\n                        for (let j = 0; j < count; j += 1) {\n                            let offset = (count * i);\n                            this.machineCode[j + offset] = stored & 0xFF;\n                            stored >>>= 8;\n                        }\n                    }\n                }\n                break;\n            case Directive.cString:\n            case Directive.string:\n                // Already handled in pass 0.\n                break;\n            default:\n                this.invalidReason = `Unrecognized directive.`;\n        }\n        return errorMessage;\n    }\n    assemble(assembler, lines, address) {\n        this.sensitive = false;\n        let result = [null, false];\n        switch (this.kind) {\n            case Kind.instruction:\n                result[0] = this.assembleText(assembler, lines, address);\n                break;\n            case Kind.data:\n                result[0] = this.assembleData(assembler, lines, address);\n                break;\n            default:\n                break;\n        }\n        let lineByLabel = assembler.linesByLabel[this.label];\n        if (lineByLabel !== undefined) {\n            lineByLabel[1] = address;\n        }\n        if (result[0] === null) {\n            for (let i in this.sensitivityList) {\n                let sensor = this.sensitivityList[i];\n                if (sensor.addressThisPass !== null) {\n                    let sensorLength = sensor.machineCode.length;\n                    let newAssembly = sensor.assemble(assembler, lines, sensor.addressThisPass);\n                    if (sensor.sensitive) {\n                        // Still sensitive, leave it alone uwu\n                    }\n                    else {\n                        if (newAssembly[1]) {\n                            result[1] = true;\n                            break;\n                        }\n                        if (sensor.machineCode.length !== sensorLength) {\n                            result[1] = true;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            this.invalidReason = result[0];\n        }\n        return result;\n    }\n}\n\nexport class Assembler {\n    constructor(instructionSet, endianness, memoryMap = null) {\n        this.linesByLabel = [];\n        this.incrementOnFetch = instructionSet.incrementOnFetch;\n        this.keywordRegexes = [];\n        this.memoryMap = memoryMap;\n        if (instructionSet.keywordRegexes) {\n            this.keywordRegexes = instructionSet.keywordRegexes;\n        }\n        else if (instructionSet.keywords) {\n            let words = instructionSet.keywords;\n            this.keywordRegexes = [];\n            if (words[Keyword.directive]) {\n                let options = Assembler.options(instructionSet.keywords[Keyword.directive]);\n                if (options) {\n                    this.keywordRegexes[Keyword.directive] = RegExp(options + \"([^\\\\s]+)\\\\s*(.+)*\");\n                }\n            }\n            if (words[Keyword.comment]) {\n                let options = Assembler.options(words[Keyword.comment]);\n                if (options) {\n                    this.keywordRegexes[Keyword.comment] = RegExp(\"^(.*?)(\" + options + \".*)?$\");\n                }\n            }\n            if (words[Keyword.label]) {\n                let options = Assembler.options(words[Keyword.label]);\n                if (options) {\n                    this.keywordRegexes[Keyword.label] = RegExp(\"^(?:([A-Za-z_][A-Za-z0-9_]*)\" + options + \")?\\\\s*(.*)?$\");\n                }\n            }\n            if (words[Keyword.register]) {\n                let options = Assembler.options(words[Keyword.register]);\n                if (options) {\n                    this.keywordRegexes[Keyword.register] = RegExp(options + \"([0-9]+)\");\n                }\n            }\n            this.keywordRegexes[Keyword.numeric] = RegExp(\"(-?(?:0([\" + Assembler.radixList + \"]))?[A-F0-9]+)\");\n            if (words[Keyword.charMarker]) {\n                let options = Assembler.options(words[Keyword.charMarker]);\n                if (options) {\n                    let escapable = options.length > 1 ? \"\" : \"\\\\\" + options;\n                    //this.keywordRegexes[Keyword.char] = RegExp(options + \"\" + options);\n                    this.generalCharacters = \"(?:(?:\\\\\\\\[\\\\\\\\\" + Assembler.escapedCharacterList + escapable + \"])|(?:[\\\\x20-\\\\x5b\\\\x5d-\\\\x7e]))\";\n                    this.keywordRegexes[Keyword.char] = RegExp(options + '(' + this.generalCharacters + ')' + options);\n                }\n            }\n            else {\n                this.generalCharacters = \"(?:(?:\\\\\\\\[\\\\\\\\\" + Assembler.escapedCharacterList + \"])|(?:[\\\\x20-\\\\x5b\\\\x5d-\\\\x7e]))\";\n            }\n            if (words[Keyword.stringMarker]) {\n                let options = Assembler.options(words[Keyword.stringMarker]);\n                if (options) {\n                    this.keywordRegexes[Keyword.string] = RegExp(options + \"(\" + this.generalCharacters + \"*)\" + options);\n                }\n            }\n        }\n        else {\n            console.log(\"INSTRUCTION SET WARNING: This instruction set doesn't define any keywords.\");\n        }\n        this.directives = instructionSet.directives;\n        this.endianness = (endianness) ? endianness : instructionSet.endianness;\n        this.instructionSet = instructionSet;\n    }\n    //Returns number on success, string on failure\n    process(text, type, bits, address, instructionLength) {\n        let result = {\n            errorMessage: null,\n            value: null,\n            context: null\n        };\n        switch (type) {\n            case Parameter.register:\n                let index = this.instructionSet.abiNames.indexOf(text);\n                if (index !== -1) {\n                    result.value = index;\n                    return result;\n                }\n                let registerNo = null;\n                if (this.keywordRegexes[Keyword.register]) {\n                    let match = this.keywordRegexes[Keyword.register].exec(text);\n                    if (match !== null) {\n                        registerNo = match[1];\n                    }\n                }\n                if (registerNo === null) {\n                    result.errorMessage = `args.registerDoesNotExist(${text})`;\n                    return result;\n                }\n                registerNo = parseInt(registerNo, 10);\n                if ((registerNo & (~0 << bits)) !== 0) {\n                    result.errorMessage = `args.registerDoesNotExist(${text})`;\n                    return result;\n                }\n                result.value = registerNo;\n                return result;\n            case Parameter.offset:\n            case Parameter.immediate:\n                //Label\n                let value = null;\n                let reference = this.linesByLabel[text];\n                if (reference !== undefined) {\n                    result.context = reference[0];\n                    if (reference[1] === null) {\n                        return result;\n                    }\n                    value = reference[1];\n                }\n                if (value === null && this.keywordRegexes[Keyword.char]) {\n                    let extraction = RegExp(this.keywordRegexes[Keyword.char]).exec(text);\n                    if (extraction !== null && extraction[1] !== undefined) {\n                        value = extraction[1].charCodeAt(0);\n                        if (value > 255) {\n                            result.errorMessage = \"Non-ascii character \" + extraction[1] + \" unsupported.\";\n                            return result;\n                        }\n                    }\n                }\n                if (value === null && this.keywordRegexes[Keyword.numeric] !== undefined) {\n                    let array = RegExp(this.keywordRegexes[Keyword.numeric]).exec(text);\n                    if (array !== null) {\n                        let radix = Assembler.radixes[array[2]] || 10;\n                        let interpretable = array[1];\n                        value = parseInt(interpretable, radix);\n                    }\n                }\n                if (value !== null && type === Parameter.offset) {\n                    value -= address;\n                    if (this.incrementOnFetch) {\n                        value -= instructionLength;\n                    }\n                }\n                if (value === null || isNaN(value)) {\n                    result.errorMessage = `args.valueUnrecognized(${text})`;\n                    return result;\n                }\n                else if (Utils.rangeCheck(value, bits) === false) {\n                    result.errorMessage = `args.outOfRange(${text})`;\n                    return result;\n                }\n                result.value = value;\n                return result;\n            default:\n                result.errorMessage = `Internal Oak Error: Unknown parameter '${Parameter[type]}'.`;\n                return result;\n        }\n    }\n    static options(list) {\n        if (list.length === 0) {\n            return null;\n        }\n        let options = \"\";\n        for (let i = 0; i < list.length; i++) {\n            let keyword = list[i];\n            if (keyword === \"\\\\\") {\n                console.log(\"INSTRUCTION SET WARNING: '\\\\' used as keyword. This behavior is undefined.\");\n                return null;\n            }\n            if (options === \"\") {\n                options = \"(?:\";\n            }\n            else {\n                options += \"|\";\n            }\n            options += keyword;\n        }\n        return options + \")\";\n    }\n    assemble(lines, pass) {\n        lines.map(line => line.addressThisPass = null);\n        let errors = [];\n        let assemblerModeText = true;\n        let address = 0;\n        for (var i in lines) {\n            let line = lines[i];\n            switch (pass) {\n                case 0: // Zero Pass - Minimum Possible Size\n                    assemblerModeText = line.initialProcess(this, assemblerModeText);\n                    if (line.invalidReason !== undefined) {\n                        errors.push(line);\n                    }\n                    if (line.label !== undefined) {\n                        this.linesByLabel[line.label] = [line, null];\n                    }\n                    break;\n                default:\n                    line.addressThisPass = address;\n                    let asm = line.assemble(this, lines, address); // Assumption: Instruction cannot become context-sensitive based on size\n                    if (asm[0] !== null) {\n                        errors.push(line);\n                    }\n                    if (asm[1]) {\n                        return null; // Repass\n                    }\n                    address += line.machineCode.length;\n            }\n        }\n        return errors;\n    }\n}\n\nAssembler.radixes = {\n    'b': 2,\n    'o': 8,\n    'd': 10,\n    'x': 16\n};\nAssembler.radixList = Object.keys(Assembler.radixes).join(\"\");\n\nAssembler.escapedCharacters = {\n    '0': 0,\n    't': 9,\n    'n': 10,\n    'r': 13,\n    '\\'': 47,\n    '\"': 42\n};\n\nAssembler.escapedCharacterList = Object.keys(Assembler.escapedCharacters).join(\"\");\n","import { Parameter } from \"./InstructionSet.js\";\nimport { Utils } from \"./Utils.js\";\n\nexport class CoreFactory {\n    constructor() {\n        this.ISAs = {};\n    }\n\n    getCoreList() {\n        return Object.keys(this.ISAs);\n    }\n    \n    getCore(architecture, memorySize, virtualOS, options=null) {\n        let isa = this.ISAs[architecture];\n        if (isa === undefined) {\n            throw `ISA '${architecture}' not found.`;\n        }\n        if (options === null) {\n            options = isa.options;\n        }\n        for (let key in options) {\n            if (isa.options[key] === undefined) {\n                throw `Option '${key}' for ISA ${architecture} is unsupported.`;\n            }\n        }\n        let instructionSet = isa.generator(options);\n        return new isa.core(memorySize, virtualOS, instructionSet);\n    }\n}\n\n\nexport class Core {\n    //Returns bytes on success, null on failure\n    memcpy(address, bytes) {\n        if (((address + bytes) >>> 0) > this.memorySize) {\n            return null;\n        }\n        let result = [];\n        for (let i = 0; i < bytes; i++) {\n            result.push(this.memory[address + i]);\n        }\n        return result;\n    }\n    //Returns boolean indicating success\n    //Use to store machine code in memory so it can be executed.\n    memset(address, bytes) {\n        if (address < 0) {\n            return false;\n        }\n        if (address + bytes.length > this.memorySize) {\n            return false;\n        }\n        for (let i = 0; i < bytes.length; i++) {\n            this.memory[address + i] = bytes[i];\n        }\n        return true;\n    }\n    decode() {\n        let insts = this.instructionSet.instructions;\n        this.decoded = null;\n        this.arguments = [];\n        for (let i = 0; i < insts.length; i++) {\n            if (insts[i].match(this.fetched)) {\n                this.decoded = insts[i];\n                break;\n            }\n        }\n        if (this.decoded === null) {\n            return null;\n        }\n        let bitRanges = this.decoded.format.ranges;\n        for (let i in bitRanges) {\n            let range = bitRanges[i];\n            if (range.parameter != null) {\n                let limit = range.limitStart;\n                let value = ((this.fetched >>> range.start) & ((1 << range.bits) - 1)) << limit;\n                if (range.parameterType === Parameter.special) {\n                    value = this.decoded.format.decodeSpecialParameter(value, this.pc); //Unmangle...\n                }\n                this.arguments[range.parameter] = this.arguments[range.parameter] || 0;\n                this.arguments[range.parameter] = this.arguments[range.parameter] | value;\n                if (this.decoded.format.ranges[i].signed && range.parameterType !== Parameter.register) {\n                    this.arguments[range.parameter] = Utils.signExt(this.arguments[range.parameter], range.totalBits ? range.totalBits : range.bits);\n                }\n            }\n        }\n        return this.instructionSet.disassemble(this.decoded, this.arguments);\n    }\n    //Returns null on success, error message on error.\n    execute() {\n        return this.decoded.executor(this);\n    }\n}\n\nCore.factory = new CoreFactory();","import { VirtualOS } from \"./VirtualOS.js\";\nimport { Endianness } from \"./InstructionSet.js\";\nimport { Line, Assembler } from \"./Assembler\";\nimport { Core } from \"./Core\";\n\nexport default {\n    VirtualOS: VirtualOS,\n    Endianness: Endianness,\n    Assembler: Assembler,\n    Line: Line,\n    Core: Core\n};","import React, { Component } from 'react'\nimport Input from '../modules/input'\nimport Select from '../modules/select'\nimport OakJS from '../oak/index.js';\n\nimport { connect } from 'react-redux';\nimport { withLocalize } from \"react-localize-redux\";\nimport { setProjectSettings } from \"../actions\"\n\nclass PanelSettings extends Component {\n    static display_name = \"settings\";\n\n    handleFileName = (event) => {\n        this.props.setProjectSettings(event.target.value, this.props.project_settings.memory_size, this.props.project_settings.isa);\n    }\n\n    handleISA = (event) => {\n        this.props.setProjectSettings(this.props.project_settings.file_name, this.props.project_settings.memory_size, event.target.value);\n    }\n\n    handleMemorySize = (event) => {\n        const re = /^[0-9\\b]+$/;\n    \n        if (event.target.value === '' || re.test(event.target.value)) {\n            this.props.setProjectSettings(this.props.project_settings.file_name, event.target.value, this.props.project_settings.isa);\n        }\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.props.submitChanges();\n    };\n\n    render() {\n        let isas = OakJS.Core.factory.getCoreList();\n        \n        return (\n            <div id=\"panel_settings\" className=\"panel panel_settings\">\n                <form onSubmit={this.handleSubmit}>\n                    <Input onChange={this.handleFileName} value={this.props.project_settings.file_name} icon=\"images/icons/input_name.svg\" placeholder=\"File Name\" id=\"filename\" />\n                    <Select onChange={this.handleISA} value={this.props.project_settings.isa} icon=\"images/icons/input_code.svg\" placeholder=\"Instruction Set\" >\n                        {isas.map((isa, i) => {\n                            return <option key={isa} value={isa}>{isa}</option>\n                        })}\n                    </Select>\n                    <Input onChange={this.handleMemorySize} value={this.props.project_settings.memory_size} icon=\"images/icons/input_memory.svg\" placeholder=\"Memory Size (Bytes)\" type=\"number\" />\n\n                    <input className=\"button\" value=\"Accept Changes\" type=\"submit\" />\n                </form>\n            </div>\n        )\n    }\n}\n\nconst appStateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab,\n\t\tproject_settings: state.project_settings\n\t};\n};\n\nconst appDispatchToProps = (dispatch, ownProps) => ({\n\tsetProjectSettings: (n, s, i) => dispatch(setProjectSettings(n, s, i))\n})\n\nexport default withLocalize(\n\tconnect(appStateToProps,\n\t\t\tappDispatchToProps\n\t)(PanelSettings));","import React, { Component } from 'react'\nimport Input from '../modules/input'\nimport Select from '../modules/select'\nimport {padNumber, parseToFloat, encodeFloat} from './numberttransform'\n\nexport default class PanelConversion extends Component {\n    static display_name = \"conversion\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            input: 0,\n            input_type: 0,\n            output_type: 0,\n            output: \"\",\n            has_value: false\n        };\n    }\n\n    calculateOutput = (val, in_type, out_type) => {\n        let input = val;\n        switch(in_type) {\n            case 0: // Hex\n                input = parseInt(input, 16);\n                break;\n            default:\n            case 1: // uint\n            case 2: // int\n                input = parseInt(input, 10);\n                break;\n            case 3: // bin\n                input = parseInt(input, 2);\n                break;\n            case 4: // float\n                input = encodeFloat(input);\n                break;\n        }\n    \n        if (input.toString() === \"NaN\")\n            return \"\";\n    \n        let output;\n        switch(out_type) {\n            case 0: // Hex\n                output = \"0x\"+padNumber((input >>> 0).toString(16), 8);\n                break;\n            case 1: // uint\n                output = (input >>> 0).toString(10);\n                break;\n            default:\n            case 2: // int\n                output = input.toString(10);\n                if (output > 2147483648) { output = output - 4294967296 }\n                break;\n            case 3: // bin\n                output = \"0b\"+padNumber((input >>> 0).toString(2), 32);\n                break;\n            case 4: // float\n                output = parseToFloat(input);\n                break;\n        }\n        \n        return output;\n    };\n\n    onChangeInput = (event) => {\n        let val = event.target.value;\n        let in_type = this.state.input_type;\n        let out_type = this.state.output_type;\n        let out = this.calculateOutput(val, in_type, out_type);\n        this.setState({input: val, has_value: (val !== \"\"), output: out});\n    };\n\n    onChangeInputType = (event) => {\n        let val = this.state.input;\n        let in_type = parseInt(event.target.value, 10);\n        let out_type = this.state.output_type;\n        let out = this.calculateOutput(val, in_type, out_type);\n        this.setState({input: val, input_type: in_type, has_value: (val !== \"\"), output: out});\n    };\n\n    onChangeOutputType = (event) => {\n        let val = this.state.input;\n        let in_type = this.state.input_type;\n        let out_type = parseInt(event.target.value, 10);\n        let out = this.calculateOutput(val, in_type, out_type);\n        this.setState({input: val, output_type: out_type, has_value: (val !== \"\"), output: out});\n    };\n\n    render() {\n        return (\n            <div id=\"panel_conversion\" className=\"panel panel_conversion\">\n                <Input onChange={this.onChangeInput} icon=\"images/icons/input_in.svg\" placeholder=\"Input\" type=\"text\" />\n                <Select onChange={this.onChangeInputType} icon=\"images/icons/input_type.svg\" placeholder=\"Input Type\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Integer</option>\n                    <option value=\"3\">Binary</option>\n                    {/*<option value=\"4\">Float</option>*/}\n                </Select>\n                <hr />\n                <Select onChange={this.onChangeOutputType} icon=\"images/icons/input_type.svg\" placeholder=\"Output Type\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Unsigned Integer</option>\n                    <option value=\"2\">Signed Integer</option>\n                    <option value=\"3\">Binary</option>\n                    {/*<option value=\"4\">Float</option>*/}\n                </Select>\n                <span className=\"conversion_output\">\n                    {this.state.output !==\"\" ? this.state.output : \"<Output>\"}\n                </span>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Select from '../modules/select'\nimport {padNumber, parseToFloat} from './numberttransform'\nimport { connect } from 'react-redux';\n\nconst REGISTER_UNASSIGNED = 0;\nconst REGISTER_ASSIGNED = 1;\nconst REGISTER_NEWASSIGNED = 2;\n\nclass PanelRegisters extends Component {\n    static display_name = \"registers\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            register_type: 0,\n        }\n    }\n\n    handleType = (event) => {\n        this.setState({register_type: parseInt(event.target.value, 10)});\n    };\n\n    translateRegister = (input) => {\n        switch(this.state.register_type) {\n            case 0: // Hex\n                return \"0x\"+padNumber((input >>> 0).toString(16), 8);\n            case 1: // uint\n                return (input >>> 0).toString(10);\n            default:\n            case 2: // int\n                let output = input.toString(10);\n                if (output > 2147483648) { output = output - 4294967296 }\n                return output;\n            case 3: // bin\n                return \"0b\"+padNumber((input >>> 0).toString(2), 32);\n            case 4: // float\n                return output = parseToFloat(input);\n        }\n    };\n\n    getChangedRegisterClass = (val) => {\n        switch(val) {\n            default:\n            case REGISTER_UNASSIGNED:\n                return \"reg_normal\";\n            case REGISTER_ASSIGNED:\n                return \"reg_assigned\";\n            case REGISTER_NEWASSIGNED:\n                return \"reg_new\";\n        }\n    }\n\n    render() {\n        let tab = this.props.tabs[this.props.selectedtab];\n        if (!(tab && tab.core))\n            return <div></div>;\n\n        let core = tab.core;\n        let registers = core.registerFile.physicalFile;\n        let register_changed = tab.register_changed;\n        let register_names = core.registerFile.abiNames;\n\n        return (\n            <div id=\"panel_registers\" className=\"panel panel_registers\">\n                <Select onChange={this.handleType} icon=\"images/icons/input_type.svg\" placeholder=\"Display Type\" defaultValue=\"0\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Unsigned Integer</option>\n                    <option value=\"2\">Signed Integer</option>\n                    <option value=\"3\">Binary</option>\n                    <option value=\"4\">Float</option>\n                </Select>\n                <table cellSpacing=\"0\" cellPadding=\"0\">\n                    <thead>\n                        <tr><th>Reg</th><th>Value</th></tr>\n                    </thead>\n                    <tbody>\n                        {\n                            registers.map((register, i) => {\n                                let register_dpy = this.translateRegister(register);\n                                return (<tr key={i} className={this.getChangedRegisterClass(register_changed[i])}>\n                                    <td>\n                                        {register_names[i]}\n                                    </td>\n                                    <td data-info={register}>\n                                        {register_dpy}\n                                    </td>\n                                </tr>);\n                            })\n                        }\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelRegisters);","import React, { Component } from 'react'\nimport Select from '../modules/select'\nimport {padNumber} from './numberttransform'\n\nimport { connect } from 'react-redux';\n\nclass PanelMachineCode extends Component {\n    static display_name = \"machine code\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            register_type: 0,\n        }\n    }\n\n    handleType = (event) => {\n        this.setState({register_type: parseInt(event.target.value, 10)});\n    };\n\n    translateRegister = (input) => {\n        switch(this.state.register_type) {\n            default:\n            case 0: // Hex\n                return padNumber((input >>> 0).toString(16), 2);\n            case 1: // uint\n                return padNumber((input >>> 0).toString(10), 3);\n            case 2: // octal\n                return padNumber((input >>> 0).toString(8), 3);\n            case 3: // bin\n                return padNumber((input >>> 0).toString(2), 8);\n        }\n    };\n\n    render() {\n        let tabs = this.props.tabs;\n        if (tabs.length === 0)\n            return <div></div>;\n            \n        let machinecode = tabs[this.props.selectedtab].machine_code;\n        let empty = machinecode.length === 0;\n        return (\n            <div id=\"panel_machine_code\" className=\"panel panel_machine_code\">\n                {empty && <span className=\"panel_empty\">Machine Code Empty</span>}\n                {!empty && <Select onChange={this.handleType} icon=\"images/icons/input_type.svg\" placeholder=\"Display Type\" defaultValue=\"0\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Decimal</option>\n                    <option value=\"2\">Octal</option>\n                    <option value=\"3\">Binary</option>\n                </Select>}\n                \n                {!empty && machinecode.map((byte, i) => {\n                    let val = this.translateRegister(byte);\n                    return <span key={i}>{val} </span>;\n                })}\n            </div>\n        )\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelMachineCode);","\"use strict\";\nimport { Parameter, Keyword, Directive, Instruction, InstructionSet, Format, BitRange } from \"../oak/InstructionSet.js\";\nimport { Core } from \"../oak/Core.js\";\nimport { Utils } from \"../oak/Utils.js\";\nimport JSBI from \"jsbi\";\n\n//The RISC-V Instruction Set Architecture, Version 2.1\nfunction RISCV(options) {\n    //Formats and Instructions\n    let opts = options || [];\n    let formats = [];\n    let instructions = [];\n    let pseudoInstructions = [];\n    //R-Type\n    formats.push(new Format([\n        new BitRange(\"funct7\", 25, 7),\n        new BitRange(\"rs2\", 20, 5).parameterized(2, Parameter.register),\n        new BitRange(\"rs1\", 15, 5).parameterized(1, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let rType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"ADD\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b000, 0b0000000], function (core) {\n        core.registerFile.write(\n            core.arguments[0],\n            JSBI.toNumber(\n                JSBI.bitwiseAnd(\n                    JSBI.add(\n                        JSBI.BigInt(core.registerFile.read(core.arguments[1])),\n                        JSBI.BigInt(core.registerFile.read(core.arguments[2]))\n                    ),\n                    JSBI.BigInt(\"0xFFFFFFFF\")\n                )\n            )\n        );\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SUB\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b000, 0b0100000], function (core) {\n        core.registerFile.write(\n            core.arguments[0],\n            JSBI.toNumber(\n                JSBI.bitwiseAnd(\n                    JSBI.subtract(\n                        JSBI.BigInt(core.registerFile.read(core.arguments[1])),\n                        JSBI.BigInt(core.registerFile.read(core.arguments[2]))\n                    ),\n                    JSBI.BigInt(\"0xFFFFFFFF\")\n                )\n            )\n        );\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLL\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b001, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLT\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b010, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.registerFile.read(core.arguments[2])) ? 1 : 0);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTU\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b011, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) < (core.registerFile.read(core.arguments[2]) >>> 0)) ? 1 : 0);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"XOR\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b100, 0b0000000], function (core) {\n        //\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) ^ core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRL\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b101, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRA\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b101, 0b0100000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"OR\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b110, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) | core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"AND\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b111, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) & core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    if (opts.includes(\"M\")) {\n        instructions.push(new Instruction(\"MUL\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b000, 0b0000001], function (core) {\n            let multiplier = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >> 0);\n            let multiplicant = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >> 0);\n            let product = JSBI.multiply(multiplier, multiplicant);\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(product, JSBI.BigInt(\"0xFFFFFFFF\")));\n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"MULH\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b001, 0b0000001], function (core) {\n            console.log()\n            let multiplier = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >> 0);\n            let multiplicant = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >> 0);\n            let product = JSBI.multiply(multiplier, multiplicant);\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(JSBI.signedRightShift(product, JSBI.BigInt(\"32\")), JSBI.BigInt(\"0xFFFFFFFF\")));\n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"MULHU\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b010, 0b0000001], function (core) {\n            let multiplier = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >>> 0);\n            let multiplicant = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >>> 0);\n            let product = JSBI.multiply(multiplier, multiplicant);\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(JSBI.signedRightShift(product, JSBI.BigInt(\"32\")), JSBI.BigInt(\"0xFFFFFFFF\")));\n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"MULHSU\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b011, 0b0000001], function (core) {\n            let multiplier = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >> 0);\n            let multiplicant = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >>> 0);\n            let product = JSBI.multiply(multiplier, multiplicant);\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(JSBI.signedRightShift(product, JSBI.BigInt(\"32\")), JSBI.BigInt(\"0xFFFFFFFF\")));\n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"DIV\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b100, 0b0000001], function (core) {\n            let dividend = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >> 0);\n            let divisor = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >> 0);\n\n            let product = null;\n            if (JSBI.equal(divisor, JSBI.BigInt(\"0\"))) {\n                product = JSBI.BigInt(\"-1\");\n            } else if (\n                JSBI.equal(\n                    JSBI.bitwiseAnd(dividend, JSBI.BigInt(\"0xFFFFFFFF\")),\n                    JSBI.BigInt(\"0x80000000\")\n                ) && JSBI.equal(\n                    divisor,\n                    JSBI.BigInt(\"-1\")\n                )\n            ) {\n                product = JSBI.BigInt(\"0x80000000\");\n            } else {\n                product = JSBI.divide(dividend, divisor);\n            }\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(product, JSBI.BigInt(\"0xFFFFFFFF\"))); \n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"DIVU\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b101, 0b0000001], function (core) {\n            let dividend = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >>> 0);\n            let divisor = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >>> 0);\n\n            let product = null;\n            if (JSBI.equal(divisor, JSBI.BigInt(\"0\"))) {\n                product = JSBI.BigInt(\"-1\");\n            } else {\n                product = JSBI.divide(dividend, divisor);\n            }\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(product, JSBI.BigInt(\"0xFFFFFFFF\"))); \n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"REM\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b110, 0b0000001], function (core) {\n            let dividend = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >> 0);\n            let divisor = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >> 0);\n\n            let remainder = null;\n            if (JSBI.equal(divisor, JSBI.BigInt(\"0\"))) {\n                remainder = dividend;\n            } else if (\n                JSBI.equal(\n                    JSBI.bitwiseAnd(dividend, JSBI.BigInt(\"0xFFFFFFFF\")),\n                    JSBI.BigInt(\"0x80000000\")\n                ) && JSBI.equal(\n                    divisor,\n                    JSBI.BigInt(\"-1\")\n                )\n            ) {\n                remainder = JSBI.BigInt(\"0\");\n            } else {\n                remainder = JSBI.remainder(dividend, divisor);\n            }\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(remainder, JSBI.BigInt(\"0xFFFFFFFF\"))); \n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n        instructions.push(new Instruction(\"REMU\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b111, 0b0000001], function (core) {\n            let dividend = JSBI.BigInt(core.registerFile.read(core.arguments[1]) >>> 0);\n            let divisor = JSBI.BigInt(core.registerFile.read(core.arguments[2]) >>> 0);\n\n            let remainder = null;\n            if (JSBI.equal(divisor, JSBI.BigInt(\"0\"))) {\n                remainder = dividend;\n            } else {\n                remainder = JSBI.remainder(dividend, divisor);\n            }\n            let productNumber = JSBI.toNumber(JSBI.bitwiseAnd(remainder, JSBI.BigInt(\"0xFFFFFFFF\"))); \n            core.registerFile.write(core.arguments[0], productNumber);\n            core.pc += 4;\n            return null;\n        }));\n    }\n    //I-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true).parameterized(2, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5).parameterized(1, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+),\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let iType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JALR\", iType, [\"opcode\", \"funct3\"], [0b1100111, 0b000], function (core) {\n        core.registerFile.write(core.arguments[0], core.pc + 4);\n        core.pc = (core.registerFile.read(core.arguments[1]) + Utils.signExt(core.arguments[2], 12));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ADDI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b010], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.arguments[2]) ? 1 : 0);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTIU\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b011], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) < (core.arguments[2] >>> 0) ? 1 : 0));\n        core.pc += 4;\n        return null;\n    }, false));\n    instructions.push(new Instruction(\"XORI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b100], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) ^ core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"ORI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b110], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) | core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"ANDI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b111], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) & core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    //IL Subtype\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true).parameterized(1, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5).parameterized(2, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*(-?0?[boxd]?[0-9A-F]+)\\s*\\(\\s*([A-Za-z0-9]+)\\s*\\)\\s*$/, \"@mnem @arg0, @arg2(@arg1)\"));\n    let ilSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LB\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b000], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(bytes[0], 8));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LH\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b001], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(Utils.catBytes(bytes), 16));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LW\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b010], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 4);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LBU\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b100], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], bytes[0]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LHU\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b101], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        core.pc += 4;\n        return null;\n    }));\n    // IS Subtype\n    formats.push(new Format([\n        new BitRange(\"funct7\", 25, 7),\n        new BitRange(\"shamt\", 20, 5).parameterized(2, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5).parameterized(1, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+),\\s*(-?0?[boxd]?[0-9A-F]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let isSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SLLI\", isSubtype, [\"opcode\", \"funct3\", \"funct7\"], [0b0010011, 0b001, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRLI\", isSubtype, [\"opcode\", \"funct3\", \"funct7\"], [0b0010011, 0b101, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRAI\", isSubtype, [\"opcode\", \"funct3\", \"funct7\"], [0b0010011, 0b101, 0b0100000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    //S-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 25, 7, null, true).parameterized(1, Parameter.immediate).limited(12, 5, 11),\n        new BitRange(\"rs2\", 20, 5).parameterized(0, Parameter.register),\n        new BitRange(\"rs1\", 15, 5).parameterized(2, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"imm\", 7, 5, null, true).parameterized(1, Parameter.immediate).limited(12, 0, 4),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*(-?0?[boxd]?[0-9A-F]+)\\(\\s*([A-Za-z0-9]+)\\s*\\)\\s*$/, \"@mnem @arg0, @arg2(@arg1)\"));\n    let sType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SB\", sType, [\"opcode\", \"funct3\"], [0b0100011, 0b000], function (core) {\n        let bytes = [];\n        bytes.push(core.registerFile.read(core.arguments[0]) & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            core.pc += 4;\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SH\", sType, [\"opcode\", \"funct3\"], [0b0100011, 0b001], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            core.pc += 4;\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SW\", sType, [\"opcode\", \"funct3\"], [0b0100011, 0b010], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            core.pc += 4;\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    //U-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 12, 20, null, true).parameterized(1, Parameter.immediate),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let uType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LUI\", uType, [\"opcode\"], [0b0110111], function (core) {\n        core.registerFile.write(core.arguments[0], (core.arguments[1] << 12));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"AUIPC\", uType, [\"opcode\"], [0b0010111], function (core) {\n        core.registerFile.write(core.arguments[0], (core.arguments[1] << 12) + core.pc);\n        core.pc += 4;\n        return null;\n    }));\n    //SB-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 31, 1, null, true).parameterized(2, Parameter.offset).limited(13, 12, 12),\n        new BitRange(\"imm\", 25, 6, null, true).parameterized(2, Parameter.offset).limited(13, 5, 10),\n        new BitRange(\"rs2\", 20, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rs1\", 15, 5).parameterized(0, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"imm\", 8, 4, null, true).parameterized(2, Parameter.offset).limited(13, 1, 4),\n        new BitRange(\"imm\", 7, 1, null, true).parameterized(2, Parameter.offset).limited(13, 11, 11),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*,\\s*([a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let sbType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"BEQ\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b000], function (core) {\n        if (core.registerFile.read(core.arguments[0]) === core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BNE\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b001], function (core) {\n        if (core.registerFile.read(core.arguments[0]) !== core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BLT\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b100], function (core) {\n        if (core.registerFile.read(core.arguments[0]) < core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BGE\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b101], function (core) {\n        if (core.registerFile.read(core.arguments[0]) >= core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BLTU\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b110], function (core) {\n        if ((core.registerFile.read(core.arguments[0]) >>> 0) < (core.registerFile.read(core.arguments[1]) >>> 0)) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BGEU\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b111], function (core) {\n        if ((core.registerFile.read(core.arguments[0]) >>> 0) >= (core.registerFile.read(core.arguments[1]) >>> 0)) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    //UJ-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 31, 1, null, true).parameterized(1, Parameter.offset).limited(21, 20, 20),\n        new BitRange(\"imm\", 21, 10, null, true).parameterized(1, Parameter.offset).limited(21, 1, 10),\n        new BitRange(\"imm\", 20, 1, null, true).parameterized(1, Parameter.offset).limited(21, 11, 11),\n        new BitRange(\"imm\", 12, 8, null, true).parameterized(1, Parameter.offset).limited(21, 12, 19),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let ujType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JAL\", ujType, [\"opcode\"], [0b1101111], function (core) {\n        core.registerFile.write(core.arguments[0], core.pc + 4);\n        //console.log(core.pc);\n        core.pc += Utils.signExt(core.arguments[1], 21);\n        //console.log(core.arguments[1]);\n        return null;\n    }));\n    //System Type\n    //All-Const Type\n    formats.push(new Format([\n        new BitRange(\"const\", 0, 32)\n    ], /^\\s*([a-zA-Z]+)\\s*$/, \"@mnem\"));\n    let allConstSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"ECALL\", allConstSubtype, [\"const\"], [0b00000000000000000000000001110011], (core) => {\n        let result = core.virtualOS.ecall(core);\n        core.pc += 4;\n        return result;\n    }));\n    //PseudoInstructions\n    //This is a far from ideal implementation of pseudoinstructions and is only there for demo purposes.\n    //MV\n    formats.push(new Format([\n        new BitRange(\"funct7\", 25, 7),\n        new BitRange(\"rs2\", 20, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rs1\", 15, 5),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let mvPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"MV\", mvPseudo, [\"opcode\", \"funct3\", \"rs1\", \"funct7\"], [0b0110011, 0b000, 0b00000, 0b0000000], function (core) {\n        return null; //Captured by and\n    }, false, [\"ADD\"]));\n    //LI\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true).parameterized(1, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let liPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LI\", liPseudo, [\"opcode\", \"funct3\", \"rs1\"], [0b0010011, 0b000, 0b00000], function (core) {\n        return null; //Captured by andi\n    }, false, [\"ADDI\"]));\n    instructions.push(new Instruction(\"LA\", liPseudo, [\"opcode\", \"funct3\", \"rs1\"], [0b0010011, 0b000, 0b00000], function (core) {\n        return null; //Captured by andi\n    }, false, [\"ADDI\"]));\n    //JR pseudo\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true),\n        new BitRange(\"rs1\", 15, 5).parameterized(0, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*$/, \"@mnem @arg0\"));\n    let jrPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JR\", jrPseudo, [\"opcode\", \"rd\", \"funct3\", \"imm\"], [0b1100111, 0b00000, 0b000, 0b000000000000], function (core) {\n        return null; //captured by jalr\n    }, false, [\"JALR\"]));\n    //Scall, Syscall both as PseudoInstructions\n    instructions.push(new Instruction(\"SCALL\", allConstSubtype, [\"const\"], [0b00000000000000000000000001110011], function (core) {\n        return null; //captured by ecall\n    }, false, [\"ECALL\"]));\n    instructions.push(new Instruction(\"SYSCALL\", allConstSubtype, [\"const\"], [0b00000000000000000000000001110011], function (core) {\n        return null; //captured by ecall\n    }, false, [\"ECALL\"]));\n    let abiNames = ['zero', 'ra', 'sp', 'gp', 'tp', 't0', 't1', 't2', 's0', 's1', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 's2', 's3', 's4', 's5', 's6', 's7', 's8', 's9', 's10', 's11', 't3', 't4', 't5', 't6'];\n    let keywords = [];\n    keywords[Keyword.directive] = [\"\\\\.\"];\n    keywords[Keyword.comment] = [\"#\"];\n    keywords[Keyword.label] = [\"\\\\:\"];\n    keywords[Keyword.stringMarker] = [\"\\\\\\\"\"];\n    keywords[Keyword.charMarker] = [\"\\\\'\"];\n    keywords[Keyword.register] = [\"x\"];\n    let directives = [];\n    directives[\"text\"] = Directive.text;\n    directives[\"data\"] = Directive.data;\n    directives[\"string\"] = Directive.cString;\n    directives[\"byte\"] = Directive._8bit;\n    directives[\"half\"] = Directive._16bit;\n    directives[\"word\"] = Directive._32bit;\n    return new InstructionSet(32, formats, instructions, pseudoInstructions, abiNames, keywords, directives, false, `    la a1, str\n    li a0, 4 #4 is the string print service number...\n    ecall\n    li a0, 10 #...and 10 is the program termination service number!\n    ecall\n.data\nstr:    .string \"Hello, World!\"`);\n}\nclass RISCVRegisterFile {\n    constructor(memorySize, abiNames) {\n        this.physicalFile = [];\n        this.modifiedRegisters = [];\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile.push(0);\n            this.modifiedRegisters.push(false);\n        }\n        this.memorySize = memorySize;\n        this.physicalFile[2] = memorySize; //stack pointer\n        this.abiNames = abiNames;\n    }\n    print() {\n        console.log(\"Registers\\n------\");\n        for (let i = 0; i < 32; i++) {\n            console.log(\"x\" + i.toString(), this.abiNames[i], this.physicalFile[i].toString(), (this.physicalFile[i] >>> 0).toString(16).toUpperCase());\n        }\n        console.log(\"------\");\n    }\n    read(registerNumber) {\n        if (registerNumber === 0) {\n            return 0;\n        }\n        else {\n            return this.physicalFile[registerNumber];\n        }\n    }\n    write(registerNumber, value) {\n        this.physicalFile[registerNumber] = ((value >>> 0) & 0xFFFFFFFF);\n        this.modifiedRegisters[registerNumber] = true;\n    }\n    getRegisterCount() {\n        return 32;\n    }\n    getModifiedRegisters() {\n        let modReg = this.modifiedRegisters.slice();\n        for (let i = 0; i < this.getRegisterCount(); i++) {\n            this.modifiedRegisters[i] = false;\n        }\n        return modReg;\n    }\n    reset() {\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile[i] = 0;\n            this.modifiedRegisters[i] = false;\n        }\n        this.physicalFile[2] = this.memorySize;\n    }\n}\n;\nclass RISCVCore extends Core {\n    reset() {\n        this.pc = 0;\n        this.memory = [];\n        for (let i = 0; i < this.memorySize; i++) {\n            this.memory[i] = 0;\n        }\n        this.registerFile.reset();\n    }\n    fetch() {\n        let arr = this.memcpy((this.pc >>> 0), 4);\n        if (arr === null) {\n            return `Attempting to fetch from illegal memory address @${this.pc}`;\n        }\n        this.fetched = Utils.catBytes(arr);\n        return null;\n    }\n    constructor(memorySize, virtualOS, instructionSet) {\n        super();\n        this.virtualOSServiceRegister = 10;\n        this.virtualOSArgumentVectorStart = 11;\n        this.virtualOSArgumentVectorEnd = 17;\n        this.pc = 0 >>> 0;\n        this.memorySize = memorySize;\n        this.virtualOS = virtualOS;\n        this.instructionSet = instructionSet;\n        this.registerFile = new RISCVRegisterFile(memorySize, instructionSet.abiNames);\n        this.memory = new Array(memorySize);\n        for (let i = 0; i < memorySize; i++) {\n            this.memory[i] = 0;\n        }\n    }\n}\nCore.factory.ISAs[\"RISCV\"] = {\n    generator: RISCV,\n    core: RISCVCore,\n    options: [\"M\"]\n};\n","\"use strict\";\nimport { Parameter, Keyword, Directive, Instruction, InstructionSet, Format, BitRange } from \"../oak/InstructionSet.js\";\nimport { Core } from \"../oak/Core.js\";\nimport { Utils } from \"../oak/Utils.js\";\nimport JSBI from \"jsbi\";\n\n//The MIPS Instruction Set Architecture\nfunction MIPS(options) {\n    let opts = options || [];\n    //Formats and Instructions\n    let formats = [];\n    let instructions = [];\n    let pseudoInstructions = [];\n    //R-Type\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(2, Parameter.register),\n        new BitRange(\"rd\", 11, 5).parameterized(0, Parameter.register),\n        new BitRange(\"shamt\", 6, 5, 0),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let rType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"ADD\", rType, [\"opcode\", \"funct\"], [0x0, 0x20], function (core) {\n        core.registerFile.write(\n            core.arguments[0],\n            JSBI.toNumber(\n                JSBI.bitwiseAnd(\n                    JSBI.add(\n                        JSBI.BigInt(core.registerFile.read(core.arguments[1])),\n                        JSBI.BigInt(core.registerFile.read(core.arguments[2]))\n                    ),\n                    JSBI.BigInt(\"0xFFFFFFFF\")\n                )\n            )\n        );\n        return null;\n    }));\n    instructions.push(new Instruction(\"ADDU\", rType, [\"opcode\", \"funct\"], [0x0, 0x21], function (core) {\n        core.registerFile.write(\n            core.arguments[0],\n            JSBI.toNumber(\n                JSBI.bitwiseAnd(\n                    JSBI.add(\n                        JSBI.BigInt(core.registerFile.read(core.arguments[1])),\n                        JSBI.BigInt(core.registerFile.read(core.arguments[2]))\n                    ),\n                    JSBI.BigInt(\"0xFFFFFFFF\")\n                )\n            )\n        );\n        return null;\n    }));\n    instructions.push(new Instruction(\"SUB\", rType, [\"opcode\", \"funct\"], [0x0, 0x22], function (core) {\n        core.registerFile.write(\n            core.arguments[0],\n            JSBI.toNumber(\n                JSBI.bitwiseAnd(\n                    JSBI.subtract(\n                        JSBI.BigInt(core.registerFile.read(core.arguments[1])),\n                        JSBI.BigInt(core.registerFile.read(core.arguments[2]))\n                    ),\n                    JSBI.BigInt(\"0xFFFFFFFF\")\n                )\n            )\n        );\n        return null;\n    }));\n    instructions.push(new Instruction(\"SUBU\", rType, [\"opcode\", \"funct\"], [0x0, 0x23], function (core) {\n        core.registerFile.write(\n            core.arguments[0],\n            JSBI.toNumber(\n                JSBI.bitwiseAnd(\n                    JSBI.subtract(\n                        JSBI.BigInt(core.registerFile.read(core.arguments[1])),\n                        JSBI.BigInt(core.registerFile.read(core.arguments[2]))\n                    ),\n                    JSBI.BigInt(\"0xFFFFFFFF\")\n                )\n            )\n        );\n        return null;\n    }));\n    instructions.push(new Instruction(\"AND\", rType, [\"opcode\", \"funct\"], [0x0, 0x24], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) & core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"OR\", rType, [\"opcode\", \"funct\"], [0x0, 0x25], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) | core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"NOR\", rType, [\"opcode\", \"funct\"], [0x0, 0x27], function (core) {\n        core.registerFile.write(core.arguments[0], ~(core.registerFile.read(core.arguments[1]) | core.registerFile.read(core.arguments[2])));\n        return null;\n    }));\n    instructions.push(new Instruction(\"XOR\", rType, [\"opcode\", \"funct\"], [0x0, 0x26], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) ^ core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLT\", rType, [\"opcode\", \"funct\"], [0x0, 0x2A], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.registerFile.read(core.arguments[2])) ? 1 : 0);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLLV\", rType, [\"opcode\", \"funct\"], [0x0, 0x04], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRLV\", rType, [\"opcode\", \"funct\"], [0x0, 0x06], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRAV\", rType, [\"opcode\", \"funct\"], [0x0, 0x07], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    //R-Jump Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(0, Parameter.register),\n        new BitRange(\"rt\", 16, 5, 0),\n        new BitRange(\"rd\", 11, 5, 0),\n        new BitRange(\"shamt\", 6, 5, 0),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*$/, \"@mnem @arg0\"));\n    let rjSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JR\", rjSubtype, [\"opcode\", \"funct\"], [0x0, 0x08], function (core) {\n        core.pc = core.registerFile.read(core.arguments[0]);\n        return null;\n    }));\n    //R-Shift Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5, 0),\n        new BitRange(\"rt\", 16, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rd\", 11, 5).parameterized(0, Parameter.register),\n        new BitRange(\"shamt\", 6, 5).parameterized(2, Parameter.immediate),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*([0-9]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let rsSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SLL\", rsSubtype, [\"opcode\", \"funct\"], [0x0, 0x00], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRL\", rsSubtype, [\"opcode\", \"funct\"], [0x0, 0x02], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRA\", rsSubtype, [\"opcode\", \"funct\"], [0x0, 0x02], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.arguments[2]);\n        return null;\n    }));\n    //R-Constant Subtype\n    formats.push(new Format([\n        new BitRange(\"funct\", 0, 32)\n    ], /^\\s*([a-zA-Z]+)\\s*$/, \"@mnem\"));\n    let rcSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SYSCALL\", rcSubtype, [\"funct\"], [0xC], function (core) {\n        return core.virtualOS.ecall(core);\n    }));\n    //I-Type\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(2, Parameter.immediate)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let iType = formats[formats.length - 1];\n    //I-type instructions\n    instructions.push(new Instruction(\"ADDI\", iType, [\"opcode\"], [0x8], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"ADDIU\", iType, [\"opcode\"], [0x9], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTI\", iType, [\"opcode\"], [0x0A], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.arguments[2]) ? 1 : 0);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTIU\", iType, [\"opcode\"], [0x0B], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) < (core.arguments[2] >>> 0) ? 1 : 0));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ANDI\", iType, [\"opcode\"], [0x0C], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) & core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ORI\", iType, [\"opcode\"], [0x0D], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) | core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"XORI\", iType, [\"opcode\"], [0x0E], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) ^ core.arguments[2]);\n        return null;\n    }));\n    //I-Branch Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(0, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(1, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(2, Parameter.offset).limited(18, 2, 17)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let ibSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"BEQ\", ibSubtype, [\"opcode\"], [0x04], function (core) {\n        if (core.registerFile.read(core.arguments[0]) === core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BNE\", ibSubtype, [\"opcode\"], [0x05], function (core) {\n        if (core.registerFile.read(core.arguments[0]) !== core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        return null;\n    }));\n    //I Load Upper Immediate Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5, 0),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(1, Parameter.register)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let iluiSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LUI\", iluiSubtype, [\"opcode\"], [0x0F], function (core) {\n        core.registerFile.write(core.arguments[0], (core.arguments[1] << 16));\n        return null;\n    }));\n    //I Load/Store Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(2, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(1, Parameter.immediate)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?0?[boxd]?[0-9A-F]+)\\(\\s*(\\$[A-Za-z0-9]+)\\s*\\)\\s*$/, \"@mnem @arg0, @arg1(@arg2)\"));\n    let ilsSubtype = formats[formats.length - 1];\n    //TO-DO: Verify function(core) functionality\n    instructions.push(new Instruction(\"LB\", ilsSubtype, [\"opcode\"], [0x20], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(bytes[0], 8));\n        return null;\n    }));\n    instructions.push(new Instruction(\"LH\", ilsSubtype, [\"opcode\"], [0x21], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(Utils.catBytes(bytes), 16));\n        return null;\n    }));\n    instructions.push(new Instruction(\"LW\", ilsSubtype, [\"opcode\"], [0x23], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 4);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        return null;\n    }));\n    instructions.push(new Instruction(\"LBU\", ilsSubtype, [\"opcode\"], [0x24], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], bytes[0]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"LHU\", ilsSubtype, [\"opcode\"], [0x25], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SB\", ilsSubtype, [\"opcode\"], [0x28], function (core) {\n        let bytes = [];\n        bytes.push(core.registerFile.read(core.arguments[0]) & 255);\n        let writeAddress = core.registerFile.read(core.arguments[2]) + core.arguments[1];\n        if (core.memset(writeAddress, bytes)) {\n            // console.log(\"A0 \", core.registerFile.read(core.instructionSet.abiNames.indexOf(\"$a0\")));\n            // console.log(\"T1 \", core.registerFile.read(core.instructionSet.abiNames.indexOf(\"$t1\")));\n            // console.log(\"Wrote to \", writeAddress.toString(16));\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SH\", ilsSubtype, [\"opcode\"], [0x29], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SW\", ilsSubtype, [\"opcode\"], [0x2B], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    //J-Type\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"imm\", 0, 26).parameterized(0, Parameter.special)\n    ], /^\\s*([A-Za-z]+)\\s*([A-Za-z0-9_]+)\\s*$/, \"@mnem @arg0\", function (text, type, bits, address, assembler) {\n        let result = {\n            errorMessage: null,\n            context: null,\n            value: null\n        };\n        //Label\n        let value = null;\n        let reference = assembler.linesByLabel[text];\n        if (reference !== undefined) {\n            result.context = reference[0];\n            if (reference[1] === null) {\n                return result;\n            }\n            value = reference[1];\n        }\n        if (value === null && assembler.keywordRegexes[Keyword.char]) {\n            let extraction = assembler.keywordRegexes[Keyword.char].exec(text);\n            if (extraction !== null && extraction[1] !== undefined) {\n                value = extraction[1].charCodeAt(0);\n                if (value > 255) {\n                    result.errorMessage = \"Non-ascii character \" + extraction[1] + \" unsupported.\";\n                    return result;\n                }\n            }\n        }\n        if (value === null && assembler.keywordRegexes[Keyword.numeric] !== undefined) {\n            let array = assembler.keywordRegexes[Keyword.numeric].exec(text);\n            if (array !== null) {\n                let radix = Assembler.radixes[array[2]] || 10;\n                let interpretable = array[1];\n                value = parseInt(interpretable, radix);\n            }\n        }\n        if (value === null || isNaN(value)) {\n            result.errorMessage = `args.valueUnrecognized(${text})`;\n            return result;\n        }\n        if ((value >>> 28) === (address >>> 28)) {\n            if ((value & 3) === 0) {\n                result.value = (value & 0x0ffffffc) >>> 2;\n            }\n            else {\n                result.errorMessage = `mips.wordUnlignedJump(${text})`;\n            }\n        }\n        else {\n            result.errorMessage = `args.outOfRange(${text})`;\n        }\n        return result;\n    }, function (value, address) {\n        return (value << 2) | (address & 0xf0000000);\n    }));\n    let jType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"J\", jType, [\"opcode\"], [0x2], function (core) {\n        core.pc = core.arguments[0];\n        return null;\n    }));\n    instructions.push(new Instruction(\"JAL\", jType, [\"opcode\"], [0x3], function (core) {\n        core.registerFile.write(31, core.pc);\n        core.pc = core.arguments[0];\n        return null;\n    }));\n\n\n    //\"Pseudoinstructions\"\n    //MV\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rt\", 16, 5, 0),\n        new BitRange(\"rd\", 11, 5).parameterized(0, Parameter.register),\n        new BitRange(\"shamt\", 6, 5, 0),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let mvPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"MV\", mvPseudo, [\"opcode\", \"funct\"], [0x0, 0x20], function (core) {\n        //Captured by ADD\n        return null;\n    }));\n    //LI/LA\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5, 0),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(1, Parameter.immediate)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let liPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LI\", liPseudo, [\"opcode\"], [0x8], function (core) {\n        //Captured by ADDI\n        return null;\n    }));\n    instructions.push(new Instruction(\"LA\", liPseudo, [\"opcode\"], [0x8], function (core) {\n        //Captured by ADDI\n        return null;\n    }));\n    let keywords = [];\n    keywords[Keyword.directive] = [\"\\\\.\"];\n    keywords[Keyword.comment] = [\"#\"];\n    keywords[Keyword.label] = [\"\\\\:\"];\n    keywords[Keyword.stringMarker] = [\"\\\\\\\"\"];\n    keywords[Keyword.charMarker] = [\"\\\\'\"];\n    keywords[Keyword.register] = [\"x\"];\n    let directives = [];\n    directives[\"text\"] = Directive.text;\n    directives[\"data\"] = Directive.data;\n    directives[\"asciiz\"] = Directive.cString;\n    directives[\"byte\"] = Directive._8bit;\n    directives[\"half\"] = Directive._16bit;\n    directives[\"word\"] = Directive._32bit;\n    let abiNames = [\"$zero\", \"$at\", \"$v0\", \"$v1\", \"$a0\", \"$a1\", \"$a2\", \"$a3\", \"$t0\", \"$t1\", \"$t2\", \"$t3\", \"$t4\", \"$t5\", \"$t6\", \"$t7\", \"$s0\", \"$s1\", \"$s2\", \"$s3\", \"$s4\", \"$s5\", \"$s6\", \"$s7\", \"$t8\", \"$t9\", \"$k0\", \"$k1\", \"$gp\", \"$sp\", \"$fp\", \"$ra\"];\n    return new InstructionSet(32, formats, instructions, pseudoInstructions, abiNames, keywords, directives, true, `    la $a0, str\n    li $v0, 4 #4 is the string print service number...\n    syscall\n    li $v0, 10 #...and 10 is the program termination service number!\n    syscall\n.data\nstr:    .asciiz \"Hello, World!\"`);\n}\nclass MIPSRegisterFile {\n    constructor(memorySize, abiNames) {\n        this.physicalFile = [];\n        this.modifiedRegisters = [];\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile.push(0);\n            this.modifiedRegisters.push(false);\n        }\n        this.memorySize = memorySize;\n        this.physicalFile[29] = memorySize; //stack pointer\n        this.abiNames = abiNames;\n    }\n    print() {\n        console.log(\"Registers\\n------\");\n        for (let i = 0; i < 32; i++) {\n            console.log(\"$\" + i.toString(), this.abiNames[i], this.physicalFile[i].toString(), (this.physicalFile[i] >>> 0).toString(16).toUpperCase());\n        }\n        console.log(\"------\");\n    }\n    read(registerNumber) {\n        if (registerNumber === 0) {\n            return 0;\n        }\n        else {\n            return this.physicalFile[registerNumber];\n        }\n    }\n    write(registerNumber, value) {\n        this.physicalFile[registerNumber] = value;\n        this.modifiedRegisters[registerNumber] = true;\n    }\n    getRegisterCount() {\n        return 32;\n    }\n    getModifiedRegisters() {\n        let modReg = this.modifiedRegisters.slice();\n        for (let i = 0; i < this.getRegisterCount(); i++) {\n            this.modifiedRegisters[i] = false;\n        }\n        return modReg;\n    }\n    reset() {\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile[i] = 0;\n            this.modifiedRegisters[i] = false;\n        }\n        this.physicalFile[29] = this.memorySize;\n    }\n}\n;\nclass MIPSCore extends Core {\n    reset() {\n        this.pc = 0;\n        this.memory = [];\n        for (let i = 0; i < this.memorySize; i++) {\n            this.memory[i] = 0;\n        }\n        this.registerFile.reset();\n    }\n    fetch() {\n        let arr = this.memcpy((this.pc >>> 0), 4);\n        if (arr === null) {\n            return `Attempting to fetch from illegal memory address @${this.pc}`;\n        }\n        this.pc += 4;\n        this.fetched = Utils.catBytes(arr);\n        return null;\n    }\n    constructor(memorySize, virtualOS, instructionSet) {\n        super();\n        this.virtualOSServiceRegister = 2;\n        this.virtualOSArgumentVectorStart = 4;\n        this.virtualOSArgumentVectorEnd = 7;\n        this.instructionSet = instructionSet;\n        this.pc = 0 >>> 0;\n        this.memorySize = memorySize;\n        this.virtualOS = virtualOS;\n        this.registerFile = new MIPSRegisterFile(memorySize, instructionSet.abiNames);\n        this.memory = new Array(memorySize);\n        for (let i = 0; i < memorySize; i++) {\n            this.memory[i] = 0;\n        }\n    }\n}\nCore.factory.ISAs[\"MIPS\"] = {\n    generator: MIPS,\n    core: MIPSCore,\n    options: []\n};\n","import React, { Component } from 'react';\nimport TextEditor from \"./sections/texteditor.js\";\nimport Navigation from \"./sections/navigation.js\";\nimport PanelContainer from \"./sections/panelcontainer.js\";\nimport PanelMemory from \"./sections/panelmemory.js\";\nimport PanelConsole from \"./sections/panelconsole.js\";\nimport PanelLog from \"./sections/panellog.js\";\nimport Help from './sections/help';\nimport About from './sections/about';\nimport Settings from './sections/settings';\nimport PanelSettings from './sections/panelsettings';\nimport PanelConversion from './sections/panelconversion';\nimport PanelRegisters from './sections/panelregisters';\n//import CoreContext from './coreContext';\nimport PanelMachineCode from './sections/panelmachinecode';\n\nimport './isas/RISCV';\nimport './isas/MIPS';\n\nimport OakJS from './oak/index.js';\n\nimport { connect } from 'react-redux';\nimport { Translate, withLocalize } from \"react-localize-redux\";\nimport { renderToStaticMarkup } from 'react-dom/server';\n\nimport enTranslations from \"./translations/en.json\";\n\nimport { selectTab, addTab, updateTab, setProjectSettings, setSettingsVisible, setHelpVisible, setAboutVisible } from \"./actions\"\n\nconst SimulatingStatus = {\n\tStopped:\t0,\n\tStep:\t\t1,\n\tPlay:\t\t2\n};\n\nconst REGISTER_UNASSIGNED = 0;\nconst REGISTER_ASSIGNED = 1;\nconst REGISTER_NEWASSIGNED = 2;\n\nconst CONSOLE_INPUT_NONE= 0;\nconst CONSOLE_INPUT_NUM = 1;\nconst CONSOLE_INPUT_STR = 2;\n\nconst decode_error_msg = <span><b>Error: </b>Failed to decode instruction. In practice, the most likely cause is forgetting to terminate the program using the appropriate system call (see help section).</span>;\n\nconst MessageType = {\n\tLog: 0,\n\tInput: 1,\n\tOutput: 2,\n\tSuccess: 3,\n\tWarning: 4,\n\tError: 5,\n};\n\nclass App extends Component {\n\tvirtual_os;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.props.initialize({\n\t\t\tlanguages: [\n\t\t\t  { name: \"English\", code: \"en\" }\n\t\t\t],\n\t\t\toptions: { renderToStaticMarkup }\n\t\t});\n\n\t\t// $.ajax({\n        //     type: \"POST\",\n        //     url: 'https://pastebin.com/api/api_post.php',\n        //     data: {\n        //         api_dev_key:    'fe832913bc53f77f05505bc93e3b04b1',\n        //         api_option:     'paste',\n        //         api_paste_code: \"Dude this is\\nHella cool\"\n        //     },\n        //     async:true,\n        //     dataType : 'text/plain',   //you may use jsonp for cross origin request\n        //     crossDomain:true,\n        //     headers: {\n        //         \"Access-Control-Allow-Origin\": \"*\",\n        //         \"Access-Control-Allow-Headers\": \"origin, content-type, accept\"\n        //     },\n        //     success: function(data, status, xhr) {\n        //         console.log(\"Pastebin success: \" + data);\n        //     }\n        // });\n\n        // $.ajax({\n        //     type: \"GET\",\n        //     url: 'https://pastebin.com/Tricwqr6',\n        //     data: {\n        //         api_dev_key:    'fe832913bc53f77f05505bc93e3b04b1',\n        //         api_option:     'paste',\n        //         api_paste_code: \"Dude this is\\nHella cool\"\n        //     },\n        //     async:true,\n        //     dataType : 'text/plain',   //you may use jsonp for cross origin request\n        //     crossDomain:true,\n        //     headers: {\n        //         \"Access-Control-Allow-Origin\": \"*\",\n        //         \"Access-Control-Allow-Headers\": \"origin, content-type, accept\"\n        //     },\n        //     success: function(data, status, xhr) {\n        //         console.log(\"Pastebin get success: \" + data);\n        //     }\n        // });\n\t\t\n\t\tthis.state = {\n\t\t\tpanel_x: 256,\n\t\t\tpanel_y: 256\n\t\t};\n\t\t\n\t\tthis.component_input = React.createRef();\n\n\t\twindow.addEventListener(\"keyup\", this.handleKeyPress);\n\t\t\n\t\tthis.props.addTranslationForLanguage(enTranslations, 'en');\n\n\t\tthis.virtual_os = new OakJS.VirtualOS(); // The virtual OS handles ecalls. It takes a bunch of callbacks: output Int, output String, etcetera...\n\t\tthis.virtual_os.inputInt = () => {\n\t\t\tlet tab = this.props.tabs[this.props.selectedtab];\n\t\t\tif (tab) {\n\t\t\t\ttab.console_input_type = CONSOLE_INPUT_NUM;\n\t\t\t}\n\t\t};\n\n\t\tthis.virtual_os.inputString = () => {\n\t\t\tlet tab = this.props.tabs[this.props.selectedtab];\n\t\t\tif (tab) {\n\t\t\t\ttab.console_input_type = CONSOLE_INPUT_STR;\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.virtual_os.outputInt = (number) => {\n\t\t\tthis.addConsoleMessage(MessageType.Output, \">> \" + number);\n\t\t};\n\n\t\tthis.virtual_os.outputString = (string) => {\n\t\t\tthis.addConsoleMessage(MessageType.Output, \">> \" + string);\n\t\t};\n\n\t\tthis.virtual_os.handleHalt = () => {\n\t\t\tlet current_tab = this.props.selectedtab;\n\t\t\tlet tab = this.props.tabs[current_tab];\n\n\t\t\tif (!tab)\n\t\t\t\treturn;\n\n\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\n\t\t\tthis.addConsoleMessage(MessageType.Success, \" == SIMULATION COMPLETED == \");\n\n\t\t\tthis.props.updateTab(current_tab, tab);\n\t\t};\n\t\t\n\t\tthis.addTabDefault();\n\t}\n\n\thandleKeyPress = (event) => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (tab && tab.console_input_type !== CONSOLE_INPUT_NONE) {\n\t\t\tevent.preventDefault();\n\n\t\t\tlet input = tab.console_input;\n\t\t\tlet cursor = tab.cursor_pos;\n\n\t\t\tif (event.key === \"Enter\") {\n\t\t\t\tthis.continueAfterConsole(input);\n\t\t\t\ttab.console_input = \"\";\n\t\t\t}\n\t\t\telse if (event.which === 8) {\n\t\t\t\tif (cursor > 0) {\n\t\t\t\t\tlet val = input.slice(0, cursor - 1) + input.slice(cursor);\n\t\t\t\t\t\n\t\t\t\t\ttab.cursor_pos = cursor - 1;\n\t\t\t\t\ttab.console_input = val;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (event.keyCode === 46) {\n\t\t\t\tif (cursor < input.length) {\n\t\t\t\t\tlet val = input.slice(0, cursor) + input.slice(cursor + 1);\n\t\t\t\t\t\n\t\t\t\t\ttab.cursor_pos = cursor - 1;\n\t\t\t\t\ttab.console_input = val;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (event.keyCode === 37) {\n\t\t\t\tcursor = (cursor <= 0) ? 0 : cursor - 1;\n\t\t\t\ttab.cursor_pos = cursor;\n\t\t\t}\n\t\t\telse if (event.keyCode === 39) {\n\t\t\t\tlet l = tab.console_input.length;\n\t\t\t\tcursor = (cursor >= l) ? l : cursor + 1;\n\t\t\t\ttab.cursor_pos = l;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet out = event.key;\n\t\t\t\t\n\t\t\t\tconst keycode = event.keyCode;\n\t\t\t\tconst isNum = tab.console_input_type === CONSOLE_INPUT_NUM;\n\t\t\t\t\n\t\t\t\tvar valid = \n\t\t\t\t(keycode > 47 && keycode < 58)   || // number keys\n\t\t\t\t(!isNum && (keycode === 32 || keycode === 13   || // spacebar & return key(s) (if you want to allow carriage returns)\n\t\t\t\t(keycode > 64 && keycode < 91)   || // letter keys\n\t\t\t\t(keycode > 95 && keycode < 112)  || // numpad keys\n\t\t\t\t(keycode > 185 && keycode < 193) || // ;=,-./` (in order)\n\t\t\t\t(keycode > 218 && keycode < 223)));\n\n\t\t\t\tif (valid) {\n\t\t\t\t\tout = input.slice(0, cursor) + out + input.slice(cursor);\n\t\t\t\t\ttab.console_input = out;\n\t\t\t\t\ttab.cursor_pos =  cursor + 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.updateTab(current_tab, tab);\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\taddConsoleMessage = (msg_type, data) => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tabs = this.props.tabs;\n\t\tlet tab = tabs[current_tab];\n\t\t\n\t\tlet className;\n\t\tif (msg_type === MessageType.Error)\n\t\t\tclassName = \"console_error\";\n\t\telse if (msg_type === MessageType.Warning)\n\t\t\tclassName = \"console_warning\";\n\t\telse if (msg_type === MessageType.Success)\n\t\t\tclassName = \"console_success\";\n\t\telse if (msg_type === MessageType.Output)\n\t\t\tclassName = \"console_output\";\n\t\telse if (msg_type === MessageType.Input)\n\t\t\tclassName = \"console_input\";\n\t\telse\n\t\t\tclassName = \"console_log\";\n\t\t\n\t\ttab.console.push(<div className={className}>{data}</div>);\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\tcontinueAfterConsole = (input) => {\n\t\tlet selected = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[selected];\n\n\t\tlet core = tab.core;\n\n\t\tif (tab.console_input_type === CONSOLE_INPUT_NUM) {\n\t\t\tinput = parseInt(input, 10);\n\t\t\tthis.virtual_os.continueInputInt(core, input);\n\t\t\tthis.addConsoleMessage(MessageType.Log, \"<< \" + input);\n\t\t} else if (tab.console_input_type === CONSOLE_INPUT_STR) {\n\t\t\tthis.virtual_os.continueInputString(core, input);\n\t\t\tthis.addConsoleMessage(MessageType.Log, \"<< \" + input);\n\t\t}\n\n\t\ttab.console_input_type = CONSOLE_INPUT_NONE;\n\n\t\tthis.checkUpdatedTabs();\n\t\tthis.props.updateTab(selected, tab);\n\t}\n\n\tcheckUpdatedTabs = () => {\n\t\tlet tab = this.props.tabs[this.props.selectedtab];\n\n\t\tvar mod_reg = tab.core.registerFile.getModifiedRegisters();\n\t\t\n\t\tfor(let i = 0; i < tab.register_changed.length; ++i) {\n\t\t\tif (mod_reg[i])\n\t\t\t\ttab.register_changed[i] = REGISTER_NEWASSIGNED;\n\t\t\telse if (tab.register_changed[i] ===  REGISTER_NEWASSIGNED)\n\t\t\t\ttab.register_changed[i] = REGISTER_ASSIGNED;\n\t\t}\n\t}\n\n\taddTabFull = (name, code, machine_code, mem_size, isa, get_example_code) => {\n\t\tlet selected = this.props.tabs.length;\n\t\t\n\t\tlet core = OakJS.Core.factory.getCore(isa, mem_size, this.virtual_os);\n\n\t\tlet new_tab = {\n\t\t\tname: name,\n\t\t\tcontent: get_example_code ? core.instructionSet.exampleCode : code,\n\t\t\tlog: [],\n\t\t\tconsole: [],\n\t\t\tmachine_code: machine_code,\n\t\t\tcore: core,\n\t\t\tregister_changed: [],\n\t\t\trunningStatus: SimulatingStatus.Stopped, \n\t\t\tinstruction_set: isa,\n\t\t\tconsole_input: \"\",\n\t\t\tconsole_input_type: CONSOLE_INPUT_NONE,\n\t\t\tcursor_pos: 0\n\t\t};\n\n\t\tnew_tab.register_changed = Array.from({ length: core.registerFile.physicalFile.length }, () => REGISTER_UNASSIGNED);\n\t\t\n\t\t// TODO: Send to Project Settings\n\t\tthis.props.setProjectSettings(name, mem_size, isa);\n\t\t\n\t\tthis.props.addTab(new_tab);\n\t\tthis.props.selectTab(selected);\n\t}\n\n\taddTab = (name, code, machine_code) => {\n\t\tthis.addTabFull(name, code, machine_code, 4096, this.getDefaultISA(), false);\n\t}\n\n\taddTabDefault = () => {\n\t\tthis.addTabFull(\"New Tab\", \"\", [], 4096, this.getDefaultISA(), true);\n\t}\n\n\taddTabDefaultRISCV = () => {\n\t\tthis.addTabFull(\"New Tab\", \"\", [], 4096, \"RISCV\", true);\n\t}\n\n\taddTabDefaultMIPS = () => {\n\t\tthis.addTabFull(\"New Tab\", \"\", [], 4096, \"MIPS\", true);\n\t}\n\n\tgetDefaultISA = () => {\n\t\treturn OakJS.Core.factory.getCoreList()[0];\n\t}\n\n\thandleUpload = (event) => {\n\t\tlet files = this.component_input.current.files;\n\t\tif (files.length <= 0) return;\n\n\t\tlet file = files[0];\n\t\tif (this.is_upload_bin) {\n\t\t\tlet name = file.name;\n\t\t\tlet blob = file.slice(0, file.size);\n\t\t\tlet fr = new FileReader();\n\t\t\tlet me = this;\n\t\t\tfr.addEventListener(\"load\", function ()\n\t\t\t{\n\t\t\t\tvar bytes = new Uint8Array(this.result);\n\t\t\t\tme.addTab(name, \"\", Array.from(bytes));\n\t\t\t});\n\t\t\tfr.readAsArrayBuffer(blob);\n\t\t}\n\t\telse {\n\t\t\tlet name = file.name;\n\t\t\tlet blob = file.slice(0, file.size);\n\t\t\tlet fr = new FileReader();\n\t\t\tlet me = this;\n\t\t\tfr.addEventListener(\"load\", function ()\n\t\t\t{\n\t\t\t\tlet res = this.result;\n\t\t\t\t\n\t\t\t\tme.addTab(name, res, []);\n\t\t\t});\n\t\t\tfr.readAsText(blob);\n\t\t}\n\t}\n\n\thandleLoadAsm = () => {\n\t\tthis.is_upload_bin = false;\n\t\tthis.component_input.current.click();\n\t}\n\n\thandleLoadBin = () => {\n\t\tthis.is_upload_bin = true;\n\t\tthis.component_input.current.click();\n\t}\n\n\thandleDownloadAsm = () => {\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tvar data = tab.content;\n\t\tif (data.length === 0)\n\t\t\treturn;\n\t\t\t\n\t\tvar el = document.createElement(\"a\");\n\t\tvar blob = new Blob([data],\n\t\t{\n\t\t\ttype: \"text/plain\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar name = tab.name + \".s\";\n\t\tel.setAttribute(\"href\", blobLink);\n\t\tel.setAttribute(\"download\", name);\n\t\tel.style.display = \"none\";\n\t\tdocument.body.appendChild(el);\n\t\tel.click();\n\t\tdocument.body.removeChild(el);\n\t}\n\t\n\tdownloadBin = () => {\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tvar data = tab.machine_code;\n\t\tvar byteArray = new Uint8Array(data);\n\t\tvar blob = new Blob([byteArray],\n\t\t{\n\t\t\ttype: \"application/octet-stream\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar element = document.createElement(\"a\");\n\t\tvar name = tab.name + \".bin\";\n\t\telement.setAttribute(\"href\", blobLink);\n\t\telement.setAttribute(\"download\", name);\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tdownloadBinH = () => {\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tlet finalFile = tab.machine_code.map(byte=> byte.toString(16).padStart(2, \"0\")).join(\"\\n\");\n\n\t\tvar blob = new Blob([finalFile],\n\t\t{\n\t\t\ttype: \"text/plain\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar element = document.createElement(\"a\");\n\t\tvar name = tab.name + \".hex\";\n\t\telement.setAttribute(\"href\", blobLink);\n\t\telement.setAttribute(\"download\", name);\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tdownloadRam = () =>{\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tvar data = tab.core.memory;\n\t\tvar byteArray = new Uint8Array(data);\n\t\tvar blob = new Blob([byteArray],\n\t\t{\n\t\t\ttype: \"application/octet-stream\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar element = document.createElement(\"a\");\n\t\tvar name = tab.name + \".bin\";\n\t\telement.setAttribute(\"href\", blobLink);\n\t\telement.setAttribute(\"download\", name);\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element)\n\t}\n\n\tresetUI = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tabs = this.props.tabs;\n\t\tlet tab = tabs[current_tab];\n\t\ttab.log = [];\n\t\ttab.console = [];\n\t\ttab.register_changed = Array.from({ length: tab.register_changed.length }, () => REGISTER_UNASSIGNED);\n\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\n\t\ttab.console_input = \"\";\n\t\ttab.console_input_type = CONSOLE_INPUT_NONE;\n\t\ttab.cursor_pos = 0;\n\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\treset = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tabs = this.props.tabs;\n\t\tlet tab = tabs[current_tab];\n\n\t\ttab.core.reset();\n\t\tthis.resetUI();\n\t}\n\n\tuiSimulate = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (tab.console_input_type !== CONSOLE_INPUT_NONE)\n\t\t\treturn;\n\n\t\tif (tab.runningStatus === SimulatingStatus.Stopped)\n\t\t\tthis.uiAssemble();\n\n\t\tlet core =  tab.core;\n\n\t\ttab.runningStatus = SimulatingStatus.Play;\n\n\t\twhile (true) {\n\t\t\tlet fetch = core.fetch();\n\t\t\tif (fetch !== null) {\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, fetch);\n\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\n\t\t\tlet decode = core.decode(); // Decode has the decoded instruction on success\n\t\t\t\n\t\t\tif (decode === null) {\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, decode_error_msg);\n\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttab.log.push(decode);\n\t\t\t}\n\t\t\n\t\t\tlet execute = core.execute();\n\t\t\tif (execute !== null) {\n\t\t\t\tif (execute !== 'HALT' && execute !== 'WAIT') { // If HALT, then an environment call has been executed.\n\t\t\t\t\tthis.addConsoleMessage(MessageType.Error, execute);\n\t\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.checkUpdatedTabs();\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\tuiStepByStep = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (tab.console_input_type !== CONSOLE_INPUT_NONE)\n\t\t\treturn;\n\n\t\tif (tab.runningStatus === SimulatingStatus.Stopped)\n\t\t\tthis.uiAssemble();\n\n\t\tlet core = tab.core;\n\n\t\ttab.runningStatus = SimulatingStatus.Step;\n\n\t\tlet fetch = core.fetch();\n\t\tif (fetch !== null) {\n\t\t\tthis.addConsoleMessage(MessageType.Error, fetch);\n\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\tthis.props.updateTab(current_tab, tab);\n\t\t\treturn;\n\t\t}\n\t\n\t\tlet decode = core.decode(); // Decode has the decoded instruction on success\n\t\t\n\t\tif (decode === null) {\n\t\t\tthis.addConsoleMessage(MessageType.Error, decode_error_msg);\n\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\tthis.props.updateTab(current_tab, tab);\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\ttab.log.push(decode);\n\t\t}\n\t\n\t\tlet execute = core.execute();\n\t\tif (execute !== null) {\n\t\t\tif (execute !== 'HALT' && execute !== 'WAIT') { // If HALT, then an environment call has been executed.\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, execute);\n\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t}\n\t\t}\n\n\t\tthis.checkUpdatedTabs();\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\t\n\tuiAssemble = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\t\tvar val = tab.content;\n\t\tif (val === \"\") {\n\t\t\treturn;\n\t\t}\n\n\t\tvar core = tab.core;\n\t\tthis.reset();\n\t\tlet assembler = new OakJS.Assembler(core.instructionSet, OakJS.Endianness.little);\n\t\t\n\t\tlet lines = OakJS.Line.arrayFromFile(val);\n\t\t\n\t\tlet passZero = assembler.assemble(lines, 0); // Assembler Pass 0. Returns Line array with errored lines, which are in line.invalidReason\n\t\tif (passZero.length !== 0) {\n\t\t\tfor (let i in passZero) {\n\t\t\t\tlet line = passZero[i];\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Assembly error on line {line.number}:</b> {line.invalidReason}.</span>);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tlet pass = null;\n\t\tlet passCounter = 1;\n\t\tdo { // Subsequent assembler passes. Typically one pass is needed, but when there's a lot of variance in ISA word sizes, another pass might be needed.\n\t\t\tpass = assembler.assemble(lines, passCounter);\n\t\t\tif (pass.length !== 0) {\n\t\t\t\tfor (let i in pass) {\n\t\t\t\t\tlet line = pass[i];\n\t\t\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Assembly error on line {line.number}:</b> {line.invalidReason}.</span>);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpassCounter += 1;\n\t\t} while (pass === null);\n\n\t\tlet machineCode = lines.map(line=> line.machineCode).reduce((a, b)=> a.concat(b), []); // Get machine code from lines\n\t\tcore.memset(0, machineCode); // memset\n\n\t\tthis.checkUpdatedTabs();\n\n\t\tlet error = false; //output.errorMessage===null;\n\t\tif (!error) {\n\t\t\ttab.machine_code = machineCode;\n\t\t\tthis.addConsoleMessage(MessageType.Success, <span><b>Complete:</b> Assembly succeeded.</span>);\n\t\t}\n\t\telse {\n\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Error:</b> Assembler failed.</span>);\n\t\t}\n\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\thandleSettingsChange = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (!tab)\n\t\t\treturn;\n\n\t\tlet file_name = this.props.project_settings.file_name;\n\t\tlet isa_type = this.props.project_settings.isa;\n\t\tlet memory_size = this.props.project_settings.memory_size;\n\n\t\ttab.name = file_name;\n\n\t\tlet diff_isa = isa_type !== tab.instruction_set;\n\t\tlet diff_mem = memory_size !== tab.core.memorySize;\n\n\t\tlet new_isa_found = false;\n\n\t\tif (diff_isa || diff_mem) {\n\t\t\tlet instruction_sets = OakJS.Core.factory.ISAs;\n\t\t\tif (instruction_sets[isa_type]) {\n\t\t\t\tnew_isa_found = true;\n\t\t\t\ttab.core = OakJS.Core.factory.getCore(isa_type, memory_size, this.virtual_os, []);\n\t\t\t\ttab.instruction_set = isa_type;\n\t\t\t\tthis.resetUI();\n\t\t\t}\n\n\t\t\tif (!new_isa_found) {\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Error: </b>Could not find ISA {isa_type}.</span>);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.updateTab(current_tab, tab);\n\n\t\tif (new_isa_found) {\n\t\t\tif (diff_isa)\n\t\t\t\tthis.addConsoleMessage(MessageType.Success, <span><b>Complete: </b>Successfully changed ISA to {isa_type}.</span>);\n\n\t\t\tif (diff_mem)\n\t\t\t\tthis.addConsoleMessage(MessageType.Success, <span><b>Complete: </b>Successfully changed memory size to {memory_size}.</span>);\n\t\t}\n\t}\n\n\thandleStartDragX = (event) => {\n\t\twindow.addEventListener(\"mousemove\", this.handleDragX);\n\t\twindow.addEventListener(\"mouseup\", this.handleStopDragX);\n\t}\n\n\thandleX = (event) => {\n\t\tlet x = event.pageX;\n\t\tlet w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\t\tx = w - x;\n\n\t\tif (x < 200) {\n\t\t\tx = 200;\n\t\t}\n\t\telse if (x > w - 200) {\n\t\t\tx = w - 200;\n\t\t}\n\n\t\tthis.setState({panel_x: x});\n\t}\n\n\thandleX = (event) => {\n\t\tlet x = event.pageX;\n\t\tlet w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\t\tx = w - x;\n\n\t\tif (x < 150) {\n\t\t\tx = 150;\n\t\t}\n\t\telse if (x > w - 200) {\n\t\t\tx = w - 200;\n\t\t}\n\n\t\tthis.setState({panel_x: x});\n\t}\n\n\thandleY = (event) => {\n\t\tlet y = event.pageY + 20;\n\t\tlet h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\t\ty =  h - y;\n\t\t\n\t\tif (y < 50) {\n\t\t\ty = 50;\n\t\t}\n\t\telse if (y > h - 50) {\n\t\t\ty = h - 50;\n\t\t}\n\n\t\tthis.setState({panel_y: y});\n\t}\n\n\thandleDragX = (event) => {\n\t\tthis.handleX(event);\n\t}\n\n\thandleStopDragX = (event) => {\n\t\tthis.handleX(event);\n\t\twindow.removeEventListener(\"mousemove\", this.handleDragX);\n\t\twindow.removeEventListener(\"mouseup\", this.handleStopDragX);\n\t}\n\n\thandleStartDragY = (event) => {\n\t\twindow.addEventListener(\"mousemove\", this.handleDragY);\n\t\twindow.addEventListener(\"mouseup\", this.handleStopDragY);\n\t}\n\n\thandleDragY = (event) => {\n\t\tthis.handleY(event);\n\t}\n\n\thandleStopDragY = (event) => {\n\t\tthis.handleY(event);\n\t\twindow.removeEventListener(\"mousemove\", this.handleDragY);\n\t\twindow.removeEventListener(\"mouseup\", this.handleStopDragY);\n\t}\n\n\tshowSettings = () => {\n\t\tthis.props.setSettingsVisible(true);\n\t}\n\n\tshowHelp = () => {\n\t\tthis.props.setHelpVisible(true);\n\t}\n\n\tshowAbout =  () => {\n\t\talert(1);\n\t\tthis.props.setAboutVisible(true);\n\t}\n\n\trender() {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tlet has_tabs = this.props.tabs.length > 0;\n\t\tlet show_input = false;\n\t\t\n\t\tif (tab)\n\t\t\tshow_input = tab.console_input_type !== CONSOLE_INPUT_NONE;\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<About />\n\t\t\t\t<Help />\n\t\t\t\t<Settings\n\t\t\t\t\tcanhandleinput={!show_input}\n\t\t\t\t\tfn_new={this.addTabDefault}\n\t\t\t\t\tfn_load={this.handleLoadAsm}\n\t\t\t\t\tfn_save={this.handleDownloadAsm}\n\t\t\t\t\tfn_ass={this.uiAssemble}\n\t\t\t\t\tfn_sim={this.uiSimulate}\n\t\t\t\t\tfn_step={this.uiStepByStep} />\n\t\t\t\t<Navigation\n\t\t\t\t\tassemble={this.uiAssemble}\n\t\t\t\t\tsimulate={this.uiSimulate}\n\t\t\t\t\tstepbystep={this.uiStepByStep}\n\t\t\t\t\tdownloadRam={this.downloadRam}\n\t\t\t\t\tdownloadBin={this.downloadBin}\n\t\t\t\t\tdownloadBinH={this.downloadBinH}\n\t\t\t\t\thandleAddTabRiscv={this.addTabDefaultRISCV}\n\t\t\t\t\thandleAddTabMips={this.addTabDefaultMIPS}\n\t\t\t\t\thandleLoadAsm={this.handleLoadAsm}\n\t\t\t\t\thandleLoadBin={this.handleLoadBin}\n\t\t\t\t\thandleDownloadAsm={this.handleDownloadAsm}\n\t\t\t\t/>\n\t\t\t\t{!has_tabs && <div className=\"no_tabs\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2><Translate id=\"welcome.title\">Welcome to Oak.js</Translate></h2>\n\t\t\t\t\t\t<p><Translate id=\"welcome.subtitle\">Oak.js is an online javascript IDE, Assembler, Disassembler, and Simulator for assembly languages such as RISC-V and MIPS.</Translate></p>\n\t\t\t\t\t\t<button className=\"button\" onClick={this.addTabDefault}><Translate id=\"menus.add_tab\">Add a Tab</Translate></button>\n\t\t\t\t\t\t<button className=\"button\" onClick={this.handleLoadAsm}><Translate id=\"menus.load_assembly\">Load Assembly</Translate></button>\n\t\t\t\t\t\t<button className=\"button\" onClick={this.handleLoadBin}><Translate id=\"menus.load_binary\">Load Binary</Translate></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t\t{has_tabs && <div className=\"grid\" style={{gridTemplateColumns: `auto ${this.state.panel_x}px`, gridTemplateRows: `auto calc(${this.state.panel_y}px)`}}>\n\t\t\t\t\t<TextEditor is_disabled={show_input} addTab={this.addTabDefault} />\n\t\t\t\t\t<PanelContainer handleStartDrag={this.handleStartDragY} className=\"panel_bottom\">\n\t\t\t\t\t\t<PanelConsole show_input={show_input} input={tab.console_input} />\n\t\t\t\t\t\t<PanelMachineCode />\n\t\t\t\t\t\t<PanelMemory />\n\t\t\t\t\t\t<PanelLog />\n\t\t\t\t\t</PanelContainer>\n\t\t\t\t\t<PanelContainer handleStartDrag={this.handleStartDragX} className=\"panel_side\">\n\t\t\t\t\t\t<PanelSettings submitChanges={this.handleSettingsChange} />\n\t\t\t\t\t\t<PanelRegisters />\n\t\t\t\t\t\t<PanelConversion />\n\t\t\t\t\t</PanelContainer>\n\t\t\t\t</div>}\n\t\t\t\t<input type=\"file\" onChange={this.handleUpload} ref={this.component_input} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst appStateToProps = state => {\n\treturn {\n\t\ttabs: state.tabs,\n\t\tselectedtab: state.selectedtab,\n\t\tproject_settings: state.project_settings\n\t};\n};\n\nconst appDispatchToProps = (dispatch, ownProps) => ({\n\taddTab: (tab) => dispatch(addTab(tab)),\n\tupdateTab: (index, tab) => dispatch(updateTab(index, tab)),\n\tselectTab: (id) => dispatch(selectTab(id)),\n\tsetProjectSettings: (n, s, i) => dispatch(setProjectSettings(n, s, i)),\n\tsetHelpVisible: (visible) => dispatch(setHelpVisible(visible)),\n\tsetAboutVisible: (visible) => dispatch(setAboutVisible(visible)),\n\tsetSettingsVisible: (visible) => dispatch(setSettingsVisible(visible))\n});\n\nexport default withLocalize(\n\tconnect(appStateToProps,\n\t\t\tappDispatchToProps\n\t)(App));","const tabReducer = (state = [], action) => {\n    switch (action.type) {\n        case 'ADD_TAB':\n            return [\n                ...state,\n                action.tab\n            ];\n        case 'UPDATE_TAB': {\n            return state.map((t, index) => {\n                if (index === action.index) {\n                    return Object.assign({}, t, action.tab);\n                }\n              \n              return t;\n            });\n        }\n        case 'DELETE_TAB':\n            return [\n                ...state.slice(0, action.id),\n                ...state.slice(action.id + 1)\n            ];\n        default:\n            return state;\n    }\n}\n  \nexport default tabReducer;","const selectedTabReducer = (state = 0, action) => {\n    switch (action.type) {\n        case 'SELECT_TAB':\n            return action.id;\n        default:\n            return state;\n    }\n}\n  \nexport default selectedTabReducer;","const globalSettingsReducer = (state = {}, action) => {\n    return state;\n}\n  \nexport default globalSettingsReducer;","const projectSettingsReducer = (state = {}, action) => {\n    switch (action.type) {\n        case 'UPDATE_PROJECT_SETTINGS':\n            return action.payload;\n        default:\n            return state;\n    }\n}\n  \nexport default projectSettingsReducer;","const selectedTabReducer = (state = {\n    settings: false,\n    help: false\n}, action) => {\n    switch (action.type) {\n        case 'SET_HELP_VISIBLE':\n            return {\n                ...state,\n                help: action.state\n            };\n        case 'SET_ABOUT_VISIBLE':\n            return {\n                ...state,\n                about: action.state\n            };\n        case 'SET_SETTINGS_VISIBLE':\n            return {\n                ...state,\n                settings: action.state\n            };\n        default:\n            return state;\n    }\n}\n  \nexport default selectedTabReducer;","import { combineReducers } from 'redux';\nimport tabs from './tab';\nimport selectedtab from './selectedtab';\nimport global_settings from './globalsettings';\nimport project_settings from './projectsettings';\nimport panel_visibility from './setvisibility';\nimport { localizeReducer } from \"react-localize-redux\";\n\nexport default combineReducers({\n    tabs,\n    selectedtab,\n    global_settings,\n    project_settings,\n    panel_visibility,\n    localize: localizeReducer\n});","// React Imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// App Imports\nimport App from './app';\n\n// Redux Store Imports\nimport allReducers from './reducers'\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { LocalizeProvider } from 'react-localize-redux';\n\n// Create a store...\nconst store = createStore(\n    // ... with the list of all reducers\n    allReducers,\n    {},\n    // ...connext it to the dev tools\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\n\n// Render the app with an attached memory store to the element #root\nReactDOM.render(\n    <LocalizeProvider store={store}>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </LocalizeProvider>,\n    \n    document.getElementById('root'));\n"],"sourceRoot":""}