{"version":3,"sources":["actions/index.js","sections/texteditor.js","sections/navigation.js","sections/panelcontainer.js","modules/select.js","sections/numberttransform.js","sections/panelmemory.js","sections/panelconsole.js","sections/panellog.js","backend.js","sections/help.js","developer_list.js","sections/about.js","modules/hotkey.js","sections/settings.js","modules/input.js","sections/panelsettings.js","sections/panelconversion.js","sections/panelregisters.js","sections/panelmachinecode.js","app.js","reducers/tab.js","reducers/selectedtab.js","reducers/globalsettings.js","reducers/projectsettings.js","reducers/setvisibility.js","reducers/index.js","index.js"],"names":["Actions","setSettingsVisible","state","type","setHelpVisible","setAboutVisible","selectTab","id","updateTab","index","tab","setProjectSettings","n","s","i","payload","file_name","memory_size","isa","TextEditor","addTab","props","handleTabChange","tabs","name","core","memorySize","instruction_set","handleTabClose","event","stopPropagation","selected","selectedtab","Math","min","max","length","deleteTab","setEditorValue","val","current_tab","content","this","className","map","onClick","key","mode","theme","onChange","width","height","value","readOnly","is_disabled","editorProps","$blockScrolling","Infinity","Component","connect","dispatch","ownProps","SimulatingStatus","Navigation","assemble_css","runningStatus","console_input_type","handleAddTabRiscv","handleAddTabMips","handleLoadAsm","handleLoadBin","handleDownloadAsm","downloadBin","downloadBinH","downloadRam","showSettings","showHelp","showAbout","assemble","simulate","stepbystep","withLocalize","visible","PanelContainer","renderTabs","React","Children","children","child","display_name","e","handleClickTab","preventDefault","setState","childrenProps","cloneElement","onMouseDown","handleStartDrag","Select","style","backgroundImage","icon","placeholder","padNumber","str","padded","PanelMemory","handleType","register_type","parseInt","target","translateRegister","input","toString","memory","empty","defaultValue","byte","PanelConsole","log","console","running","line","show_input","PanelLog","instruction","Utils","Kind","Help","handleClose","handleStopClose","options","renderInnerHtml","panel_visibility","help","additional","translators","About","printdev","arr","element","href","link","src","pic","job","affiliation","desc","devs","lang","about","HotkeyInput","handleClick","capturing","window","addEventListener","handleKey","toLowerCase","shift","shiftKey","ctrl","ctrlKey","alt","altKey","key_name","removeEventListener","save","testKey","key_ctrl","key_alt","key_shift","setKey","done","getKey","setKeyStr","upos","indexOf","mods","substr","combo","c","tabIndex","themes","Settings","canhandleinput","cancel","hotkey","comp_new","current","comp_load","comp_save","comp_assemble","comp_step","comp_sim","hotkeyfns","fn_new","fn_load","fn_save","fn_ass","fn_step","fn_sim","setDefaults","setTheme","setDefaultsSave","saveSettings","d","Date","setTime","getTime","exp","toUTCString","document","cookie","continuefn","includes","forEach","getElementById","disabled","handleISA","default_isa","handleTheme","acceptCookies","use_cookies","deleteAllCookies","cookies","split","eqPos","createRef","has_cookies","ca","charAt","substring","eq","display","position","colSpan","ref","settings","Input","signExt","bits","mutableValue","rangeCheck","catBytes","bytes","bigEndian","reverse","storage","pad","number","digits","radix","hex","array","hexadecimal","hexRepresentation","toUpperCase","String","prototype","interpretedBytes","hexes","isNaN","push","hasPrefix","needle","Parameter","Endianness","Keyword","Directive","Line","raw","addressThisPass","sensitive","machineCode","kind","noise","sensitivityList","possibleInstructions","assembler","text","comment","keywordRegexes","tmp","exec","label","pieces","processed","directive","captures","RegExp","directives","directiveData","undefined","data","invalidReason","instructionSet","instructions","match","format","regex","mnemonic","slice","minimum","fill","count","zeroDelimitedString","_32bit","_16bit","_8bit","elements","cString","string","generalCharacters","characters","found","character","charCodeAt","Assembler","escapedCharacters","isInstruction","lines","address","candidates","testingInstructions","possibleInstruction","args","template","j","ranges","range","parameter","limited","totalBits","store","parameterType","special","processSpecialParameter","process","errorMessage","context","register","startBit","limitStart","endBit","limitEnd","start","smallestPossibleInstruction","filter","pi","immediate","stored","offset","result","assembleText","assembleData","lineByLabel","linesByLabel","sensor","sensorLength","newAssembly","file","endianness","memoryMap","incrementOnFetch","keywords","words","numeric","radixList","charMarker","escapable","escapedCharacterList","char","stringMarker","instructionLength","abiNames","registerNo","reference","extraction","radixes","interpretable","pass","errors","assemblerModeText","initialProcess","asm","list","keyword","Object","keys","join","'","BitRange","field","constant","signed","parameterDefaultValue","Format","disassembly","decodeSpecialParameter","Instruction","constants","constValues","executor","signatoryOverride","pseudoInstructionFor","computedBits","computedMask","computedTemplate","machineCodeMutable","maskBits","mask","bit","ceil","before","end","addition","after","temp","InstructionSet","formats","pseudoInstructions","exampleCode","sort","a","b","output","replace","VirtualOS","continueInputString","reg","virtualOSArgumentVectorStart","arg","registerFile","read","memset","continueInputInt","write","service","virtualOSServiceRegister","outputInt","iterator","memcpy","outStr","fromCharCode","outputString","inputInt","inputString","handleHalt","Core","insts","decoded","arguments","fetched","bitRanges","limit","pc","disassemble","CoreFactory","ISAs","architecture","virtualOS","generator","RISCVRegisterFile","physicalFile","modifiedRegisters","registerNumber","modReg","getRegisterCount","RISCVCore","virtualOSArgumentVectorEnd","Array","reset","parameterized","rType","iType","ilSubtype","isSubtype","sType","uType","sbType","ujType","allConstSubtype","ecall","mvPseudo","liPseudo","jrPseudo","MIPSRegisterFile","MIPSCore","rjSubtype","rsSubtype","rcSubtype","ibSubtype","iluiSubtype","ilsSubtype","writeAddress","jType","PanelSettings","handleFileName","project_settings","handleMemorySize","test","handleSubmit","submitChanges","isas","OakJS","getCoreList","onSubmit","PanelConversion","calculateOutput","in_type","out_type","onChangeInput","input_type","output_type","out","has_value","onChangeInputType","onChangeOutputType","PanelRegisters","getChangedRegisterClass","registers","register_changed","register_names","cellSpacing","cellPadding","register_dpy","data-info","PanelMachineCode","machinecode","machine_code","decode_error_msg","MessageType","App","handleKeyPress","console_input","cursor","cursor_pos","continueAfterConsole","which","keyCode","l","keycode","isNum","addConsoleMessage","msg_type","virtual_os","checkUpdatedTabs","mod_reg","getModifiedRegisters","addTabFull","code","mem_size","get_example_code","getCore","new_tab","from","getDefaultISA","addTabDefault","addTabDefaultRISCV","addTabDefaultMIPS","handleUpload","files","component_input","is_upload_bin","blob","size","fr","FileReader","me","Uint8Array","readAsArrayBuffer","res","readAsText","click","el","createElement","Blob","blobLink","URL","createObjectURL","setAttribute","body","appendChild","removeChild","byteArray","finalFile","padStart","resetUI","uiSimulate","uiAssemble","fetch","decode","execute","uiStepByStep","little","arrayFromFile","passZero","passCounter","reduce","concat","handleSettingsChange","isa_type","diff_isa","diff_mem","new_isa_found","handleStartDragX","handleDragX","handleStopDragX","handleX","x","pageX","w","innerWidth","documentElement","clientWidth","panel_x","handleY","y","pageY","h","innerHeight","clientHeight","panel_y","handleStartDragY","handleDragY","handleStopDragY","alert","initialize","languages","renderToStaticMarkup","addTranslationForLanguage","enTranslations","has_tabs","Fragment","gridTemplateColumns","gridTemplateRows","tabReducer","action","t","assign","selectedTabReducer","globalSettingsReducer","projectSettingsReducer","combineReducers","global_settings","localize","localizeReducer","createStore","allReducers","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render"],"mappings":"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","file":"static/js/main.99c5d37a.chunk.js","sourcesContent":["export const Actions = {\n    SELECT_TAB: 'SELECT_TAB',\n    ADD_TAB: 'ADD_TAB',\n    UPDATE_TAB: 'UPDATE_TAB',\n    DELETE_TAB: 'DELETE_TAB',\n    UPDATE_PROJECT_SETTINGS: 'UPDATE_PROJECT_SETTINGS',\n    SET_HELP_VISIBLE: 'SET_HELP_VISIBLE',\n    SET_ABOUT_VISIBLE: 'SET_ABOUT_VISIBLE',\n    SET_SETTINGS_VISIBLE: 'SET_SETTINGS_VISIBLE'\n};\n\nexport const setSettingsVisible = (state) => ({\n    type: Actions.SET_SETTINGS_VISIBLE,\n    state\n});\n\nexport const setHelpVisible = (state) => ({\n    type: Actions.SET_HELP_VISIBLE,\n    state\n});\n\nexport const setAboutVisible = (state) => ({\n    type: Actions.SET_ABOUT_VISIBLE,\n    state\n});\n\nexport const selectTab = id => ({\n    type: Actions.SELECT_TAB,\n    id\n});\n\nexport const addTab = tab => ({\n    type: Actions.ADD_TAB,\n    tab\n});\n\nexport const updateTab = (index, tab) => ({\n    type: Actions.UPDATE_TAB,\n    index,\n    tab\n});\n\nexport const deleteTab = id => ({\n    type: Actions.DELETE_TAB,\n    id\n});\n\nexport const setProjectSettings = (n, s, i) => ({\n    type: Actions.UPDATE_PROJECT_SETTINGS,\n    payload: {\n        file_name: n,\n        memory_size: s,\n        isa: i\n    }\n})","import React, { Component } from 'react'\nimport AceEditor from 'react-ace';\n\nimport 'ace-builds/src-noconflict/mode-java';\nimport 'ace-builds/src-noconflict/theme-github';\n\nimport { selectTab, deleteTab, updateTab, setProjectSettings } from \"../actions\"\nimport { connect } from 'react-redux';\n\nclass TextEditor extends Component {\n\taddTab = () => {\n\t\tthis.props.addTab();\n\t}\n\t\n\thandleTabChange = (id) => {\n\t\tthis.props.selectTab(id);\n\t\tlet tab = this.props.tabs[id];\n\n\t\tif (tab) {\n\t\t\tthis.props.setProjectSettings(tab.name, tab.core.memorySize, tab.instruction_set);\n\t\t}\n\t}\n\n\thandleTabClose = (event, id) => {\n\t\tevent.stopPropagation();\n\n\t\tlet selected = this.props.selectedtab;\n\t\tif (selected >= id)\n\t\t\tselected -= 1;\n\n\t\tselected = Math.min(Math.max(selected, 0), this.props.tabs.length - 1);\n\n\t\tthis.props.selectTab(selected);\n\n\t\tlet tab = this.props.tabs[selected];\n\n\t\tif (tab) {\n\t\t\tthis.props.setProjectSettings(tab.name, tab.core.memorySize, tab.instruction_set);\n\t\t}\n\n\t\tthis.props.deleteTab(id);\n\t}\n\n\tsetEditorValue = (val) => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\t\ttab.content = val;\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\trender() {\n\t\tlet tabs = this.props.tabs;\n\t\t\n\t\treturn (\n\t\t\t<main id=\"text_editor\" className=\"text_editor\">\n\t\t\t\t<ul className=\"page_tabs\">\n\t\t\t\t\t{tabs.map((tab, id) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t<li onClick={() => this.handleTabChange(id)} key={id} className={(this.props.selectedtab === id) ? \"selected\" : \"\"}>\n\t\t\t\t\t\t\t<span>{tab.name}</span>\n\t\t\t\t\t\t\t<div onClick={(event) => this.handleTabClose(event, id)}></div>\n\t\t\t\t\t\t</li>);\n\t\t\t\t\t})}\n\t\t\t\t\t<li className=\"add_tab\" onClick={this.addTab}></li>\n\t\t\t\t</ul>\n\t\t\t\t{<AceEditor\n\t\t\t\t\tmode=\"java\"\n\t\t\t\t\ttheme=\"github\"\n\t\t\t\t\tonChange={this.setEditorValue}\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\theight=\"\"\n\t\t\t\t\tname=\"editor_area\"\n\t\t\t\t\tclassName=\"editor_area\"\n\t\t\t\t\tvalue={tabs[this.props.selectedtab].content}\n\t\t\t\t\treadOnly={this.props.is_disabled}\n\t\t\t\t\teditorProps={{$blockScrolling: Infinity}}\n\t\t\t\t/>}\n\t\t\t</main>\n\t\t)\n\t}\n}\n\nconst stateToProps = state => {\n\treturn {\n\t\ttabs: state.tabs,\n\t\tselectedtab: state.selectedtab\n\t};\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n\tselectTab: (id) => dispatch(selectTab(id)),\n\tupdateTab: (index, tab) => dispatch(updateTab(index, tab)),\n\tdeleteTab: (id) => dispatch(deleteTab(id)),\n\tsetProjectSettings: (n, s, i) => dispatch(setProjectSettings(n, s, i))\n})\n\nexport default connect(\n\tstateToProps,\n\tdispatchToProps\n\t)(TextEditor);","import React, { Component } from 'react';\nimport { Translate, withLocalize } from 'react-localize-redux';\nimport { connect } from 'react-redux';\nimport { setSettingsVisible, setHelpVisible, setAboutVisible } from \"../actions\"\n\nconst SimulatingStatus = {\n\tStopped:\t0,\n\tStep:\t\t1,\n\tPlay:\t\t2\n};\n\nconst CONSOLE_INPUT_NONE  = 0;\n\nclass Navigation extends Component {\n\trender() {\n\t\tlet assemble_css = \"\";\n\t\tconst tab  = this.props.tabs[this.props.selectedtab];\n\n\t\tif (tab) {\n\t\t\tif (tab.runningStatus === SimulatingStatus.Stopped) {\n\t\t\t\tassemble_css = \" assemble_ready\";\n\t\t\t}\n\n\t\t\tif (tab.console_input_type !== CONSOLE_INPUT_NONE) {\n\t\t\t\tassemble_css += \" simulate_prevent_input\";\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<nav id=\"navigation\" className=\"navigation\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li className=\"oak_logo\">\n\t\t\t\t\t\t<ul className=\"drop_down\">\n\t\t\t\t\t\t\t<li onClick={this.props.handleAddTabRiscv}><Translate id=\"menus.add_tab_riscv\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleAddTabMips}><Translate id=\"menus.add_tab_mips\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleLoadAsm}><Translate id=\"menus.load_assembly\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleLoadBin}><Translate id=\"menus.load_binary\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.handleDownloadAsm}><Translate id=\"menus.download_assembly\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.downloadBin}><Translate id=\"menus.download_binary\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.downloadBinH}><Translate id=\"menus.download_binary_h\" /></li>\n\t\t\t\t\t\t\t<li onClick={this.props.downloadRam}><Translate id=\"menus.download_memory\" /></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li onClick={this.props.showSettings}><Translate id=\"menus.settings\" /></li>\n\t\t\t\t\t<li onClick={this.props.showHelp}><Translate id=\"menus.help\" /></li>\n\t\t\t\t\t<li onClick={this.props.showAbout}><Translate id=\"menus.about\" /></li>\n\t\t\t\t</ul>\n\n\t\t\t\t<div className=\"buttons_right\">\n\t\t\t\t\t<button className={`assemble`} onClick={this.props.assemble}></button>\n\t\t\t\t\t<button className={`simulate${assemble_css}`} onClick={this.props.simulate}></button>\n\t\t\t\t\t<button className={`simulate_step${assemble_css}`} onClick={this.props.stepbystep}></button>\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n};\n\nconst stateToProps = state => {\n\treturn {\n\t\ttabs: state.tabs,\n\t\tselectedtab: state.selectedtab\n\t};\n};\n\nconst appDispatchToProps = (dispatch, ownProps) => ({\n\tshowHelp: (visible) => dispatch(setHelpVisible(visible)),\n\tshowAbout: (visible) => dispatch(setAboutVisible(visible)),\n\tshowSettings: (visible) => dispatch(setSettingsVisible(visible))\n});\n\nexport default withLocalize(\n\tconnect(\n\t\tstateToProps,\n\t\tappDispatchToProps\n\t)(\n\t\tNavigation\n\t)\n);","import React, { Component } from 'react'\n\nexport default class PanelContainer extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            selected: 0\n        };\n    }\n    \n    handleClickTab(e, key) {\n        e.preventDefault();\n        this.setState({selected: key});\n    }\n\n    renderTabs = () => {\n        return (\n            <ul className=\"panel_tabs\">\n                {React.Children.map(this.props.children, (child, i) => \n                    <li className={(this.state.selected === i) ? \"selected\": \"\"} key={child.type.display_name} onClick={(e) => this.handleClickTab(e, i)}>\n                        {child.type.display_name}\n                    </li>\n                )}\n            </ul>\n        );\n    }\n    \n    render() {\n        const { children } = this.props;\n        const childrenProps = React.Children.map(children, (child, id) => {\n            return (this.state.selected === id) && React.cloneElement(child);\n        });\n        return (\n            <div id=\"panel_container\" className={`panel_container ${this.props.className}`}>\n                <div onMouseDown={this.props.handleStartDrag} className=\"panel_drag\"></div>\n                {this.renderTabs()}\n                {childrenProps}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nexport default class Select extends Component {\n    render() {\n        return (\n            <div className=\"select_group\">\n                <select onChange={this.props.onChange} value={this.props.value} style={{backgroundImage: `url(images/icons/input_select_arrow.svg), url(${this.props.icon})`}}>\n                    {this.props.children}\n                </select>\n                <label className=\"group_label\">{this.props.placeholder}</label>\n            </div>\n        );\n    }\n}\n","export function padNumber(str, length) {\n    var padded = str;\n    for (var i = 0; i < length - str.length; i++)\n    {\n        padded = \"0\" + padded;\n    }\n    return padded;\n};\n    \nexport function parseToFloat(num) {\n    return num;\n};\n\n// From Jonas Raoni Soares Silva, JSFromHell states\n//          that code can be redistributed and modified\n//          as long as original credits are kept.\n// http://jsfromhell.com/classes/binary-parser\nexport function encodeFloat(number) {\n    return number;\n    /*var n = +number,\n        status = (n !== n) || n === -Infinity || n == +Infinity ? n : 0,\n        exp = 0,\n        len = 281, // 2 * 127 + 1 + 23 + 3,\n        bin = new Array(len),\n        signal = (n = status !== 0 ? 0 : n) < 0,\n        n = Math.abs(n),\n        intPart = Math.floor(n),\n        floatPart = n - intPart,\n        i, lastBit, rounded, j, exponent;\n\n    if (status !== 0) {\n        if (n !== n) {\n            return 0x7fc00000;\n        }\n        if (n === Infinity) {\n            return 0x7f800000;\n        }\n        if (n === -Infinity) {\n            return 0xff800000\n        }\n    }\n\n    i = len;\n    while (i) {\n        bin[--i] = 0;\n    }\n\n    i = 129;\n    while (intPart && i) {\n        bin[--i] = intPart % 2;\n        intPart = Math.floor(intPart / 2);\n    }\n\n    i = 128;\n    while (floatPart > 0 && i) {\n        (bin[++i] = ((floatPart *= 2) >= 1) - 0) && --floatPart;\n    }\n\n    i = -1;\n    while (++i < len && !bin[i]);\n\n    if (bin[(lastBit = 22 + (i = (exp = 128 - i) >= -126 && exp <= 127 ? i + 1 : 128 - (exp = -127))) + 1]) {\n        if (!(rounded = bin[lastBit])) {\n            j = lastBit + 2;\n            while (!rounded && j < len) {\n                rounded = bin[j++];\n            }\n        }\n\n        j = lastBit + 1;\n        while (rounded && --j >= 0) {\n            (bin[j] = !bin[j] - 0) && (rounded = 0);\n        }\n    }\n    i = i - 2 < 0 ? -1 : i - 3;\n    while(++i < len && !bin[i]);\n    (exp = 128 - i) >= -126 && exp <= 127 ? ++i : exp < -126 && (i = 255, exp = -127);\n    (intPart || status !== 0) && (exp = 128, i = 129, status == -Infinity ? signal = 1 : (status !== status) && (bin[i] = 1));\n\n    n = Math.abs(exp + 127);\n    exponent = 0;\n    j = 0;\n    while (j < 8) {\n        exponent += (n % 2) << j;\n        n >>= 1;\n        j++;\n    }\n\n    var mantissa = 0;\n    n = i + 23;\n    for (; i < n; i++) {\n        mantissa = (mantissa << 1) + bin[i];\n    }\n    return ((signal ? 0x80000000 : 0) + (exponent << 23) + mantissa) | 00;*/\n}","import React, { Component } from 'react'\nimport Select from '../modules/select'\nimport {padNumber} from './numberttransform'\nimport { connect } from 'react-redux';\n\nclass PanelMemory extends Component {\n    static display_name = \"memory\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            register_type: 0,\n        }\n    }\n\n    handleType = (event) => {\n        this.setState({register_type: parseInt(event.target.value, 10)});\n    };\n\n    translateRegister = (input) => {\n        switch(this.state.register_type) {\n            default:\n            case 0: // Hex\n                return padNumber((input >>> 0).toString(16), 2);\n            case 1: // uint\n                return padNumber((input >>> 0).toString(10), 3);\n            case 2: // octal\n                return padNumber((input >>> 0).toString(8), 3);\n            case 3: // bin\n                return padNumber((input >>> 0).toString(2), 8);\n        }\n    };\n\n    render() {\n        let tabs = this.props.tabs;\n        if (tabs.length === 0)\n            return <div></div>;\n            \n        let memory = tabs[this.props.selectedtab].core.memory;\n        let empty = memory.length === 0;\n        return (\n            <div id=\"panel_memory\" className=\"panel panel_memory\">\n                {empty && <span className=\"panel_empty\">Memory Empty</span>}\n                {!empty && <Select onChange={this.handleType} icon=\"images/icons/input_type.svg\" placeholder=\"Display Type\" defaultValue=\"0\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Decimal</option>\n                    <option value=\"2\">Octal</option>\n                    <option value=\"3\">Binary</option>\n                </Select>}\n                \n                {!empty && memory.map((byte, i) => {\n                    let val = this.translateRegister(byte);\n                    return (<span key={i}>{val} </span>);\n                })}\n            </div>\n        )\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelMemory);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\n\nconst SimulatingStatus = {\n\tStopped:\t0,\n\tStep:\t\t1,\n\tPlay:\t\t2\n};\n\nclass PanelConsole extends Component {\n    static display_name = \"console\";\n\n    render() {\n        let tab = this.props.tabs[this.props.selectedtab];\n        if (!tab)\n            return <div></div>;\n            \n        let log = tab.console;\n        let empty = log.length === 0;\n\n        const running = tab.runningStatus !== SimulatingStatus.Stopped;\n        \n        return (<div id=\"panel_console\" className=\"panel panel_console\">\n            {empty && <span className=\"panel_empty\">Console Empty</span>}\n            {!empty && log.map((line, i) => {\n                return (<div key={i}>{line}</div>);\n            })}\n            {this.props.show_input && <span><span className=\"blinker\">{\"<<\"}</span> {this.props.input}</span>}\n            {running && <div className=\"running_console\">Simulation still not completed...</div>}\n        </div>)\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelConsole);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\n\nclass PanelLog extends Component {\n    static display_name = \"log\";\n\n    render() {\n        let empty = this.props.core.log.length === 0;\n        return (<div id=\"panel_log\" className=\"panel panel_log\">\n            {empty && <span className=\"panel_empty\">Instruction Log Empty</span>}\n            {!empty && this.props.core.log.map((instruction, i) => {\n                return (<div key={i}>{instruction}</div>);\n            })}\n        </div>)\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n\t\tcore: state.tabs[state.selectedtab]\n\t};\n};\n\nexport default connect(stateToProps)(PanelLog);","/// <reference path=\"InstructionSet.ts\"/>\nvar Utils;\n(function (Utils) {\n    /*\n        signExt\n\n        Sign extends an n-bit value to fit Javascript limits.\n    */\n    function signExt(value, bits) {\n        let mutableValue = value;\n        if ((mutableValue & (1 << (bits - 1))) !== 0) {\n            mutableValue = ((~(0) >>> bits) << bits) | value;\n        }\n        return mutableValue;\n    }\n    Utils.signExt = signExt;\n    /*\n        rangeCheck\n\n        Checks if a value can fit within a certain number of bits.\n    */\n    function rangeCheck(value, bits) {\n        if (bits >= 32) {\n            return null; // No stable way of checking.\n        }\n        var min = -(1 << bits - 1);\n        var max = (1 << bits - 1) - 1;\n        value = signExt(value, bits);\n        if ((min <= (value >> 0)) && ((value >> 0) <= max)) {\n            return true;\n        }\n        return false;\n    }\n    Utils.rangeCheck = rangeCheck;\n    /*\n        catBytes\n        \n        Converts bytes stored in a little endian fashion to a proper js integer.\n    */\n    function catBytes(bytes, bigEndian = false) {\n        if (bytes.length > 4) {\n            return null;\n        }\n        if (bigEndian) {\n            bytes.reverse();\n        }\n        let storage = 0 >>> 0;\n        for (let i = 0; i < bytes.length; i++) {\n            storage = storage | (bytes[i] << (8 * i));\n        }\n        return storage;\n    }\n    Utils.catBytes = catBytes;\n    /*\n        pad\n        \n        Turns a number to a padded string.\n    */\n    function pad(number, digits, radix) {\n        let padded = number.toString(radix);\n        while (digits > padded.length) {\n            padded = \"0\" + padded;\n        }\n        return padded;\n    }\n    Utils.pad = pad;\n    function hex(array) {\n        let hexadecimal = \"\";\n        for (let i = 0; i < array.length; i++) {\n            let hexRepresentation = array[i].toString(16).toUpperCase();\n            if (hexRepresentation.length === 1) {\n                hexRepresentation = \"0\" + hexRepresentation;\n            }\n            hexadecimal += hexRepresentation + \" \";\n        }\n        return hexadecimal;\n    }\n    Utils.hex = hex;\n})(Utils || (Utils = {}));\n// Changes a string of hex bytes to an array of numbers.\nString.prototype.interpretedBytes = function () {\n    let hexes = this.split(' '); // Remove spaces, then seperate characters\n    let bytes = [];\n    for (let i = 0; i < hexes.length; i++) {\n        let value = parseInt(hexes[i], 16);\n        if (!isNaN(value)) {\n            bytes.push(value);\n        }\n    }\n    return bytes;\n};\n// Check if haystack has needle in the beginning.\nString.prototype.hasPrefix = function (needle) {\n    return this.substr(0, needle.length) === needle;\n};\nvar Kind;\n(function (Kind) {\n    Kind[Kind[\"instruction\"] = 0] = \"instruction\";\n    Kind[Kind[\"data\"] = 1] = \"data\";\n    Kind[Kind[\"directive\"] = 2] = \"directive\";\n    Kind[Kind[\"noise\"] = 3] = \"noise\";\n})(Kind || (Kind = {}));\n;\nclass Line {\n    constructor(raw, number) {\n        this.addressThisPass = null;\n        this.sensitive = false;\n        this.machineCode = [];\n        this.raw = raw;\n        this.number = number;\n        this.kind = Kind.noise;\n        this.sensitivityList = [];\n        this.possibleInstructions = [];\n    }\n    static arrayFromFile(file) {\n        return file.split('\\n').map((line, index) => new Line(line, index));\n    }\n    initialProcess(assembler, text = true) {\n        let comment = assembler.keywordRegexes[Keyword.comment];\n        let tmp = comment.exec(this.raw)[1];\n        let label = assembler.keywordRegexes[Keyword.label];\n        let pieces = label.exec(tmp);\n        this.label = pieces[1];\n        this.processed = pieces[2] || '';\n        if (/^s*$/.exec(this.processed) !== null) {\n            return text;\n        }\n        if (assembler.keywordRegexes[Keyword.directive] != null) {\n            let captures = RegExp(assembler.keywordRegexes[Keyword.directive]).exec(this.processed);\n            if (captures !== null) {\n                this.directive = assembler.directives[captures[1]];\n                this.directiveData = captures[2];\n            }\n        }\n        if (text) {\n            if (this.directive !== undefined) {\n                switch (this.directive) {\n                    case Directive.data:\n                        this.kind = Kind.directive;\n                        return false;\n                    case Directive.text:\n                        this.kind = Kind.directive;\n                        break;\n                    default:\n                        this.invalidReason = \"text.unsupportedDirective\";\n                }\n                return true;\n            }\n            this.kind = Kind.instruction;\n            assembler.instructionSet.instructions.forEach(instruction => {\n                let match = instruction.format.regex.exec(this.processed);\n                if (match !== null && match[1].toUpperCase() === instruction.mnemonic) {\n                    this.possibleInstructions.push([instruction, match.slice(2), [], null]);\n                }\n                return match !== null;\n            });\n            if (this.possibleInstructions.length === 0) {\n                this.invalidReason = \"text.noMatchingInstructions\";\n                return true;\n            }\n            let minimum = this.possibleInstructions[0][0].bytes;\n            (this.machineCode = []).length = minimum;\n            this.machineCode.fill(0);\n            return true;\n        }\n        else {\n            let count = null; // byte count\n            let zeroDelimitedString = 0;\n            if (this.directive !== undefined) {\n                this.kind = Kind.data;\n                switch (this.directive) {\n                    case Directive.data:\n                        this.kind = Kind.directive;\n                        break;\n                    case Directive.text:\n                        this.kind = Kind.directive;\n                        return true;\n                    case Directive._32bit:\n                        count = count || 4;\n                    // fall through\n                    case Directive._16bit:\n                        count = count || 2;\n                    // fall through\n                    case Directive._8bit:\n                        count = count || 1;\n                        let elements = this.directiveData.split(/\\s*,\\s*/);\n                        (this.machineCode = []).length = (elements.length * count);\n                        this.machineCode.fill(0);\n                        this.kind = Kind.data;\n                        break;\n                    case Directive.cString:\n                        zeroDelimitedString = 1;\n                    // fall through\n                    case Directive.string:\n                        if (assembler.keywordRegexes[Keyword.string] === null) {\n                            this.invalidReason = \"isa.noStringTokenDefined\";\n                        }\n                        let match = assembler.keywordRegexes[Keyword.string].exec(this.directiveData);\n                        if (match === null) {\n                            this.invalidReason = \"data.invalidString\";\n                        }\n                        else {\n                            let regex = RegExp(assembler.generalCharacters, \"g\");\n                            let characters = [];\n                            let found = null;\n                            while ((found = regex.exec(match[1]))) {\n                                characters.push(found);\n                            }\n                            (this.machineCode = []).length = (characters.length + zeroDelimitedString);\n                            for (let c in characters) {\n                                let character = String(characters[c]);\n                                let value = character.charCodeAt(0);\n                                if (character.length > 2) {\n                                    value = Assembler.escapedCharacters[character[1]];\n                                }\n                                this.machineCode[c] = value;\n                            }\n                            if (zeroDelimitedString === 1) {\n                                this.machineCode[this.machineCode.length - 1] = 0;\n                            }\n                        }\n                        this.kind = Kind.data;\n                        break;\n                    default:\n                        this.invalidReason = \"data.unrecognizedDirective\";\n                }\n            }\n            else {\n                let isInstruction = false;\n                assembler.instructionSet.instructions.forEach(instruction => {\n                    let match = instruction.format.regex.exec(this.processed);\n                    if (match !== null && match[1].toUpperCase() === instruction.mnemonic) {\n                        isInstruction = true;\n                    }\n                });\n                if (isInstruction) {\n                    this.invalidReason = \"data.instruction\";\n                }\n                else {\n                    this.invalidReason = \"data.unknownInput\";\n                }\n            }\n            return false;\n        }\n    }\n    assembleText(assembler, lines, address) {\n        let candidates = false;\n        testingInstructions: for (let i in this.possibleInstructions) {\n            let possibleInstruction = this.possibleInstructions[i];\n            let instruction = possibleInstruction[0];\n            let args = possibleInstruction[1];\n            let machineCode = instruction.template;\n            for (var j in instruction.format.ranges) {\n                let range = instruction.format.ranges[j];\n                if (range.parameter === undefined) {\n                    continue;\n                }\n                let limited = range.totalBits;\n                let bits = limited || range.bits;\n                let store = null;\n                if (range.parameterType == Parameter.special) {\n                    store = instruction.format.processSpecialParameter(args[range.parameter], Parameter.special, bits, address, assembler);\n                }\n                else {\n                    store = assembler.process(args[range.parameter], range.parameterType, bits, address, instruction.bytes);\n                }\n                if (store.errorMessage !== null) {\n                    possibleInstruction[3] = store.errorMessage;\n                    continue testingInstructions;\n                }\n                else if (store.context !== null && store.value === null) {\n                    store.context.sensitivityList.push(this);\n                    this.sensitive = true;\n                    break testingInstructions;\n                }\n                else {\n                    let register = store.value;\n                    let startBit = range.limitStart;\n                    let endBit = range.limitEnd;\n                    if (limited !== undefined && startBit !== undefined && endBit !== undefined) {\n                        register >>= startBit; // discard start bits bits\n                        let bits = (endBit - startBit + 1);\n                        register &= (1 << bits) - 1; // mask end - start + 1 bits\n                    }\n                    let masked = register & (1 << bits) - 1;\n                    machineCode |= masked << range.start;\n                }\n            }\n            for (let i = 0; i < instruction.bytes; i += 1) {\n                possibleInstruction[2].push(machineCode & 0xFF);\n                machineCode >>>= 8;\n            }\n            candidates = true;\n        }\n        if (candidates) {\n            // Expand machine code if applicable\n            let smallestPossibleInstruction = this.possibleInstructions.filter(pi => pi[3] === null)[0];\n            this.machineCode = smallestPossibleInstruction[2];\n        }\n        // Handle errors\n        let errorMessage = null;\n        let errorOccurred = !(candidates || this.sensitive);\n        if (errorOccurred) {\n            errorMessage = this.possibleInstructions[this.possibleInstructions.length - 1][3]; //Typically the most lenient option is last\n        }\n        return errorMessage;\n    }\n    assembleData(assembler, lines, address) {\n        let errorMessage = null;\n        let count = null;\n        switch (this.directive) {\n            case Directive._32bit:\n                count = count || 4;\n            // fall through\n            case Directive._16bit:\n                count = count || 2;\n            // fall through\n            case Directive._8bit:\n                count = count || 1;\n                let elements = this.directiveData.split(/\\s*,\\s*/);\n                for (let i = 0; i < elements.length; i += 1) {\n                    let element = elements[i];\n                    let bits = count << 3;\n                    let store = assembler.process(element, Parameter.immediate, bits, address, 0);\n                    if (store.errorMessage !== null) {\n                        errorMessage = store.errorMessage;\n                        break;\n                    }\n                    else if (store.context !== null && store.value === null) {\n                        store.context.sensitivityList.push(this);\n                        this.sensitive = true;\n                        break;\n                    }\n                    else {\n                        let stored = store.value;\n                        for (let j = 0; j < count; j += 1) {\n                            let offset = (count * i);\n                            this.machineCode[j + offset] = stored & 0xFF;\n                            stored >>>= 8;\n                        }\n                    }\n                }\n                break;\n            case Directive.cString:\n            case Directive.string:\n                // Already handled in pass 0.\n                break;\n            default:\n                this.invalidReason = \"data.unrecognizedDirective\";\n        }\n        return errorMessage;\n    }\n    assemble(assembler, lines, address) {\n        this.sensitive = false;\n        let result = [null, false];\n        switch (this.kind) {\n            case Kind.instruction:\n                result[0] = this.assembleText(assembler, lines, address);\n                break;\n            case Kind.data:\n                result[0] = this.assembleData(assembler, lines, address);\n                break;\n            default:\n                break;\n        }\n        let lineByLabel = assembler.linesByLabel[this.label];\n        if (lineByLabel !== undefined) {\n            lineByLabel[1] = address;\n        }\n        if (result[0] === null) {\n            for (let i in this.sensitivityList) {\n                let sensor = this.sensitivityList[i];\n                if (sensor.addressThisPass !== null) {\n                    let sensorLength = sensor.machineCode.length;\n                    let newAssembly = sensor.assemble(assembler, lines, sensor.addressThisPass);\n                    if (sensor.sensitive) {\n                        // Still sensitive, leave it alone uwu\n                    }\n                    else {\n                        if (newAssembly[1]) {\n                            result[1] = true;\n                            break;\n                        }\n                        if (sensor.machineCode.length !== sensorLength) {\n                            result[1] = true;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            this.invalidReason = result[0];\n        }\n        return result;\n    }\n}\nclass Assembler {\n    constructor(instructionSet, endianness, memoryMap = null) {\n        this.linesByLabel = [];\n        this.incrementOnFetch = instructionSet.incrementOnFetch;\n        this.keywordRegexes = [];\n        this.memoryMap = memoryMap;\n        if (instructionSet.keywordRegexes) {\n            this.keywordRegexes = instructionSet.keywordRegexes;\n        }\n        else if (instructionSet.keywords) {\n            let words = instructionSet.keywords;\n            this.keywordRegexes = [];\n            if (words[Keyword.directive]) {\n                let options = Assembler.options(instructionSet.keywords[Keyword.directive]);\n                if (options) {\n                    this.keywordRegexes[Keyword.directive] = RegExp(options + \"([^\\\\s]+)\\\\s*(.+)*\");\n                }\n            }\n            if (words[Keyword.comment]) {\n                let options = Assembler.options(words[Keyword.comment]);\n                if (options) {\n                    this.keywordRegexes[Keyword.comment] = RegExp(\"^(.*?)(\" + options + \".*)?$\");\n                }\n            }\n            if (words[Keyword.label]) {\n                let options = Assembler.options(words[Keyword.label]);\n                if (options) {\n                    this.keywordRegexes[Keyword.label] = RegExp(\"^(?:([A-Za-z_][A-Za-z0-9_]*)\" + options + \")?\\\\s*(.*)?$\");\n                }\n            }\n            if (words[Keyword.register]) {\n                let options = Assembler.options(words[Keyword.register]);\n                if (options) {\n                    this.keywordRegexes[Keyword.register] = RegExp(options + \"([0-9]+)\");\n                }\n            }\n            this.keywordRegexes[Keyword.numeric] = RegExp(\"(-?(?:0([\" + Assembler.radixList + \"]))?[A-F0-9]+)\");\n            if (words[Keyword.charMarker]) {\n                let options = Assembler.options(words[Keyword.charMarker]);\n                if (options) {\n                    let escapable = options.length > 1 ? \"\" : \"\\\\\" + options;\n                    //this.keywordRegexes[Keyword.char] = RegExp(options + \"\" + options);\n                    this.generalCharacters = \"(?:(?:\\\\\\\\[\\\\\\\\\" + Assembler.escapedCharacterList + escapable + \"])|(?:[\\\\x20-\\\\x5b\\\\x5d-\\\\x7e]))\";\n                    this.keywordRegexes[Keyword.char] = RegExp(options + '(' + this.generalCharacters + ')' + options);\n                }\n            }\n            else {\n                this.generalCharacters = \"(?:(?:\\\\\\\\[\\\\\\\\\" + Assembler.escapedCharacterList + \"])|(?:[\\\\x20-\\\\x5b\\\\x5d-\\\\x7e]))\";\n            }\n            if (words[Keyword.stringMarker]) {\n                let options = Assembler.options(words[Keyword.stringMarker]);\n                if (options) {\n                    this.keywordRegexes[Keyword.string] = RegExp(options + \"(\" + this.generalCharacters + \"*)\" + options);\n                }\n            }\n        }\n        else {\n            console.log(\"INSTRUCTION SET WARNING: This instruction set doesn't define any keywords.\");\n        }\n        this.directives = instructionSet.directives;\n        this.endianness = (endianness) ? endianness : instructionSet.endianness;\n        this.instructionSet = instructionSet;\n    }\n    //Returns number on success, string on failure\n    process(text, type, bits, address, instructionLength) {\n        let result = {\n            errorMessage: null,\n            value: null,\n            context: null\n        };\n        switch (type) {\n            case Parameter.register:\n                let index = this.instructionSet.abiNames.indexOf(text);\n                if (index !== -1) {\n                    result.value = index;\n                    return result;\n                }\n                let registerNo = null;\n                if (this.keywordRegexes[Keyword.register]) {\n                    let match = this.keywordRegexes[Keyword.register].exec(text);\n                    if (match !== null) {\n                        registerNo = match[1];\n                    }\n                }\n                if (registerNo === null) {\n                    result.errorMessage = `args.registerDoesNotExist(${text})`;\n                    return result;\n                }\n                registerNo = parseInt(registerNo, 10);\n                if ((registerNo & (~0 << bits)) !== 0) {\n                    result.errorMessage = `args.registerDoesNotExist(${text})`;\n                    return result;\n                }\n                result.value = registerNo;\n                return result;\n            case Parameter.offset:\n            case Parameter.immediate:\n                //Label\n                let value = null;\n                let reference = this.linesByLabel[text];\n                if (reference !== undefined) {\n                    result.context = reference[0];\n                    if (reference[1] === null) {\n                        return result;\n                    }\n                    value = reference[1];\n                }\n                if (value === null && this.keywordRegexes[Keyword.char]) {\n                    let extraction = RegExp(this.keywordRegexes[Keyword.char]).exec(text);\n                    if (extraction !== null && extraction[1] !== undefined) {\n                        value = extraction[1].charCodeAt(0);\n                        if (value > 255) {\n                            result.errorMessage = \"Non-ascii character \" + extraction[1] + \" unsupported.\";\n                            return result;\n                        }\n                    }\n                }\n                if (value === null && this.keywordRegexes[Keyword.numeric] !== undefined) {\n                    let array = RegExp(this.keywordRegexes[Keyword.numeric]).exec(text);\n                    if (array !== null) {\n                        let radix = Assembler.radixes[array[2]] || 10;\n                        let interpretable = array[1];\n                        value = parseInt(interpretable, radix);\n                    }\n                }\n                if (value !== null && type === Parameter.offset) {\n                    value -= address;\n                    if (this.incrementOnFetch) {\n                        value -= instructionLength;\n                    }\n                }\n                if (value === null || isNaN(value)) {\n                    result.errorMessage = `args.valueUnrecognized(${text})`;\n                    return result;\n                }\n                else if (Utils.rangeCheck(value, bits) === false) {\n                    result.errorMessage = `args.outOfRange(${text})`;\n                    return result;\n                }\n                result.value = value;\n                return result;\n            default:\n                result.errorMessage = \"oak.paramUnsupported\";\n                return result;\n        }\n    }\n    static options(list) {\n        if (list.length === 0) {\n            return null;\n        }\n        let options = \"\";\n        for (let i = 0; i < list.length; i++) {\n            let keyword = list[i];\n            if (keyword === \"\\\\\") {\n                console.log(\"INSTRUCTION SET WARNING: '\\\\' used as keyword. This behavior is undefined.\");\n                return null;\n            }\n            if (options === \"\") {\n                options = \"(?:\";\n            }\n            else {\n                options += \"|\";\n            }\n            options += keyword;\n        }\n        return options + \")\";\n    }\n    assemble(lines, pass) {\n        lines.map(line => line.addressThisPass = null);\n        let errors = [];\n        let assemblerModeText = true;\n        let address = 0;\n        for (var i in lines) {\n            let line = lines[i];\n            switch (pass) {\n                case 0: // Zero Pass - Minimum Possible Size\n                    assemblerModeText = line.initialProcess(this, assemblerModeText);\n                    if (line.invalidReason !== undefined) {\n                        errors.push(line);\n                    }\n                    if (line.label !== undefined) {\n                        this.linesByLabel[line.label] = [line, null];\n                    }\n                    break;\n                default:\n                    line.addressThisPass = address;\n                    let asm = line.assemble(this, lines, address); // Assumption: Instruction cannot become context-sensitive based on size\n                    if (asm[0] !== null) {\n                        errors.push(line);\n                    }\n                    if (asm[1]) {\n                        return null; // Repass\n                    }\n                    address += line.machineCode.length;\n            }\n        }\n        return errors;\n    }\n}\nAssembler.radixes = {\n    'b': 2,\n    'o': 8,\n    'd': 10,\n    'h': 16\n};\nAssembler.radixList = Object.keys(Assembler.radixes).join(\"\");\nAssembler.escapedCharacters = {\n    '0': 0,\n    't': 9,\n    'n': 10,\n    'r': 13,\n    '\\'': 47,\n    '\"': 42\n};\nAssembler.escapedCharacterList = Object.keys(Assembler.escapedCharacters).join(\"\");\n/// <reference path=\"Core.ts\"/>\n/// <reference path=\"Assembler.ts\"/>\nvar Parameter;\n(function (Parameter) {\n    Parameter[Parameter[\"immediate\"] = 0] = \"immediate\";\n    Parameter[Parameter[\"register\"] = 1] = \"register\";\n    Parameter[Parameter[\"condition\"] = 2] = \"condition\";\n    Parameter[Parameter[\"offset\"] = 3] = \"offset\";\n    Parameter[Parameter[\"special\"] = 4] = \"special\";\n    Parameter[Parameter[\"fpImmediate\"] = 5] = \"fpImmediate\";\n})(Parameter || (Parameter = {}));\n;\nvar Endianness;\n(function (Endianness) {\n    Endianness[Endianness[\"little\"] = 0] = \"little\";\n    Endianness[Endianness[\"big\"] = 1] = \"big\";\n    Endianness[Endianness[\"bi\"] = 2] = \"bi\";\n})(Endianness || (Endianness = {}));\n;\nvar Keyword;\n(function (Keyword) {\n    Keyword[Keyword[\"directive\"] = 0] = \"directive\";\n    Keyword[Keyword[\"comment\"] = 1] = \"comment\";\n    Keyword[Keyword[\"label\"] = 2] = \"label\";\n    Keyword[Keyword[\"stringMarker\"] = 3] = \"stringMarker\";\n    Keyword[Keyword[\"charMarker\"] = 4] = \"charMarker\";\n    Keyword[Keyword[\"register\"] = 5] = \"register\";\n    //Only send as keywordRegexes,\n    Keyword[Keyword[\"string\"] = 6] = \"string\";\n    Keyword[Keyword[\"char\"] = 7] = \"char\";\n    Keyword[Keyword[\"numeric\"] = 8] = \"numeric\";\n})(Keyword || (Keyword = {}));\n;\nvar Directive;\n(function (Directive) {\n    Directive[Directive[\"text\"] = 0] = \"text\";\n    Directive[Directive[\"data\"] = 1] = \"data\";\n    Directive[Directive[\"string\"] = 2] = \"string\";\n    Directive[Directive[\"cString\"] = 3] = \"cString\";\n    //Ints and chars,\n    Directive[Directive[\"_8bit\"] = 4] = \"_8bit\";\n    Directive[Directive[\"_16bit\"] = 5] = \"_16bit\";\n    Directive[Directive[\"_32bit\"] = 6] = \"_32bit\";\n    Directive[Directive[\"_64bit\"] = 7] = \"_64bit\";\n    //Fixed point decimals,\n    Directive[Directive[\"fixedPoint\"] = 8] = \"fixedPoint\";\n    Directive[Directive[\"floatingPoint\"] = 9] = \"floatingPoint\";\n    //Custom,\n    Directive[Directive[\"custom\"] = 10] = \"custom\";\n})(Directive || (Directive = {}));\n;\nclass BitRange {\n    get end() {\n        return this.start + this.bits - 1;\n    }\n    constructor(field, start, bits, constant = null, signed = false) {\n        this.field = field;\n        this.start = start;\n        this.bits = bits;\n        this.constant = constant;\n        this.signed = signed;\n    }\n    limited(totalBits, limitStart = null, limitEnd = null) {\n        this.totalBits = totalBits;\n        this.limitStart = limitStart;\n        this.limitEnd = limitEnd;\n        return this;\n    }\n    parameterized(parameter, parameterType, parameterDefaultValue = null) {\n        this.parameter = parameter;\n        this.parameterDefaultValue = parameterDefaultValue;\n        this.parameterType = parameterType;\n        return this;\n    }\n}\n;\nclass Format {\n    constructor(ranges, regex, disassembly, processSpecialParameter = null, decodeSpecialParameter = null) {\n        this.ranges = ranges;\n        this.regex = regex;\n        this.disassembly = disassembly;\n        this.processSpecialParameter = processSpecialParameter;\n        this.decodeSpecialParameter = decodeSpecialParameter;\n    }\n}\n;\nclass Instruction {\n    constructor(mnemonic, format, constants, constValues, executor, signatoryOverride = null, pseudoInstructionFor = []) {\n        this.computedBits = null;\n        /*\n         Mask\n         \n         It's basically the bits of each format, but with Xs replacing parts that aren't constant in every instruction.\n         For example, if an 8-bit ISA defines 5 bits for the register and 3 bits for the opcode, and the opcode for ADD is 101 then the ADD instruction's mask is XXXXX101.\n        */\n        this.computedMask = null;\n        this.computedTemplate = null;\n        this.mnemonic = mnemonic;\n        this.format = format;\n        this.constants = [];\n        for (let i in constants) {\n            this.constants[constants[i]] = constValues[i];\n        }\n        this.executor = executor;\n        this.signatoryOverride = signatoryOverride;\n        this.pseudoInstructionFor = pseudoInstructionFor;\n    }\n    pad(str, length) {\n        let padded = str;\n        for (let i = 0; i < length - str.length; i++) {\n            padded = \"0\" + padded;\n        }\n        return padded;\n    }\n    get bits() {\n        if (this.computedBits !== null) {\n            return this.computedBits;\n        }\n        let count = 0;\n        for (var i in this.format.ranges) {\n            count += this.format.ranges[i].bits;\n        }\n        this.computedBits = count;\n        return this.computedBits;\n    }\n    get bytes() {\n        return Math.ceil(this.bits / 8);\n    }\n    get mask() {\n        if (this.computedMask !== null) {\n            return this.computedMask;\n        }\n        var string = '';\n        for (let i = 0; i < this.bits; i += 1) {\n            string += 'X';\n        }\n        for (let i in this.format.ranges) {\n            let range = this.format.ranges[i];\n            let constant = this.constants[range.field];\n            if (constant === null) {\n                constant = range.constant;\n            }\n            if (constant != null) {\n                let before = string.substr(0, this.bits - range.end - 1);\n                let addition = Utils.pad(constant, range.bits, 2);\n                let after = range.start === 0 ? '' : string.substr(-range.start);\n                string = before + addition + after;\n            }\n        }\n        this.computedMask = string;\n        return this.computedMask;\n    }\n    ;\n    match(machineCode) {\n        let machineCodeMutable = machineCode >>> 0;\n        let maskBits = this.mask.split(\"\");\n        for (let i = this.bits - 1; i >= 0; i--) {\n            let bit = (machineCodeMutable & 1);\n            machineCodeMutable >>= 1;\n            if (maskBits[i] === \"X\") {\n                continue;\n            }\n            if (parseInt(maskBits[i], 10) !== bit) {\n                return false;\n            }\n        }\n        return true;\n    }\n    get template() {\n        if (this.computedTemplate != null) {\n            return this.computedTemplate;\n        }\n        let temp = 0 >>> 0;\n        for (let i in this.format.ranges) {\n            let range = this.format.ranges[i];\n            let constant = this.constants[range.field];\n            if (constant === null) {\n                constant = range.constant;\n            }\n            if (constant != null) {\n                temp |= (constant << range.start);\n            }\n        }\n        this.computedTemplate = temp;\n        return temp;\n    }\n    ;\n}\n;\nclass PseudoInstruction {\n}\n;\nclass InstructionSet {\n    //Return Mnemonic Index (pseudo)\n    pseudoMnemonicSearch(mnemonic) {\n        return -1;\n    } //Worst case = instructions.length\n    //Return Mnemonic Index (True)\n    mnemonicSearch(mnemonic) {\n        for (let i = 0; i < this.instructions.length; i++) {\n            if (this.instructions[i].mnemonic === mnemonic) {\n                return i;\n            }\n        }\n        return -1;\n    } //Worst case = instructions.length\n    instructionsPrefixing(line) {\n        var result = [];\n        for (let i in this.instructions) {\n            let instruction = this.instructions[i];\n            if (line.toUpperCase().hasPrefix(instruction.mnemonic)) {\n                let captures = instruction.format.regex.exec(line);\n                if (captures && captures[1].toUpperCase() === instruction.mnemonic) {\n                    result.push(instruction);\n                }\n            }\n        }\n        return result;\n    }\n    disassemble(instruction, args) {\n        let output = instruction.format.disassembly;\n        output = output.replace(\"@mnem\", instruction.mnemonic);\n        for (let i = 0; i < instruction.format.ranges.length; i++) {\n            let range = instruction.format.ranges[i];\n            let parameter = range.parameter;\n            if (parameter != null) {\n                output = output.replace(\"@arg\" + range.parameter, (range.parameterType === Parameter.register) ? this.abiNames[args[parameter]] : args[parameter].toString());\n            }\n        }\n        return output;\n    }\n    /*\n        InstructionSet initializer\n    */\n    constructor(bits, formats, instructions, pseudoInstructions, abiNames, keywords, directives, incrementOnFetch, exampleCode) {\n        this.bits = bits;\n        this.formats = formats;\n        this.instructions = instructions;\n        instructions.sort((a, b) => a.bytes - b.bytes);\n        this.pseudoInstructions = pseudoInstructions;\n        this.abiNames = abiNames;\n        this.keywords = keywords;\n        this.directives = directives;\n        this.incrementOnFetch = incrementOnFetch;\n        this.exampleCode = exampleCode;\n    }\n}\n;\n/// <reference path=\"Memory.ts\"/>\n/// <reference path=\"Core.ts\" />\nclass VirtualOS {\n    constructor() {\n        this.continueInputString = (core, val) => {\n            let reg = core.virtualOSArgumentVectorStart;\n            let arg = core.registerFile.read(reg);\n            let array = [];\n            for (let i = 0; i < val.length; ++i) {\n                array.push(val.charCodeAt(i));\n            }\n            core.memset(arg, array);\n        };\n        this.continueInputInt = (core, val) => {\n            let reg = core.virtualOSArgumentVectorStart;\n            core.registerFile.write(reg, val);\n        };\n    }\n    ecall(core) {\n        let service = core.registerFile.read(core.virtualOSServiceRegister);\n        const start = core.virtualOSArgumentVectorStart;\n        switch (service) {\n            case 1: {\n                let val = core.registerFile.read(start);\n                this.outputInt(val);\n                break;\n            }\n            case 4: {\n                let iterator = core.registerFile.read(start);\n                let array = [];\n                let char = null;\n                while ((char = core.memcpy(iterator, 1)[0]) !== 0) {\n                    array.push(char);\n                    iterator += 1;\n                }\n                let outStr = array.map(c => String.fromCharCode(c)).join('');\n                this.outputString(outStr);\n                return null;\n            }\n            case 5: {\n                this.inputInt();\n                return \"WAIT\";\n            }\n            case 8: {\n                this.inputString();\n                return \"WAIT\";\n            }\n            case 10:\n                this.handleHalt();\n                return \"HALT\";\n            default:\n                return \"UNHANDLED\";\n        }\n        return null;\n    }\n}\n/// <reference path=\"InstructionSet.ts\"/>\n/// <reference path=\"Memory.ts\"/>\n/// <reference path=\"VirtualOS.ts\"/>\nclass Core {\n    //Returns bytes on success, null on failure\n    memcpy(address, bytes) {\n        if (((address + bytes) >>> 0) > this.memorySize) {\n            return null;\n        }\n        let result = [];\n        for (let i = 0; i < bytes; i++) {\n            result.push(this.memory[address + i]);\n        }\n        return result;\n    }\n    //Returns boolean indicating success\n    //Use to store machine code in memory so it can be executed.\n    memset(address, bytes) {\n        if (address < 0) {\n            return false;\n        }\n        if (address + bytes.length > this.memorySize) {\n            return false;\n        }\n        for (let i = 0; i < bytes.length; i++) {\n            this.memory[address + i] = bytes[i];\n        }\n        return true;\n    }\n    decode() {\n        let insts = this.instructionSet.instructions;\n        this.decoded = null;\n        this.arguments = [];\n        for (let i = 0; i < insts.length; i++) {\n            if (insts[i].match(this.fetched)) {\n                this.decoded = insts[i];\n                break;\n            }\n        }\n        if (this.decoded === null) {\n            return null;\n        }\n        let bitRanges = this.decoded.format.ranges;\n        for (let i in bitRanges) {\n            let range = bitRanges[i];\n            if (range.parameter != null) {\n                let limit = range.limitStart;\n                let value = ((this.fetched >>> range.start) & ((1 << range.bits) - 1)) << limit;\n                if (range.parameterType === Parameter.special) {\n                    value = this.decoded.format.decodeSpecialParameter(value, this.pc); //Unmangle...\n                }\n                this.arguments[range.parameter] = this.arguments[range.parameter] || 0;\n                this.arguments[range.parameter] = this.arguments[range.parameter] | value;\n                if (this.decoded.format.ranges[i].signed && range.parameterType !== Parameter.register) {\n                    this.arguments[range.parameter] = Utils.signExt(this.arguments[range.parameter], range.totalBits ? range.totalBits : range.bits);\n                }\n            }\n        }\n        return this.instructionSet.disassemble(this.decoded, this.arguments);\n    }\n    //Returns null on success, error message on error.\n    execute() {\n        return this.decoded.executor(this);\n    }\n}\n/// <reference path=\"Core.ts\"/>\nclass CoreFactory {\n    static getCoreList() {\n        return Object.keys(this.ISAs);\n    }\n    static getCore(architecture, memorySize, virtualOS, options) {\n        let isa = this.ISAs[architecture];\n        if (isa === undefined) {\n            throw \"oak.unregisteredISA\";\n        }\n        for (let key in options) {\n            if (isa.options[key] === undefined) {\n                throw \"isa.unsupportedOptions\";\n            }\n        }\n        let instructionSet = isa.generator(options);\n        return new isa.core(memorySize, virtualOS, instructionSet);\n    }\n}\nCoreFactory.ISAs = {};\n/// <reference path=\"../Assembler.ts\" />\n/// <reference path=\"../CoreFactory.ts\"/>\n//The RISC-V Instruction Set Architecture, Version 2.1\nfunction RISCV(options) {\n    //Formats and Instructions\n    let formats = [];\n    let instructions = [];\n    let pseudoInstructions = [];\n    //R-Type\n    formats.push(new Format([\n        new BitRange(\"funct7\", 25, 7),\n        new BitRange(\"rs2\", 20, 5).parameterized(2, Parameter.register),\n        new BitRange(\"rs1\", 15, 5).parameterized(1, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let rType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"ADD\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b000, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SUB\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b000, 0b0100000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) - core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLL\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b001, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLT\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b010, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.registerFile.read(core.arguments[2])) ? 1 : 0);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTU\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b011, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) < (core.registerFile.read(core.arguments[2]) >>> 0)) ? 1 : 0);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"XOR\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b100, 0b0000000], function (core) {\n        //\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) ^ core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRL\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b101, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRA\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b101, 0b0100000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"OR\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b110, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) | core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"AND\", rType, [\"opcode\", \"funct3\", \"funct7\"], [0b0110011, 0b111, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) & core.registerFile.read(core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    //I-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true).parameterized(2, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5).parameterized(1, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+),\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let iType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JALR\", iType, [\"opcode\", \"funct3\"], [0b1100111, 0b000], function (core) {\n        core.registerFile.write(core.arguments[0], core.pc + 4);\n        core.pc = (core.registerFile.read(core.arguments[1]) + Utils.signExt(core.arguments[2], 12));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ADDI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b010], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.arguments[2]) ? 1 : 0);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTIU\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b011], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) < (core.arguments[2] >>> 0) ? 1 : 0));\n        core.pc += 4;\n        return null;\n    }, false));\n    instructions.push(new Instruction(\"XORI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b100], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) ^ core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"ORI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b110], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) | core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"ANDI\", iType, [\"opcode\", \"funct3\"], [0b0010011, 0b111], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) & core.arguments[2]));\n        core.pc += 4;\n        return null;\n    }));\n    //IL Subtype\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true).parameterized(1, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5).parameterized(2, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*(-?0?[boxd]?[0-9A-F]+)\\s*\\(\\s*([A-Za-z0-9]+)\\s*\\)\\s*$/, \"@mnem @arg0, @arg2(@arg1)\"));\n    let ilSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LB\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b000], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(bytes[0], 8));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LH\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b001], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(Utils.catBytes(bytes), 16));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LW\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b010], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 4);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LBU\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b100], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], bytes[0]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"LHU\", ilSubtype, [\"opcode\", \"funct3\"], [0b0000011, 0b101], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        core.pc += 4;\n        return null;\n    }));\n    // IS Subtype\n    formats.push(new Format([\n        new BitRange(\"funct7\", 25, 7),\n        new BitRange(\"shamt\", 20, 5).parameterized(2, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5).parameterized(1, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+),\\s*(-?0?[boxd]?[0-9A-F]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let isSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SLLI\", isSubtype, [\"opcode\", \"funct3\", \"funct7\"], [0b0010011, 0b001, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRLI\", isSubtype, [\"opcode\", \"funct3\", \"funct7\"], [0b0010011, 0b101, 0b0000000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRAI\", isSubtype, [\"opcode\", \"funct3\", \"funct7\"], [0b0010011, 0b101, 0b0100000], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.arguments[2]);\n        core.pc += 4;\n        return null;\n    }));\n    //S-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 25, 7, null, true).parameterized(1, Parameter.immediate).limited(12, 5, 11),\n        new BitRange(\"rs2\", 20, 5).parameterized(0, Parameter.register),\n        new BitRange(\"rs1\", 15, 5).parameterized(2, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"imm\", 7, 5, null, true).parameterized(1, Parameter.immediate).limited(12, 0, 4),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*(-?0?[boxd]?[0-9A-F]+)\\(\\s*([A-Za-z0-9]+)\\s*\\)\\s*$/, \"@mnem @arg0, @arg2(@arg1)\"));\n    let sType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SB\", sType, [\"opcode\", \"funct3\"], [0b0100011, 0b000], function (core) {\n        let bytes = [];\n        bytes.push(core.registerFile.read(core.arguments[0]) & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            core.pc += 4;\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SH\", sType, [\"opcode\", \"funct3\"], [0b0100011, 0b001], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            core.pc += 4;\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SW\", sType, [\"opcode\", \"funct3\"], [0b0100011, 0b010], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            core.pc += 4;\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    //U-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 12, 20, null, true).parameterized(1, Parameter.immediate),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.offset),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let uType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LUI\", uType, [\"opcode\"], [0b0110111], function (core) {\n        core.registerFile.write(core.arguments[0], (core.arguments[1] << 12));\n        core.pc += 4;\n        return null;\n    }));\n    instructions.push(new Instruction(\"AUIPC\", uType, [\"opcode\"], [0b0010111], function (core) {\n        core.registerFile.write(core.arguments[0], (core.arguments[1] << 12) + core.pc);\n        core.pc += 4;\n        return null;\n    }));\n    //SB-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 31, 1, null, true).parameterized(2, Parameter.offset).limited(13, 12, 12),\n        new BitRange(\"imm\", 25, 6, null, true).parameterized(2, Parameter.offset).limited(13, 5, 10),\n        new BitRange(\"rs2\", 20, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rs1\", 15, 5).parameterized(0, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"imm\", 8, 4, null, true).parameterized(2, Parameter.offset).limited(13, 1, 4),\n        new BitRange(\"imm\", 7, 1, null, true).parameterized(2, Parameter.offset).limited(13, 11, 11),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*,\\s*([a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let sbType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"BEQ\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b000], function (core) {\n        if (core.registerFile.read(core.arguments[0]) === core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BNE\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b001], function (core) {\n        if (core.registerFile.read(core.arguments[0]) !== core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BLT\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b100], function (core) {\n        if (core.registerFile.read(core.arguments[0]) < core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BGE\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b101], function (core) {\n        if (core.registerFile.read(core.arguments[0]) >= core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BLTU\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b110], function (core) {\n        if ((core.registerFile.read(core.arguments[0]) >>> 0) < (core.registerFile.read(core.arguments[1]) >>> 0)) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BGEU\", sbType, [\"opcode\", \"funct3\"], [0b1100011, 0b111], function (core) {\n        if ((core.registerFile.read(core.arguments[0]) >>> 0) >= (core.registerFile.read(core.arguments[1]) >>> 0)) {\n            core.pc += core.arguments[2];\n        }\n        else {\n            core.pc += 4;\n        }\n        return null;\n    }));\n    //UJ-Type\n    formats.push(new Format([\n        new BitRange(\"imm\", 31, 1, null, true).parameterized(1, Parameter.offset).limited(21, 20, 20),\n        new BitRange(\"imm\", 21, 10, null, true).parameterized(1, Parameter.offset).limited(21, 1, 10),\n        new BitRange(\"imm\", 20, 1, null, true).parameterized(1, Parameter.offset).limited(21, 11, 11),\n        new BitRange(\"imm\", 12, 8, null, true).parameterized(1, Parameter.offset).limited(21, 12, 19),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let ujType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JAL\", ujType, [\"opcode\"], [0b1101111], function (core) {\n        core.registerFile.write(core.arguments[0], core.pc + 4);\n        //console.log(core.pc);\n        core.pc += Utils.signExt(core.arguments[1], 21);\n        //console.log(core.arguments[1]);\n        return null;\n    }));\n    //System Type\n    //All-Const Type\n    formats.push(new Format([\n        new BitRange(\"const\", 0, 32)\n    ], /^\\s*([a-zA-Z]+)\\s*$/, \"@mnem\"));\n    let allConstSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"ECALL\", allConstSubtype, [\"const\"], [0b00000000000000000000000001110011], (core) => {\n        let result = core.virtualOS.ecall(core);\n        core.pc += 4;\n        return result;\n    }));\n    //PseudoInstructions\n    //This is a far from ideal implementation of pseudoinstructions and is only there for demo purposes.\n    //MV\n    formats.push(new Format([\n        new BitRange(\"funct7\", 25, 7),\n        new BitRange(\"rs2\", 20, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rs1\", 15, 5),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*([A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let mvPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"MV\", mvPseudo, [\"opcode\", \"funct3\", \"rs1\", \"funct7\"], [0b0110011, 0b000, 0b00000, 0b0000000], function (core) {\n        return null; //Captured by and\n    }, false, [\"ADD\"]));\n    //LI\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true).parameterized(1, Parameter.immediate),\n        new BitRange(\"rs1\", 15, 5),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5).parameterized(0, Parameter.register),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let liPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LI\", liPseudo, [\"opcode\", \"funct3\", \"rs1\"], [0b0010011, 0b000, 0b00000], function (core) {\n        return null; //Captured by andi\n    }, false, [\"ADDI\"]));\n    instructions.push(new Instruction(\"LA\", liPseudo, [\"opcode\", \"funct3\", \"rs1\"], [0b0010011, 0b000, 0b00000], function (core) {\n        return null; //Captured by andi\n    }, false, [\"ADDI\"]));\n    //JR pseudo\n    formats.push(new Format([\n        new BitRange(\"imm\", 20, 12, null, true),\n        new BitRange(\"rs1\", 15, 5).parameterized(0, Parameter.register),\n        new BitRange(\"funct3\", 12, 3),\n        new BitRange(\"rd\", 7, 5),\n        new BitRange(\"opcode\", 0, 7)\n    ], /^\\s*([a-zA-Z]+)\\s*([A-Za-z0-9]+)\\s*$/, \"@mnem @arg0\"));\n    let jrPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JR\", jrPseudo, [\"opcode\", \"rd\", \"funct3\", \"imm\"], [0b1100111, 0b00000, 0b000, 0b000000000000], function (core) {\n        return null; //captured by jalr\n    }, false, [\"ADDI\"]));\n    //Scall, Syscall both as PseudoInstructions\n    instructions.push(new Instruction(\"SCALL\", allConstSubtype, [\"const\"], [0b00000000000000000000000001110011], function (core) {\n        return null; //captured by ecall\n    }, false, [\"ECALL\"]));\n    instructions.push(new Instruction(\"SYSCALL\", allConstSubtype, [\"const\"], [0b00000000000000000000000001110011], function (core) {\n        return null; //captured by ecall\n    }, false, [\"ECALL\"]));\n    let abiNames = ['zero', 'ra', 'sp', 'gp', 'tp', 't0', 't1', 't2', 's0', 's1', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 's2', 's3', 's4', 's5', 's6', 's7', 's8', 's9', 's10', 's11', 't3', 't4', 't5', 't6'];\n    let keywords = [];\n    keywords[Keyword.directive] = [\"\\\\.\"];\n    keywords[Keyword.comment] = [\"#\"];\n    keywords[Keyword.label] = [\"\\\\:\"];\n    keywords[Keyword.stringMarker] = [\"\\\\\\\"\"];\n    keywords[Keyword.charMarker] = [\"\\\\'\"];\n    keywords[Keyword.register] = [\"x\"];\n    let directives = [];\n    directives[\"text\"] = Directive.text;\n    directives[\"data\"] = Directive.data;\n    directives[\"string\"] = Directive.cString;\n    directives[\"byte\"] = Directive._8bit;\n    directives[\"half\"] = Directive._16bit;\n    directives[\"word\"] = Directive._32bit;\n    return new InstructionSet(32, formats, instructions, pseudoInstructions, abiNames, keywords, directives, false, `    la a1, str\n    li a0, 4 #4 is the string print service number...\n    ecall\n    li a0, 10 #...and 10 is the program termination service number!\n    ecall\n.data\nstr:    .string \"Hello, World!\"`);\n}\nclass RISCVRegisterFile {\n    print() {\n        console.log(\"Registers\\n------\");\n        for (let i = 0; i < 32; i++) {\n            console.log(\"x\" + i.toString(), this.abiNames[i], this.physicalFile[i].toString(), (this.physicalFile[i] >>> 0).toString(16).toUpperCase());\n        }\n        console.log(\"------\");\n    }\n    read(registerNumber) {\n        if (registerNumber === 0) {\n            return 0;\n        }\n        else {\n            return this.physicalFile[registerNumber];\n        }\n    }\n    write(registerNumber, value) {\n        this.physicalFile[registerNumber] = value;\n        this.modifiedRegisters[registerNumber] = true;\n    }\n    getRegisterCount() {\n        return 32;\n    }\n    getModifiedRegisters() {\n        let modReg = this.modifiedRegisters.slice();\n        for (let i = 0; i < this.getRegisterCount(); i++) {\n            this.modifiedRegisters[i] = false;\n        }\n        return modReg;\n    }\n    reset() {\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile[i] = 0;\n            this.modifiedRegisters[i] = false;\n        }\n        this.physicalFile[2] = this.memorySize;\n    }\n    constructor(memorySize, abiNames) {\n        this.physicalFile = [];\n        this.modifiedRegisters = [];\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile.push(0);\n            this.modifiedRegisters.push(false);\n        }\n        this.memorySize = memorySize;\n        this.physicalFile[2] = memorySize; //stack pointer\n        this.abiNames = abiNames;\n    }\n}\n;\nclass RISCVCore extends Core {\n    reset() {\n        this.pc = 0;\n        this.memory = [];\n        for (let i = 0; i < this.memorySize; i++) {\n            this.memory[i] = 0;\n        }\n        this.registerFile.reset();\n    }\n    fetch() {\n        if (this.pc < 0) {\n            return \"fetch.negativePC\";\n        }\n        let arr = this.memcpy(this.pc, 4);\n        if (arr === null) {\n            return \"fetch.invalidMemoryAccess\";\n        }\n        this.fetched = Utils.catBytes(arr);\n        return null;\n    }\n    constructor(memorySize, virtualOS, instructionSet) {\n        super();\n        this.virtualOSServiceRegister = 10;\n        this.virtualOSArgumentVectorStart = 11;\n        this.virtualOSArgumentVectorEnd = 17;\n        this.pc = 0 >>> 0;\n        this.memorySize = memorySize;\n        this.virtualOS = virtualOS;\n        this.instructionSet = instructionSet;\n        this.registerFile = new RISCVRegisterFile(memorySize, instructionSet.abiNames);\n        this.memory = new Array(memorySize);\n        for (let i = 0; i < memorySize; i++) {\n            this.memory[i] = 0;\n        }\n    }\n}\nCoreFactory.ISAs[\"RISCV\"] = {\n    generator: RISCV,\n    core: RISCVCore,\n    options: []\n};\n/// <reference path=\"../Assembler.ts\" />\n//The MIPS Instruction Set Architecture\nfunction MIPS(options) {\n    //Formats and Instructions\n    let formats = [];\n    let instructions = [];\n    let pseudoInstructions = [];\n    //R-Type\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(2, Parameter.register),\n        new BitRange(\"rd\", 11, 5).parameterized(0, Parameter.register),\n        new BitRange(\"shamt\", 6, 5, 0),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let rType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"ADD\", rType, [\"opcode\", \"funct\"], [0x0, 0x20], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ADDU\", rType, [\"opcode\", \"funct\"], [0x0, 0x21], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SUB\", rType, [\"opcode\", \"funct\"], [0x0, 0x22], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) - core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SUBU\", rType, [\"opcode\", \"funct\"], [0x0, 0x23], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) - core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"AND\", rType, [\"opcode\", \"funct\"], [0x0, 0x24], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) & core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"OR\", rType, [\"opcode\", \"funct\"], [0x0, 0x25], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) | core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"NOR\", rType, [\"opcode\", \"funct\"], [0x0, 0x27], function (core) {\n        core.registerFile.write(core.arguments[0], ~(core.registerFile.read(core.arguments[1]) | core.registerFile.read(core.arguments[2])));\n        return null;\n    }));\n    instructions.push(new Instruction(\"XOR\", rType, [\"opcode\", \"funct\"], [0x0, 0x26], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) ^ core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLT\", rType, [\"opcode\", \"funct\"], [0x0, 0x2A], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.registerFile.read(core.arguments[2])) ? 1 : 0);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLLV\", rType, [\"opcode\", \"funct\"], [0x0, 0x04], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRLV\", rType, [\"opcode\", \"funct\"], [0x0, 0x06], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRAV\", rType, [\"opcode\", \"funct\"], [0x0, 0x07], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.registerFile.read(core.arguments[2]));\n        return null;\n    }));\n    //R-Jump Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(0, Parameter.register),\n        new BitRange(\"rt\", 16, 5, 0),\n        new BitRange(\"rd\", 11, 5, 0),\n        new BitRange(\"shamt\", 6, 5, 0),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*$/, \"@mnem @arg0\"));\n    let rjSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"JR\", rjSubtype, [\"opcode\", \"funct\"], [0x0, 0x08], function (core) {\n        core.pc = core.registerFile.read(core.arguments[0]);\n        return null;\n    }));\n    //R-Shift Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5, 0),\n        new BitRange(\"rt\", 16, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rd\", 11, 5).parameterized(0, Parameter.register),\n        new BitRange(\"shamt\", 6, 5).parameterized(2, Parameter.immediate),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*([0-9]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let rsSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SLL\", rsSubtype, [\"opcode\", \"funct\"], [0x0, 0x00], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) << core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRL\", rsSubtype, [\"opcode\", \"funct\"], [0x0, 0x02], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >>> core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SRA\", rsSubtype, [\"opcode\", \"funct\"], [0x0, 0x02], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) >> core.arguments[2]);\n        return null;\n    }));\n    //R-Constant Subtype\n    formats.push(new Format([\n        new BitRange(\"funct\", 0, 32)\n    ], /^\\s*([a-zA-Z]+)\\s*$/, \"@mnem\"));\n    let rcSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"SYSCALL\", rcSubtype, [\"funct\"], [0xC], function (core) {\n        return core.virtualOS.ecall(core);\n    }));\n    //I-Type\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(2, Parameter.immediate)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let iType = formats[formats.length - 1];\n    //I-type instructions\n    instructions.push(new Instruction(\"ADDI\", iType, [\"opcode\"], [0x8], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"ADDIU\", iType, [\"opcode\"], [0x9], function (core) {\n        core.registerFile.write(core.arguments[0], core.registerFile.read(core.arguments[1]) + core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTI\", iType, [\"opcode\"], [0x0A], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) < core.arguments[2]) ? 1 : 0);\n        return null;\n    }));\n    instructions.push(new Instruction(\"SLTIU\", iType, [\"opcode\"], [0x0B], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) < (core.arguments[2] >>> 0) ? 1 : 0));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ANDI\", iType, [\"opcode\"], [0x0C], function (core) {\n        core.registerFile.write(core.arguments[0], ((core.registerFile.read(core.arguments[1]) >>> 0) & core.arguments[2]));\n        return null;\n    }));\n    instructions.push(new Instruction(\"ORI\", iType, [\"opcode\"], [0x0D], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) | core.arguments[2]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"XORI\", iType, [\"opcode\"], [0x0E], function (core) {\n        core.registerFile.write(core.arguments[0], (core.registerFile.read(core.arguments[1]) >>> 0) ^ core.arguments[2]);\n        return null;\n    }));\n    //I-Branch Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(0, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(1, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(2, Parameter.offset).limited(18, 2, 17)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1, @arg2\"));\n    let ibSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"BEQ\", ibSubtype, [\"opcode\"], [0x04], function (core) {\n        if (core.registerFile.read(core.arguments[0]) === core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        return null;\n    }));\n    instructions.push(new Instruction(\"BNE\", ibSubtype, [\"opcode\"], [0x05], function (core) {\n        if (core.registerFile.read(core.arguments[0]) !== core.registerFile.read(core.arguments[1])) {\n            core.pc += core.arguments[2];\n        }\n        return null;\n    }));\n    //I Load Upper Immediate Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5, 0),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(1, Parameter.register)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let iluiSubtype = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LUI\", iluiSubtype, [\"opcode\"], [0x0F], function (core) {\n        core.registerFile.write(core.arguments[0], (core.arguments[1] << 16));\n        return null;\n    }));\n    //I Load/Store Subtype\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(2, Parameter.register),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(1, Parameter.immediate)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?0?[boxd]?[0-9A-F]+)\\(\\s*(\\$[A-Za-z0-9]+)\\s*\\)\\s*$/, \"@mnem @arg0, @arg1(@arg2)\"));\n    let ilsSubtype = formats[formats.length - 1];\n    //TO-DO: Verify function(core) functionality\n    instructions.push(new Instruction(\"LB\", ilsSubtype, [\"opcode\"], [0x20], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(bytes[0], 8));\n        return null;\n    }));\n    instructions.push(new Instruction(\"LH\", ilsSubtype, [\"opcode\"], [0x21], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.signExt(Utils.catBytes(bytes), 16));\n        return null;\n    }));\n    instructions.push(new Instruction(\"LW\", ilsSubtype, [\"opcode\"], [0x23], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 4);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        return null;\n    }));\n    instructions.push(new Instruction(\"LBU\", ilsSubtype, [\"opcode\"], [0x24], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 1);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], bytes[0]);\n        return null;\n    }));\n    instructions.push(new Instruction(\"LHU\", ilsSubtype, [\"opcode\"], [0x25], function (core) {\n        let bytes = core.memcpy(core.registerFile.read(core.arguments[2]) + core.arguments[1], 2);\n        if (bytes === null) {\n            return \"Illegal memory access.\";\n        }\n        core.registerFile.write(core.arguments[0], Utils.catBytes(bytes));\n        return null;\n    }));\n    instructions.push(new Instruction(\"SB\", ilsSubtype, [\"opcode\"], [0x28], function (core) {\n        let bytes = [];\n        bytes.push(core.registerFile.read(core.arguments[0]) & 255);\n        let writeAddress = core.registerFile.read(core.arguments[2]) + core.arguments[1];\n        if (core.memset(writeAddress, bytes)) {\n            // console.log(\"A0 \", core.registerFile.read(core.instructionSet.abiNames.indexOf(\"$a0\")));\n            // console.log(\"T1 \", core.registerFile.read(core.instructionSet.abiNames.indexOf(\"$t1\")));\n            // console.log(\"Wrote to \", writeAddress.toString(16));\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SH\", ilsSubtype, [\"opcode\"], [0x29], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    instructions.push(new Instruction(\"SW\", ilsSubtype, [\"opcode\"], [0x2B], function (core) {\n        let bytes = [];\n        let value = core.registerFile.read(core.arguments[0]);\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        value = value >>> 8;\n        bytes.push(value & 255);\n        if (core.memset(core.registerFile.read(core.arguments[2]) + core.arguments[1], bytes)) {\n            return null;\n        }\n        return \"Illegal memory access.\";\n    }));\n    //J-Type\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"imm\", 0, 26).parameterized(0, Parameter.special)\n    ], /^\\s*([A-Za-z]+)\\s*([A-Za-z0-9_]+)\\s*$/, \"@mnem @arg0\", function (text, type, bits, address, assembler) {\n        let result = {\n            errorMessage: null,\n            context: null,\n            value: null\n        };\n        //Label\n        let value = null;\n        let reference = assembler.linesByLabel[text];\n        if (reference !== undefined) {\n            result.context = reference[0];\n            if (reference[1] === null) {\n                return result;\n            }\n            value = reference[1];\n        }\n        if (value === null && assembler.keywordRegexes[Keyword.char]) {\n            let extraction = assembler.keywordRegexes[Keyword.char].exec(text);\n            if (extraction !== null && extraction[1] !== undefined) {\n                value = extraction[1].charCodeAt(0);\n                if (value > 255) {\n                    result.errorMessage = \"Non-ascii character \" + extraction[1] + \" unsupported.\";\n                    return result;\n                }\n            }\n        }\n        if (value === null && assembler.keywordRegexes[Keyword.numeric] !== undefined) {\n            let array = assembler.keywordRegexes[Keyword.numeric].exec(text);\n            if (array !== null) {\n                let radix = Assembler.radixes[array[2]] || 10;\n                let interpretable = array[1];\n                value = parseInt(interpretable, radix);\n            }\n        }\n        if (value === null || isNaN(value)) {\n            result.errorMessage = `args.valueUnrecognized(${text})`;\n            return result;\n        }\n        if ((value >>> 28) === (address >>> 28)) {\n            if ((value & 3) === 0) {\n                result.value = (value & 0x0ffffffc) >>> 2;\n            }\n            else {\n                result.errorMessage = `mips.wordUnlignedJump(${text})`;\n            }\n        }\n        else {\n            result.errorMessage = `args.outOfRange(${text})`;\n        }\n        return result;\n    }, function (value, address) {\n        return (value << 2) | (address & 0xf0000000);\n    }));\n    let jType = formats[formats.length - 1];\n    instructions.push(new Instruction(\"J\", jType, [\"opcode\"], [0x2], function (core) {\n        core.pc = core.arguments[0];\n        return null;\n    }));\n    instructions.push(new Instruction(\"JAL\", jType, [\"opcode\"], [0x3], function (core) {\n        core.registerFile.write(31, core.pc);\n        core.pc = core.arguments[0];\n        return null;\n    }));\n    //Pseudoinstructions\n    //MV\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5).parameterized(1, Parameter.register),\n        new BitRange(\"rt\", 16, 5, 0),\n        new BitRange(\"rd\", 11, 5).parameterized(0, Parameter.register),\n        new BitRange(\"shamt\", 6, 5, 0),\n        new BitRange(\"funct\", 0, 6)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(\\$[A-Za-z0-9]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let mvPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"MV\", mvPseudo, [\"opcode\", \"funct\"], [0x0, 0x20], function (core) {\n        //Captured by ADD\n        return null;\n    }));\n    //LI/LA\n    formats.push(new Format([\n        new BitRange(\"opcode\", 26, 6),\n        new BitRange(\"rs\", 21, 5, 0),\n        new BitRange(\"rt\", 16, 5).parameterized(0, Parameter.register),\n        new BitRange(\"imm\", 0, 16, null, true).parameterized(1, Parameter.immediate)\n    ], /^\\s*([a-zA-Z]+)\\s*(\\$[A-Za-z0-9]+)\\s*,\\s*(-?[a-zA-Z0-9_]+)\\s*$/, \"@mnem @arg0, @arg1\"));\n    let liPseudo = formats[formats.length - 1];\n    instructions.push(new Instruction(\"LI\", liPseudo, [\"opcode\"], [0x8], function (core) {\n        //Captured by ADDI\n        return null;\n    }));\n    instructions.push(new Instruction(\"LA\", liPseudo, [\"opcode\"], [0x8], function (core) {\n        //Captured by ADDI\n        return null;\n    }));\n    let keywords = [];\n    keywords[Keyword.directive] = [\"\\\\.\"];\n    keywords[Keyword.comment] = [\"#\"];\n    keywords[Keyword.label] = [\"\\\\:\"];\n    keywords[Keyword.stringMarker] = [\"\\\\\\\"\"];\n    keywords[Keyword.charMarker] = [\"\\\\'\"];\n    keywords[Keyword.register] = [\"x\"];\n    let directives = [];\n    directives[\"text\"] = Directive.text;\n    directives[\"data\"] = Directive.data;\n    directives[\"asciiz\"] = Directive.cString;\n    directives[\"byte\"] = Directive._8bit;\n    directives[\"half\"] = Directive._16bit;\n    directives[\"word\"] = Directive._32bit;\n    let abiNames = [\"$zero\", \"$at\", \"$v0\", \"$v1\", \"$a0\", \"$a1\", \"$a2\", \"$a3\", \"$t0\", \"$t1\", \"$t2\", \"$t3\", \"$t4\", \"$t5\", \"$t6\", \"$t7\", \"$s0\", \"$s1\", \"$s2\", \"$s3\", \"$s4\", \"$s5\", \"$s6\", \"$s7\", \"$t8\", \"$t9\", \"$k0\", \"$k1\", \"$gp\", \"$sp\", \"$fp\", \"$ra\"];\n    return new InstructionSet(32, formats, instructions, pseudoInstructions, abiNames, keywords, directives, true, `    la $a0, str\n    li $v0, 4 #4 is the string print service number...\n    syscall\n    li $v0, 10 #...and 10 is the program termination service number!\n    syscall\n.data\nstr:    .asciiz \"Hello, World!\"`);\n}\nclass MIPSRegisterFile {\n    print() {\n        console.log(\"Registers\\n------\");\n        for (let i = 0; i < 32; i++) {\n            console.log(\"$\" + i.toString(), this.abiNames[i], this.physicalFile[i].toString(), (this.physicalFile[i] >>> 0).toString(16).toUpperCase());\n        }\n        console.log(\"------\");\n    }\n    read(registerNumber) {\n        if (registerNumber === 0) {\n            return 0;\n        }\n        else {\n            return this.physicalFile[registerNumber];\n        }\n    }\n    write(registerNumber, value) {\n        this.physicalFile[registerNumber] = value;\n        this.modifiedRegisters[registerNumber] = true;\n    }\n    getRegisterCount() {\n        return 32;\n    }\n    getModifiedRegisters() {\n        let modReg = this.modifiedRegisters.slice();\n        for (let i = 0; i < this.getRegisterCount(); i++) {\n            this.modifiedRegisters[i] = false;\n        }\n        return modReg;\n    }\n    reset() {\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile[i] = 0;\n            this.modifiedRegisters[i] = false;\n        }\n        this.physicalFile[29] = this.memorySize;\n    }\n    constructor(memorySize, abiNames) {\n        this.physicalFile = [];\n        this.modifiedRegisters = [];\n        for (let i = 0; i < 32; i++) {\n            this.physicalFile.push(0);\n            this.modifiedRegisters.push(false);\n        }\n        this.memorySize = memorySize;\n        this.physicalFile[29] = memorySize; //stack pointer\n        this.abiNames = abiNames;\n    }\n}\n;\nclass MIPSCore extends Core {\n    reset() {\n        this.pc = 0;\n        this.memory = [];\n        for (let i = 0; i < this.memorySize; i++) {\n            this.memory[i] = 0;\n        }\n        this.registerFile.reset();\n    }\n    fetch() {\n        let arr = this.memcpy(this.pc, 4);\n        if (arr === null) {\n            return \"fetch.illegalMemoryAddress\";\n        }\n        this.pc += 4;\n        this.fetched = Utils.catBytes(arr);\n        return null;\n    }\n    constructor(memorySize, virtualOS, instructionSet) {\n        super();\n        this.virtualOSServiceRegister = 2;\n        this.virtualOSArgumentVectorStart = 4;\n        this.virtualOSArgumentVectorEnd = 7;\n        this.instructionSet = instructionSet;\n        this.pc = 0 >>> 0;\n        this.memorySize = memorySize;\n        this.virtualOS = virtualOS;\n        this.registerFile = new MIPSRegisterFile(memorySize, instructionSet.abiNames);\n        this.memory = new Array(memorySize);\n        for (let i = 0; i < memorySize; i++) {\n            this.memory[i] = 0;\n        }\n    }\n}\nCoreFactory.ISAs[\"MIPS\"] = {\n    generator: MIPS,\n    core: MIPSCore,\n    options: []\n};\n/// <reference path=\"CoreFactory.ts\"/>\n/// <reference path=\"ISAs/RISCV.ts\" />\n/// <reference path=\"ISAs/MIPS.ts\" />\n\nexport default {\n    VirtualOS: VirtualOS,\n    Endianness: Endianness,\n    Assembler: Assembler,\n    Line: Line,\n    CoreFactory: CoreFactory\n};","import React, { Component } from 'react'\n\nimport { connect } from 'react-redux';\nimport { Translate, withLocalize } from \"react-localize-redux\";\nimport { setHelpVisible } from \"../actions\"\n\nclass Help extends Component {\n    handleClose = (e) => {\n        e.preventDefault();\n        this.props.setHelpVisible(false);\n    };\n\n    handleStopClose = (event) => {\n        event.stopPropagation();\n    };\n    \n    render() {\n        return (\n            <div id=\"help\" onClick={this.handleClose} className={`settings_overlay overlay fader${this.props.visible ? \" fader_shown\" : \"\"}`}>\n                <div className=\"settings_container\" onClick={this.handleStopClose}>\n                    <button className=\"floating_close\" onClick={this.handleClose}></button>\n                    <h2><Translate id=\"help.title\" /></h2>\n                    <div className=\"overlay_contents\">\n                        <Translate id=\"help.data\" options={{ renderInnerHtml: true }} />\n                        <button className=\"button\" onClick={this.handleClose}>Close</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst stateToProps = state => {\n    return {\n        visible: state.panel_visibility.help\n    };\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n    setHelpVisible: (visible) => dispatch(setHelpVisible(visible))\n});\n\nexport default withLocalize(\n    connect(stateToProps,\n            dispatchToProps\n    )(Help));","export default {\n    core: [\n        {\n            \"affiliation\": \"Research Associate, American University in Cairo\",\n            \"pic\": \"donn.jpg\",\n            \"name\": \"Mohamed \\\"Donn\\\" Gaber\",\n            \"job\": \"Assembler / Simulator Developer\",\n            \"link\": \"https://donn.website/\",\n            \"desc\": \"Maintainer of the Cloud V platform on both https://cloudv.io and https://efabless.com. I consume an unhealthy amount of video games in my spare time.\"\n        },\n        {\n            \"affiliation\": \"Student, American University in Cairo (formerly)\",\n            \"pic\": \"karimio.jpg\",\n            \"name\": \"Karim Abdel Hamid\",\n            \"job\": \"Primary Front-End/IDE Developer\",\n            \"link\": \"https://karimio.github.io/\",\n            \"desc\": \"I'm a game and web developer; love to write stories, play guitar, & paint.\"\n        }\n    ],\n    additional: [\n        {\n            \"affiliation\": \"Student, American University in Cairo (formerly)\",\n            \"pic\": \"ali_khaled.jpg\",\n            \"name\": \"Ali Khaled\",\n            \"job\": \"MIPS Assistance\",\n            \"link\": \"https://github.com/loshya\",\n            \"desc\": \"\"\n        },\n        {\n            \"affiliation\": \"Professor, American University in Cairo\",\n            \"pic\": \"shalan.jpg\",\n            \"name\": \"Dr. Mohamed Shalan\",\n            \"job\": \"Advisor\",\n            \"link\": \"https://github.com/shalan\",\n            \"desc\": \"Founder at Cloud V, Open Hardware Researcher and Advocate\"\n        }\n    ],\n    translators: []\n};","import React, { Component } from 'react'\n\nimport { connect } from 'react-redux';\nimport { Translate, withLocalize } from \"react-localize-redux\";\nimport { setAboutVisible } from \"../actions\"\nimport devs from \"../developer_list.js\"\n\nclass About extends Component {\n    handleClose = (e) => {\n        e.preventDefault();\n        this.props.setAboutVisible(false);\n    };\n\n    handleStopClose = (event) => {\n        event.stopPropagation();\n    };\n\n    printdev = (arr) => {\n        return arr.map((element, i) => {\n            return <a key={i} href={element.link}>\n                <img src={`images/about/${element.pic}`} />\n                <h4>{element.name}</h4>\n                <span>{element.job}</span>\n                <span>{element.affiliation}</span>\n                <p>{element.desc}</p>\n            </a>;\n        })\n    }\n    \n    render() {\n        return (\n            <div id=\"about\" onClick={this.handleClose} className={`settings_overlay overlay fader${this.props.visible ? \" fader_shown\" : \"\"}`}>\n                <div className=\"settings_container\" onClick={this.handleStopClose}>\n                    <button className=\"floating_close\" onClick={this.handleClose}></button>\n                    <h2><Translate id=\"about.title\" /></h2>\n                    <div className=\"overlay_contents\">\n                        <div className=\"devlist\">\n                            <h3><Translate id=\"about.core_devs\" /></h3>\n                            {\n                                this.printdev(devs.core)\n                            }\n                        </div>\n                        <div className=\"devlist\">\n                            <h3><Translate id=\"about.additional_devs\" /></h3>\n                            {\n                                this.printdev(devs.additional)\n                            }\n                        </div>\n                        {devs.translators.length > 0  && <div className=\"translatorlist\">\n                            <h3><Translate id=\"about.translators\" /></h3>\n                            {\n                                devs.translators.map((element, i) => {\n                                    return <a key={i} href={element.link}>\n                                        <h4>{element.name}</h4>\n                                        <span>{element.lang}</span>\n                                    </a>;\n                                })\n                            }\n                        </div>}\n                    </div>\n                    <button className=\"button\" onClick={this.handleClose}>Close</button>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst stateToProps = state => {\n    return {\n        visible: state.panel_visibility.about\n    };\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n    setAboutVisible: (visible) => dispatch(setAboutVisible(visible))\n});\n\nexport default withLocalize(\n    connect(stateToProps,\n            dispatchToProps\n    )(About));","import React, { Component } from 'react'\n\nexport default class HotkeyInput extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            capturing: false,\n            combo: \"a_110\",\n            shift: true,\n            alt: true,\n            ctrl: true,\n            key_name: \"n\"\n        }\n    }\n\n    handleClick = (event) => {\n        this.setState({capturing: true});\n\t\twindow.addEventListener(\"keydown\", this.handleKey);\n    }\n\n    handleKey = (event) => {\n        if (this.state.capturing) {\n            event.stopPropagation();\n            event.preventDefault();\n\n            let key = event.key.toLowerCase();\n            if (key === \"control\" || key === \"shift\" || key === \"alt\")\n                return false;\n\n            this.setState({\n                shift: event.shiftKey,\n                ctrl: event.ctrlKey,\n                alt: event.altKey,\n                key_name: key,\n                capturing: false\n            });\n\n            window.removeEventListener(\"keydown\", this.handleKey);\n            this.props.save();\n        }\n    }\n\n    testKey = (key_ctrl, key_alt, key_shift, key_name) => {\n        return (key_shift === this.state.shift &&\n            key_alt=== this.state.alt &&\n            key_ctrl === this.state.ctrl &&\n            key_name === this.state.key_name);\n    }\n\n    setKey = (key_ctrl, key_alt, key_shift, key_name, done = () => {}) => {\n        this.setState({\n            ctrl: key_ctrl,\n            alt: key_alt,\n            shift: key_shift,\n            key_name: key_name\n        }, done);\n    }\n\n    getKey = () => {\n        let key = \"_\" + this.state.key_name;\n        if (this.state.shift)\n            key = \"s\" + key;\n            \n        if (this.state.alt)\n            key = \"a\" + key;\n        \n        if (this.state.ctrl)\n            key = \"c\" + key;\n\n        return key;\n    }\n\n    setKeyStr = (str) => {\n        let upos = str.indexOf(\"_\");\n        let mods = str.substr(0, upos);\n\n\t\tlet shift = (mods.indexOf(\"s\")!==-1);\n\t\tlet alt = (mods.indexOf(\"a\")!==-1);\n\t\tlet ctrl = (mods.indexOf(\"c\")!==-1);\n        let key = str.substr(upos + 1);\n        \n        this.setKey(ctrl, alt, shift, key);\n    }\n    \n    render() {\n        let c = !this.state.capturing;\n        return (<div className={`key_bar${this.state.capturing ? \" capturing\" : \"\"}`} onClick={this.handleClick} tabIndex={0}>\n                    {!c && <span>Capturing</span>}\n                    {c && this.state.ctrl && <span>Ctrl</span>}\n                    {c && this.state.alt && <span>Alt</span>}\n                    {c && this.state.shift && <span>Shift</span>}\n                    {c && <span>{this.state.key_name}</span>}\n                </div>);\n    }\n}","import React, { Component } from 'react'\nimport HotkeyInput from '../modules/hotkey.js'\nimport Select from '../modules/select'\n\nimport { connect } from 'react-redux';\nimport { withLocalize } from \"react-localize-redux\";\nimport { setSettingsVisible } from \"../actions\"\n\nconst themes = [\n    \"theme_light\",\n    \"theme_dark\",\n    \"theme_dos\",\n    \"theme_apple2\"\n];\n\nclass Settings extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            default_isa: \"RISC-V\",\n            theme: \"theme_light\",\n            use_cookies: false\n        };\n        \n\t\twindow.addEventListener(\"keydown\", this.handleKey);\n\n        for (let i = 1; i < themes.length; ++i)\n            document.getElementById(themes[i]).disabled = true;\n\n\t\tthis.comp_new = React.createRef();\n\t\tthis.comp_load = React.createRef();\n\t\tthis.comp_save = React.createRef();\n\t\tthis.comp_assemble = React.createRef();\n\t\tthis.comp_sim = React.createRef();\n        this.comp_step = React.createRef();\n    }\n\n    handleClose = (e) => {\n        e.preventDefault();\n        this.props.setSettingsVisible(false);\n    };\n\n    handleStopClose = (event) => {\n        event.stopPropagation();\n    };\n\n    handleKey = (event) => {\n        if (this.props.canhandleinput) {\n            let key_name = event.key.toLowerCase();\n            if (key_name === \"control\" || key_name === \"shift\" || key_name === \"alt\")\n                return false;\n\n            let key_ctrl = event.ctrlKey;\n            let key_alt = event.altKey;\n            let key_shift = event.shiftKey;\n            let cancel = false;\n\n            let hotkey = [\n                this.comp_new.current,\n                this.comp_load.current,\n                this.comp_save.current,\n                this.comp_assemble.current,\n                this.comp_step.current,\n                this.comp_sim.current\n            ];\n\n            let hotkeyfns = [\n                this.props.fn_new,\n                this.props.fn_load,\n                this.props.fn_save,\n                this.props.fn_ass,\n                this.props.fn_step,\n                this.props.fn_sim\n            ];\n\n            for (let i = 0; i < hotkey.length; ++i) {\n                if (hotkey[i].testKey(key_ctrl, key_alt, key_shift, key_name)) {\n                    hotkeyfns[i]();\n                    cancel = true;\n                }\n            }\n\n            if (cancel) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    }\n\n    setDefaults = (done = () => {}) => {\n        this.comp_new.current.setKey(false, true, false, \"n\", () => {\n            this.comp_load.current.setKey(true, false, false, \"o\", () => {\n                this.comp_save.current.setKey(true, false, false, \"s\", () => {\n                    this.comp_assemble.current.setKey(false, true, false, \"f5\", () => {\n                        this.comp_sim.current.setKey(false, true, false, \"f7\", () => {\n                            this.comp_step.current.setKey(false, true, false, \"f6\", () => {\n                                this.setTheme(\"theme_light\", done);\n                            });\n                        });\n                    });\n                });\n            });\n        });\n    }\n\n    setDefaultsSave = () => {\n        this.setDefaults(this.saveSettings);\n    }\n\n    /*function getCookie(cname) {\n        var name = cname + \"=\";\n        var ca = document.cookie.split(';');\n        for(var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) === ' ') {\n                c = c.substring(1);\n            }\n            if (c.indexOf(name) === 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    }*/\n    \n    saveSettings = () => {\n        var d = new Date();\n        d.setTime(d.getTime() + (30*24*60*60*1000));\n        var expires = d.toUTCString();\n        let exp = \"; expires=\" + expires + \"; path=/\";\n        \n        document.cookie = \"ojs_hotkey_new=\" + this.comp_new.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_load=\" + this.comp_load.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_save=\" + this.comp_save.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_ass=\" + this.comp_assemble.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_sim=\" + this.comp_sim.current.getKey() + exp;\n        document.cookie = \"ojs_hotkey_step=\" + this.comp_step.current.getKey() + exp;\n        document.cookie = \"ojs_theme=\" + this.state.theme + exp;\n    }\n\n    setTheme = (val, continuefn = () => {}) => {\n        if (!themes.includes(val)) {\n            val = themes[0];\n        }\n\n        themes.forEach(function(element) {\n            document.getElementById(element).disabled = (element !== val);\n        });\n\n        this.setState({theme: val}, continuefn);\n    }\n\n    componentDidMount() {\n        let has_cookies = false;\n\n        let ca = document.cookie.split(\"; \");\n\n        let i = 0;\n        for (; i < ca.length; i++) {\n            var c = ca[i];\n            \n            while (c.charAt(0) === ' ') {\n                c = c.substring(1);\n            }\n            \n            let eq = c.indexOf(\"=\");\n            let str = c.substr(0, eq);\n            let val = c.substr(eq+1);\n            if (str === \"ojs_hotkey_new\") {\n                this.comp_new.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_load\") {\n                this.comp_load.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_save\") {\n                this.comp_save.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_ass\") {\n                this.comp_assemble.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_sim\") {\n                this.comp_sim.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_hotkey_step\") {\n                this.comp_step.current.setKeyStr(val);\n                has_cookies = true;\n            }\n            else if (str === \"ojs_theme\") {\n                this.setTheme(val);\n                has_cookies = true;\n            }\n        }\n\n        if (has_cookies) {\n            this.setState({use_cookies: true});\n        }\n    }\n\n    handleISA = (event) => {\n        this.setState({default_isa: event.target.value});\n    };\n\n    handleTheme = (event) => {\n        this.setTheme(event.target.value, this.saveSettings);\n    };\n\n    acceptCookies = (e) => {\n        e.preventDefault();\n\n        this.setState({use_cookies: true});\n        this.setDefaultsSave();\n    }\n\n    deleteAllCookies = () => {\n        var cookies = document.cookie.split(\"; \");\n\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i];\n            var eqPos = cookie.indexOf(\"=\");\n            var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n            let startojs = name.substr(0, 3);\n            if (startojs === \"ojs\")\n                document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n        \n        }\n\n        this.setState({use_cookies: false});\n        this.setDefaults();\n    }\n\n    render() {\n        return (\n            <div id=\"settings\" onClick={this.handleClose} className={`settings_overlay overlay fader${this.props.visible ? \" fader_shown\" : \"\"}`}>\n                <div className=\"settings_container\" onClick={this.handleStopClose}>\n                    <button className=\"floating_close\" onClick={this.handleClose}></button>\n                    <h2>Settings</h2>\n                    {!this.state.use_cookies && \n                        <div className=\"cookie_screen\">\n                            <h3>Cookies</h3>\n                            <p>In order to set your own settings, you need to enable cookies. Cookies are the way websites store data for individual users. We store your cookies directly in the browser, and only store the options stored here.</p>\n                            <button onClick={this.acceptCookies} className=\"button\">Accept Cookies, Show Settings</button>\n                            <button onClick={this.handleClose} className=\"button subbutton\">Close Window</button>\n                        </div>\n                    }\n                    <div style={{display: (this.state.use_cookies ? \"block\" : \"none\"), position: \"relative\"}}>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <td colSpan={2}>General Settings</td>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {/*<tr>\n                                    <td colSpan={2}>\n                                        <Select onChange={this.handleISA} icon=\"/images/icons/input_type.svg\" placeholder=\"Default ISA\" value={this.state.default_isa}>\n                                            <option>RISC-V</option>\n                                            <option>MIPS</option>\n                                        </Select>\n                                    </td>\n                                </tr>*/}\n                                <tr>\n                                    <td colSpan={2}>\n                                        <Select onChange={this.handleTheme} icon=\"images/icons/input_type.svg\" placeholder=\"Theme\" value={this.state.theme}>\n                                            <option value=\"theme_light\">Light</option>\n                                            <option value=\"theme_dark\">Dark</option>\n                                            <option value=\"theme_dos\">DOS</option>\n                                            <option value=\"theme_apple2\">Apple ][</option>\n                                        </Select>\n                                    </td>\n                                </tr>\n                            </tbody>\n                            <thead>\n                                <tr>\n                                    <td colSpan={2}>Hotkeys</td>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td>New Tab</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_new} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Save Tab</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_save} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Load</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_load} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Assemble</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_assemble} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Step-By-Step</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_step} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Simulate</td>\n                                    <td>\n                                        <HotkeyInput ref={this.comp_sim} save={this.saveSettings} />\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <button className=\"button\" onClick={this.handleClose}>Accept Changes</button>\n                        <button className=\"button subbutton\" onClick={this.setDefaultsSave}>Restore Defaults</button>\n                        <button className=\"button subbutton\" onClick={this.deleteAllCookies}>Delete Cookies</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst stateToProps = state => {\n    return {\n        visible: state.panel_visibility.settings\n    };\n};\n\nconst dispatchToProps = (dispatch, ownProps) => ({\n    setSettingsVisible: (visible) => dispatch(setSettingsVisible(visible))\n});\n\nexport default withLocalize(\n    connect(stateToProps,\n            dispatchToProps\n    )(Settings));","import React, { Component } from 'react'\n\nexport default class Input extends Component {\n    render() {\n        return (\n            <div className=\"input_group\">\n                <input onChange={this.props.onChange} value={this.props.value} style={{backgroundImage: `url(${this.props.icon})`}} type={this.props.type} placeholder={this.props.placeholder} />\n                <label className=\"group_label\">{this.props.placeholder}</label>\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react'\nimport Input from '../modules/input'\nimport Select from '../modules/select'\nimport OakJS from '../backend.js';\n\nimport { connect } from 'react-redux';\nimport { withLocalize } from \"react-localize-redux\";\nimport { setProjectSettings } from \"../actions\"\n\nclass PanelSettings extends Component {\n    static display_name = \"settings\";\n\n    handleFileName = (event) => {\n        this.props.setProjectSettings(event.target.value, this.props.project_settings.memory_size, this.props.project_settings.isa);\n    }\n\n    handleISA = (event) => {\n        this.props.setProjectSettings(this.props.project_settings.file_name, this.props.project_settings.memory_size, event.target.value);\n    }\n\n    handleMemorySize = (event) => {\n        const re = /^[0-9\\b]+$/;\n    \n        if (event.target.value === '' || re.test(event.target.value)) {\n            this.props.setProjectSettings(this.props.project_settings.file_name, event.target.value, this.props.project_settings.isa);\n        }\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.props.submitChanges();\n    };\n\n    render() {\n        let isas = OakJS.CoreFactory.getCoreList();\n        \n        return (\n            <div id=\"panel_settings\" className=\"panel panel_settings\">\n                <form onSubmit={this.handleSubmit}>\n                    <Input onChange={this.handleFileName} value={this.props.project_settings.file_name} icon=\"images/icons/input_name.svg\" placeholder=\"File Name\" id=\"filename\" />\n                    <Select onChange={this.handleISA} value={this.props.project_settings.isa} icon=\"images/icons/input_code.svg\" placeholder=\"Instruction Set\" >\n                        {isas.map((isa, i) => {\n                            return <option key={isa} value={isa}>{isa}</option>\n                        })}\n                    </Select>\n                    <Input onChange={this.handleMemorySize} value={this.props.project_settings.memory_size} icon=\"images/icons/input_memory.svg\" placeholder=\"Memory Size (Bytes)\" type=\"number\" />\n\n                    <input className=\"button\" value=\"Accept Changes\" type=\"submit\" />\n                </form>\n            </div>\n        )\n    }\n}\n\nconst appStateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab,\n\t\tproject_settings: state.project_settings\n\t};\n};\n\nconst appDispatchToProps = (dispatch, ownProps) => ({\n\tsetProjectSettings: (n, s, i) => dispatch(setProjectSettings(n, s, i))\n})\n\nexport default withLocalize(\n\tconnect(appStateToProps,\n\t\t\tappDispatchToProps\n\t)(PanelSettings));","import React, { Component } from 'react'\nimport Input from '../modules/input'\nimport Select from '../modules/select'\nimport {padNumber, parseToFloat, encodeFloat} from './numberttransform'\n\nexport default class PanelConversion extends Component {\n    static display_name = \"conversion\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            input: 0,\n            input_type: 0,\n            output_type: 0,\n            output: \"\",\n            has_value: false\n        };\n    }\n\n    calculateOutput = (val, in_type, out_type) => {\n        let input = val;\n        switch(in_type) {\n            case 0: // Hex\n                input = parseInt(input, 16);\n                break;\n            default:\n            case 1: // uint\n            case 2: // int\n                input = parseInt(input, 10);\n                break;\n            case 3: // bin\n                input = parseInt(input, 2);\n                break;\n            case 4: // float\n                input = encodeFloat(input);\n                break;\n        }\n    \n        if (input.toString() === \"NaN\")\n            return \"\";\n    \n        let output;\n        switch(out_type) {\n            case 0: // Hex\n                output = \"0x\"+padNumber((input >>> 0).toString(16), 8);\n                break;\n            case 1: // uint\n                output = (input >>> 0).toString(10);\n                break;\n            default:\n            case 2: // int\n                output = input.toString(10);\n                if (output > 2147483648) { output = output - 4294967296 }\n                break;\n            case 3: // bin\n                output = \"0b\"+padNumber((input >>> 0).toString(2), 32);\n                break;\n            case 4: // float\n                output = parseToFloat(input);\n                break;\n        }\n        \n        return output;\n    };\n\n    onChangeInput = (event) => {\n        let val = event.target.value;\n        let in_type = this.state.input_type;\n        let out_type = this.state.output_type;\n        let out = this.calculateOutput(val, in_type, out_type);\n        this.setState({input: val, has_value: (val !== \"\"), output: out});\n    };\n\n    onChangeInputType = (event) => {\n        let val = this.state.input;\n        let in_type = parseInt(event.target.value, 10);\n        let out_type = this.state.output_type;\n        let out = this.calculateOutput(val, in_type, out_type);\n        this.setState({input: val, input_type: in_type, has_value: (val !== \"\"), output: out});\n    };\n\n    onChangeOutputType = (event) => {\n        let val = this.state.input;\n        let in_type = this.state.input_type;\n        let out_type = parseInt(event.target.value, 10);\n        let out = this.calculateOutput(val, in_type, out_type);\n        this.setState({input: val, output_type: out_type, has_value: (val !== \"\"), output: out});\n    };\n\n    render() {\n        return (\n            <div id=\"panel_conversion\" className=\"panel panel_conversion\">\n                <Input onChange={this.onChangeInput} icon=\"images/icons/input_in.svg\" placeholder=\"Input\" type=\"text\" />\n                <Select onChange={this.onChangeInputType} icon=\"images/icons/input_type.svg\" placeholder=\"Input Type\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Integer</option>\n                    <option value=\"3\">Binary</option>\n                    {/*<option value=\"4\">Float</option>*/}\n                </Select>\n                <hr />\n                <Select onChange={this.onChangeOutputType} icon=\"images/icons/input_type.svg\" placeholder=\"Output Type\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Unsigned Integer</option>\n                    <option value=\"2\">Signed Integer</option>\n                    <option value=\"3\">Binary</option>\n                    {/*<option value=\"4\">Float</option>*/}\n                </Select>\n                <span className=\"conversion_output\">\n                    {this.state.output !==\"\" ? this.state.output : \"<Output>\"}\n                </span>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Select from '../modules/select'\nimport {padNumber, parseToFloat} from './numberttransform'\nimport { connect } from 'react-redux';\n\nconst REGISTER_UNASSIGNED = 0;\nconst REGISTER_ASSIGNED = 1;\nconst REGISTER_NEWASSIGNED = 2;\n\nclass PanelRegisters extends Component {\n    static display_name = \"registers\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            register_type: 0,\n        }\n    }\n\n    handleType = (event) => {\n        this.setState({register_type: parseInt(event.target.value, 10)});\n    };\n\n    translateRegister = (input) => {\n        switch(this.state.register_type) {\n            case 0: // Hex\n                return \"0x\"+padNumber((input >>> 0).toString(16), 8);\n            case 1: // uint\n                return (input >>> 0).toString(10);\n            default:\n            case 2: // int\n                let output = input.toString(10);\n                if (output > 2147483648) { output = output - 4294967296 }\n                return output;\n            case 3: // bin\n                return \"0b\"+padNumber((input >>> 0).toString(2), 32);\n            case 4: // float\n                return output = parseToFloat(input);\n        }\n    };\n\n    getChangedRegisterClass = (val) => {\n        switch(val) {\n            default:\n            case REGISTER_UNASSIGNED:\n                return \"reg_normal\";\n            case REGISTER_ASSIGNED:\n                return \"reg_assigned\";\n            case REGISTER_NEWASSIGNED:\n                return \"reg_new\";\n        }\n    }\n\n    render() {\n        let tab = this.props.tabs[this.props.selectedtab];\n        if (!(tab && tab.core))\n            return <div></div>;\n\n        let core = tab.core;\n        let registers = core.registerFile.physicalFile;\n        let register_changed = tab.register_changed;\n        let register_names = core.registerFile.abiNames;\n\n        return (\n            <div id=\"panel_registers\" className=\"panel panel_registers\">\n                <Select onChange={this.handleType} icon=\"images/icons/input_type.svg\" placeholder=\"Display Type\" defaultValue=\"0\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Unsigned Integer</option>\n                    <option value=\"2\">Signed Integer</option>\n                    <option value=\"3\">Binary</option>\n                    <option value=\"4\">Float</option>\n                </Select>\n                <table cellSpacing=\"0\" cellPadding=\"0\">\n                    <thead>\n                        <tr><th>Reg</th><th>Value</th></tr>\n                    </thead>\n                    <tbody>\n                        {\n                            registers.map((register, i) => {\n                                let register_dpy = this.translateRegister(register);\n                                return (<tr key={i} className={this.getChangedRegisterClass(register_changed[i])}>\n                                    <td>\n                                        {register_names[i]}\n                                    </td>\n                                    <td data-info={register}>\n                                        {register_dpy}\n                                    </td>\n                                </tr>);\n                            })\n                        }\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelRegisters);","import React, { Component } from 'react'\nimport Select from '../modules/select'\nimport {padNumber} from './numberttransform'\n\nimport { connect } from 'react-redux';\n\nclass PanelMachineCode extends Component {\n    static display_name = \"machine code\";\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            register_type: 0,\n        }\n    }\n\n    handleType = (event) => {\n        this.setState({register_type: parseInt(event.target.value, 10)});\n    };\n\n    translateRegister = (input) => {\n        switch(this.state.register_type) {\n            default:\n            case 0: // Hex\n                return padNumber((input >>> 0).toString(16), 2);\n            case 1: // uint\n                return padNumber((input >>> 0).toString(10), 3);\n            case 2: // octal\n                return padNumber((input >>> 0).toString(8), 3);\n            case 3: // bin\n                return padNumber((input >>> 0).toString(2), 8);\n        }\n    };\n\n    render() {\n        let tabs = this.props.tabs;\n        if (tabs.length === 0)\n            return <div></div>;\n            \n        let machinecode = tabs[this.props.selectedtab].machine_code;\n        let empty = machinecode.length === 0;\n        return (\n            <div id=\"panel_machine_code\" className=\"panel panel_machine_code\">\n                {empty && <span className=\"panel_empty\">Machine Code Empty</span>}\n                {!empty && <Select onChange={this.handleType} icon=\"images/icons/input_type.svg\" placeholder=\"Display Type\" defaultValue=\"0\">\n                    <option value=\"0\">Hex</option>\n                    <option value=\"1\">Decimal</option>\n                    <option value=\"2\">Octal</option>\n                    <option value=\"3\">Binary</option>\n                </Select>}\n                \n                {!empty && machinecode.map((byte, i) => {\n                    let val = this.translateRegister(byte);\n                    return <span key={i}>{val} </span>;\n                })}\n            </div>\n        )\n    }\n}\n\nconst stateToProps = state => {\n\treturn {\n        tabs: state.tabs,\n        selectedtab: state.selectedtab\n\t};\n};\n\nexport default connect(stateToProps)(PanelMachineCode);","import React, { Component } from 'react';\nimport TextEditor from \"./sections/texteditor.js\";\nimport Navigation from \"./sections/navigation.js\";\nimport PanelContainer from \"./sections/panelcontainer.js\";\nimport PanelMemory from \"./sections/panelmemory.js\";\nimport PanelConsole from \"./sections/panelconsole.js\";\nimport PanelLog from \"./sections/panellog.js\";\nimport Help from './sections/help';\nimport About from './sections/about';\nimport Settings from './sections/settings';\nimport PanelSettings from './sections/panelsettings';\nimport PanelConversion from './sections/panelconversion';\nimport PanelRegisters from './sections/panelregisters';\n//import CoreContext from './coreContext';\nimport PanelMachineCode from './sections/panelmachinecode';\nimport OakJS from './backend.js';\n\nimport { connect } from 'react-redux';\nimport { Translate, withLocalize } from \"react-localize-redux\";\nimport { renderToStaticMarkup } from 'react-dom/server';\n\nimport enTranslations from \"./translations/en.json\";\n\nimport { selectTab, addTab, updateTab, setProjectSettings, setSettingsVisible, setHelpVisible, setAboutVisible } from \"./actions\"\n\nconst SimulatingStatus = {\n\tStopped:\t0,\n\tStep:\t\t1,\n\tPlay:\t\t2\n};\n\nconst REGISTER_UNASSIGNED = 0;\nconst REGISTER_ASSIGNED = 1;\nconst REGISTER_NEWASSIGNED = 2;\n\nconst CONSOLE_INPUT_NONE= 0;\nconst CONSOLE_INPUT_NUM = 1;\nconst CONSOLE_INPUT_STR = 2;\n\nconst decode_error_msg = <span><b>Error: </b>Failed to decode instruction. In practice, the most likely cause is forgetting to terminate the program using the appropriate system call (see help section).</span>;\n\nconst MessageType = {\n\tLog: 0,\n\tInput: 1,\n\tOutput: 2,\n\tSuccess: 3,\n\tWarning: 4,\n\tError: 5,\n};\n\nclass App extends Component {\n\tvirtual_os;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.props.initialize({\n\t\t\tlanguages: [\n\t\t\t  { name: \"English\", code: \"en\" }\n\t\t\t],\n\t\t\toptions: { renderToStaticMarkup }\n\t\t});\n\n\t\t// $.ajax({\n        //     type: \"POST\",\n        //     url: 'https://pastebin.com/api/api_post.php',\n        //     data: {\n        //         api_dev_key:    'fe832913bc53f77f05505bc93e3b04b1',\n        //         api_option:     'paste',\n        //         api_paste_code: \"Dude this is\\nHella cool\"\n        //     },\n        //     async:true,\n        //     dataType : 'text/plain',   //you may use jsonp for cross origin request\n        //     crossDomain:true,\n        //     headers: {\n        //         \"Access-Control-Allow-Origin\": \"*\",\n        //         \"Access-Control-Allow-Headers\": \"origin, content-type, accept\"\n        //     },\n        //     success: function(data, status, xhr) {\n        //         console.log(\"Pastebin success: \" + data);\n        //     }\n        // });\n\n        // $.ajax({\n        //     type: \"GET\",\n        //     url: 'https://pastebin.com/Tricwqr6',\n        //     data: {\n        //         api_dev_key:    'fe832913bc53f77f05505bc93e3b04b1',\n        //         api_option:     'paste',\n        //         api_paste_code: \"Dude this is\\nHella cool\"\n        //     },\n        //     async:true,\n        //     dataType : 'text/plain',   //you may use jsonp for cross origin request\n        //     crossDomain:true,\n        //     headers: {\n        //         \"Access-Control-Allow-Origin\": \"*\",\n        //         \"Access-Control-Allow-Headers\": \"origin, content-type, accept\"\n        //     },\n        //     success: function(data, status, xhr) {\n        //         console.log(\"Pastebin get success: \" + data);\n        //     }\n        // });\n\t\t\n\t\tthis.state = {\n\t\t\tpanel_x: 256,\n\t\t\tpanel_y: 256\n\t\t};\n\t\t\n\t\tthis.component_input = React.createRef();\n\n\t\twindow.addEventListener(\"keyup\", this.handleKeyPress);\n\t\t\n\t\tthis.props.addTranslationForLanguage(enTranslations, 'en');\n\n\t\tthis.virtual_os = new OakJS.VirtualOS(); // The virtual OS handles ecalls. It takes a bunch of callbacks: output Int, output String, etcetera...\n\t\tthis.virtual_os.inputInt = () => {\n\t\t\tlet tab = this.props.tabs[this.props.selectedtab];\n\t\t\tif (tab) {\n\t\t\t\ttab.console_input_type = CONSOLE_INPUT_NUM;\n\t\t\t}\n\t\t};\n\n\t\tthis.virtual_os.inputString = () => {\n\t\t\tlet tab = this.props.tabs[this.props.selectedtab];\n\t\t\tif (tab) {\n\t\t\t\ttab.console_input_type = CONSOLE_INPUT_STR;\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.virtual_os.outputInt = (number) => {\n\t\t\tthis.addConsoleMessage(MessageType.Output, \">> \" + number);\n\t\t};\n\n\t\tthis.virtual_os.outputString = (string) => {\n\t\t\tthis.addConsoleMessage(MessageType.Output, \">> \" + string);\n\t\t};\n\n\t\tthis.virtual_os.handleHalt = () => {\n\t\t\tlet current_tab = this.props.selectedtab;\n\t\t\tlet tab = this.props.tabs[current_tab];\n\n\t\t\tif (!tab)\n\t\t\t\treturn;\n\n\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\n\t\t\tthis.addConsoleMessage(MessageType.Success, \" == SIMULATION COMPLETED == \");\n\n\t\t\tthis.props.updateTab(current_tab, tab);\n\t\t};\n\t\t\n\t\tthis.addTabDefault();\n\t}\n\n\thandleKeyPress = (event) => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (tab && tab.console_input_type !== CONSOLE_INPUT_NONE) {\n\t\t\tevent.preventDefault();\n\n\t\t\tlet input = tab.console_input;\n\t\t\tlet cursor = tab.cursor_pos;\n\n\t\t\tif (event.key === \"Enter\") {\n\t\t\t\tthis.continueAfterConsole(input);\n\t\t\t\ttab.console_input = \"\";\n\t\t\t}\n\t\t\telse if (event.which === 8) {\n\t\t\t\tif (cursor > 0) {\n\t\t\t\t\tlet val = input.slice(0, cursor - 1) + input.slice(cursor);\n\t\t\t\t\t\n\t\t\t\t\ttab.cursor_pos = cursor - 1;\n\t\t\t\t\ttab.console_input = val;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (event.keyCode === 46) {\n\t\t\t\tif (cursor < input.length) {\n\t\t\t\t\tlet val = input.slice(0, cursor) + input.slice(cursor + 1);\n\t\t\t\t\t\n\t\t\t\t\ttab.cursor_pos = cursor - 1;\n\t\t\t\t\ttab.console_input = val;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (event.keyCode === 37) {\n\t\t\t\tcursor = (cursor <= 0) ? 0 : cursor - 1;\n\t\t\t\ttab.cursor_pos = cursor;\n\t\t\t}\n\t\t\telse if (event.keyCode === 39) {\n\t\t\t\tlet l = tab.console_input.length;\n\t\t\t\tcursor = (cursor >= l) ? l : cursor + 1;\n\t\t\t\ttab.cursor_pos = l;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet out = event.key;\n\t\t\t\t\n\t\t\t\tconst keycode = event.keyCode;\n\t\t\t\tconst isNum = tab.console_input_type === CONSOLE_INPUT_NUM;\n\t\t\t\t\n\t\t\t\tvar valid = \n\t\t\t\t(keycode > 47 && keycode < 58)   || // number keys\n\t\t\t\t(!isNum && (keycode === 32 || keycode === 13   || // spacebar & return key(s) (if you want to allow carriage returns)\n\t\t\t\t(keycode > 64 && keycode < 91)   || // letter keys\n\t\t\t\t(keycode > 95 && keycode < 112)  || // numpad keys\n\t\t\t\t(keycode > 185 && keycode < 193) || // ;=,-./` (in order)\n\t\t\t\t(keycode > 218 && keycode < 223)));\n\n\t\t\t\tif (valid) {\n\t\t\t\t\tout = input.slice(0, cursor) + out + input.slice(cursor);\n\t\t\t\t\ttab.console_input = out;\n\t\t\t\t\ttab.cursor_pos =  cursor + 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.updateTab(current_tab, tab);\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\taddConsoleMessage = (msg_type, data) => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tabs = this.props.tabs;\n\t\tlet tab = tabs[current_tab];\n\t\t\n\t\tlet className;\n\t\tif (msg_type === MessageType.Error)\n\t\t\tclassName = \"console_error\";\n\t\telse if (msg_type === MessageType.Warning)\n\t\t\tclassName = \"console_warning\";\n\t\telse if (msg_type === MessageType.Success)\n\t\t\tclassName = \"console_success\";\n\t\telse if (msg_type === MessageType.Output)\n\t\t\tclassName = \"console_output\";\n\t\telse if (msg_type === MessageType.Input)\n\t\t\tclassName = \"console_input\";\n\t\telse\n\t\t\tclassName = \"console_log\";\n\t\t\n\t\ttab.console.push(<div className={className}>{data}</div>);\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\tcontinueAfterConsole = (input) => {\n\t\tlet selected = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[selected];\n\n\t\tlet core = tab.core;\n\n\t\tif (tab.console_input_type === CONSOLE_INPUT_NUM) {\n\t\t\tinput = parseInt(input, 10);\n\t\t\tthis.virtual_os.continueInputInt(core, input);\n\t\t\tthis.addConsoleMessage(MessageType.Log, \"<< \" + input);\n\t\t} else if (tab.console_input_type === CONSOLE_INPUT_STR) {\n\t\t\tthis.virtual_os.continueInputString(core, input);\n\t\t\tthis.addConsoleMessage(MessageType.Log, \"<< \" + input);\n\t\t}\n\n\t\ttab.console_input_type = CONSOLE_INPUT_NONE;\n\n\t\tthis.checkUpdatedTabs();\n\t\tthis.props.updateTab(selected, tab);\n\t}\n\n\tcheckUpdatedTabs = () => {\n\t\tlet tab = this.props.tabs[this.props.selectedtab];\n\n\t\tvar mod_reg = tab.core.registerFile.getModifiedRegisters();\n\t\t\n\t\tfor(let i = 0; i < tab.register_changed.length; ++i) {\n\t\t\tif (mod_reg[i])\n\t\t\t\ttab.register_changed[i] = REGISTER_NEWASSIGNED;\n\t\t\telse if (tab.register_changed[i] ===  REGISTER_NEWASSIGNED)\n\t\t\t\ttab.register_changed[i] = REGISTER_ASSIGNED;\n\t\t}\n\t}\n\n\taddTabFull = (name, code, machine_code, mem_size, isa, get_example_code) => {\n\t\tlet selected = this.props.tabs.length;\n\t\t\n\t\tlet core = OakJS.CoreFactory.getCore(isa, mem_size, this.virtual_os, []);\n\n\t\tlet new_tab = {\n\t\t\tname: name,\n\t\t\tcontent: get_example_code ? core.instructionSet.exampleCode : code,\n\t\t\tlog: [],\n\t\t\tconsole: [],\n\t\t\tmachine_code: machine_code,\n\t\t\tcore: core,\n\t\t\tregister_changed: [],\n\t\t\trunningStatus: SimulatingStatus.Stopped, \n\t\t\tinstruction_set: isa,\n\t\t\tconsole_input: \"\",\n\t\t\tconsole_input_type: CONSOLE_INPUT_NONE,\n\t\t\tcursor_pos: 0\n\t\t};\n\n\t\tnew_tab.register_changed = Array.from({ length: core.registerFile.physicalFile.length }, () => REGISTER_UNASSIGNED);\n\t\t\n\t\t// TODO: Send to Project Settings\n\t\tthis.props.setProjectSettings(name, mem_size, isa);\n\t\t\n\t\tthis.props.addTab(new_tab);\n\t\tthis.props.selectTab(selected);\n\t}\n\n\taddTab = (name, code, machine_code) => {\n\t\tthis.addTabFull(name, code, machine_code, 4096, this.getDefaultISA(), false);\n\t}\n\n\taddTabDefault = () => {\n\t\tthis.addTabFull(\"New Tab\", \"\", [], 4096, this.getDefaultISA(), true);\n\t}\n\n\taddTabDefaultRISCV = () => {\n\t\tthis.addTabFull(\"New Tab\", \"\", [], 4096, \"RISCV\", true);\n\t}\n\n\taddTabDefaultMIPS = () => {\n\t\tthis.addTabFull(\"New Tab\", \"\", [], 4096, \"MIPS\", true);\n\t}\n\n\tgetDefaultISA = () => {\n\t\treturn OakJS.CoreFactory.getCoreList()[0];\n\t}\n\n\thandleUpload = (event) => {\n\t\tlet files = this.component_input.current.files;\n\t\tif (files.length <= 0) return;\n\n\t\tlet file = files[0];\n\t\tif (this.is_upload_bin) {\n\t\t\tlet name = file.name;\n\t\t\tlet blob = file.slice(0, file.size);\n\t\t\tlet fr = new FileReader();\n\t\t\tlet me = this;\n\t\t\tfr.addEventListener(\"load\", function ()\n\t\t\t{\n\t\t\t\tvar bytes = new Uint8Array(this.result);\n\t\t\t\tme.addTab(name, \"\", Array.from(bytes));\n\t\t\t});\n\t\t\tfr.readAsArrayBuffer(blob);\n\t\t}\n\t\telse {\n\t\t\tlet name = file.name;\n\t\t\tlet blob = file.slice(0, file.size);\n\t\t\tlet fr = new FileReader();\n\t\t\tlet me = this;\n\t\t\tfr.addEventListener(\"load\", function ()\n\t\t\t{\n\t\t\t\tlet res = this.result;\n\t\t\t\t\n\t\t\t\tme.addTab(name, res, []);\n\t\t\t});\n\t\t\tfr.readAsText(blob);\n\t\t}\n\t}\n\n\thandleLoadAsm = () => {\n\t\tthis.is_upload_bin = false;\n\t\tthis.component_input.current.click();\n\t}\n\n\thandleLoadBin = () => {\n\t\tthis.is_upload_bin = true;\n\t\tthis.component_input.current.click();\n\t}\n\n\thandleDownloadAsm = () => {\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tvar data = tab.content;\n\t\tif (data.length === 0)\n\t\t\treturn;\n\t\t\t\n\t\tvar el = document.createElement(\"a\");\n\t\tvar blob = new Blob([data],\n\t\t{\n\t\t\ttype: \"text/plain\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar name = tab.name + \".s\";\n\t\tel.setAttribute(\"href\", blobLink);\n\t\tel.setAttribute(\"download\", name);\n\t\tel.style.display = \"none\";\n\t\tdocument.body.appendChild(el);\n\t\tel.click();\n\t\tdocument.body.removeChild(el);\n\t}\n\t\n\tdownloadBin = () => {\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tvar data = tab.machine_code;\n\t\tvar byteArray = new Uint8Array(data);\n\t\tvar blob = new Blob([byteArray],\n\t\t{\n\t\t\ttype: \"application/octet-stream\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar element = document.createElement(\"a\");\n\t\tvar name = tab.name + \".bin\";\n\t\telement.setAttribute(\"href\", blobLink);\n\t\telement.setAttribute(\"download\", name);\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tdownloadBinH = () => {\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tlet finalFile = tab.machine_code.map(byte=> byte.toString(16).padStart(2, \"0\")).join(\"\\n\");\n\n\t\tvar blob = new Blob([finalFile],\n\t\t{\n\t\t\ttype: \"text/plain\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar element = document.createElement(\"a\");\n\t\tvar name = tab.name + \".hex\";\n\t\telement.setAttribute(\"href\", blobLink);\n\t\telement.setAttribute(\"download\", name);\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tdownloadRam = () =>{\n\t\tconst current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tvar data = tab.core.memory;\n\t\tvar byteArray = new Uint8Array(data);\n\t\tvar blob = new Blob([byteArray],\n\t\t{\n\t\t\ttype: \"application/octet-stream\"\n\t\t});\n\t\tvar blobLink = URL.createObjectURL(blob);\n\t\tvar element = document.createElement(\"a\");\n\t\tvar name = tab.name + \".bin\";\n\t\telement.setAttribute(\"href\", blobLink);\n\t\telement.setAttribute(\"download\", name);\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element)\n\t}\n\n\tresetUI = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tabs = this.props.tabs;\n\t\tlet tab = tabs[current_tab];\n\t\ttab.log = [];\n\t\ttab.console = [];\n\t\ttab.register_changed = Array.from({ length: tab.register_changed.length }, () => REGISTER_UNASSIGNED);\n\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\n\t\ttab.console_input = \"\";\n\t\ttab.console_input_type = CONSOLE_INPUT_NONE;\n\t\ttab.cursor_pos = 0;\n\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\treset = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tabs = this.props.tabs;\n\t\tlet tab = tabs[current_tab];\n\n\t\ttab.core.reset();\n\t\tthis.resetUI();\n\t}\n\n\tuiSimulate = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (tab.console_input_type !== CONSOLE_INPUT_NONE)\n\t\t\treturn;\n\n\t\tif (tab.runningStatus === SimulatingStatus.Stopped)\n\t\t\tthis.uiAssemble();\n\n\t\tlet core =  tab.core;\n\n\t\ttab.runningStatus = SimulatingStatus.Play;\n\n\t\twhile (true) {\n\t\t\tlet fetch = core.fetch();\n\t\t\tif (fetch !== null) {\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, fetch);\n\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\n\t\t\tlet decode = core.decode(); // Decode has the decoded instruction on success\n\t\t\t\n\t\t\tif (decode === null) {\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, decode_error_msg);\n\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttab.log.push(decode);\n\t\t\t}\n\t\t\n\t\t\tlet execute = core.execute();\n\t\t\tif (execute !== null) {\n\t\t\t\tif (execute !== 'HALT' && execute !== 'WAIT') { // If HALT, then an environment call has been executed.\n\t\t\t\t\tthis.addConsoleMessage(MessageType.Error, execute);\n\t\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.checkUpdatedTabs();\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\tuiStepByStep = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (tab.console_input_type !== CONSOLE_INPUT_NONE)\n\t\t\treturn;\n\n\t\tif (tab.runningStatus === SimulatingStatus.Stopped)\n\t\t\tthis.uiAssemble();\n\n\t\tlet core = tab.core;\n\n\t\ttab.runningStatus = SimulatingStatus.Step;\n\n\t\tlet fetch = core.fetch();\n\t\tif (fetch !== null) {\n\t\t\tthis.addConsoleMessage(MessageType.Error, fetch);\n\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\tthis.props.updateTab(current_tab, tab);\n\t\t\treturn;\n\t\t}\n\t\n\t\tlet decode = core.decode(); // Decode has the decoded instruction on success\n\t\t\n\t\tif (decode === null) {\n\t\t\tthis.addConsoleMessage(MessageType.Error, decode_error_msg);\n\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\tthis.props.updateTab(current_tab, tab);\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\ttab.log.push(decode);\n\t\t}\n\t\n\t\tlet execute = core.execute();\n\t\tif (execute !== null) {\n\t\t\tif (execute !== 'HALT' && execute !== 'WAIT') { // If HALT, then an environment call has been executed.\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, execute);\n\t\t\t\ttab.runningStatus = SimulatingStatus.Stopped;\n\t\t\t}\n\t\t}\n\n\t\tthis.checkUpdatedTabs();\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\t\n\tuiAssemble = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\t\tvar val = tab.content;\n\t\tif (val === \"\") {\n\t\t\treturn;\n\t\t}\n\n\t\tvar core = tab.core;\n\t\tthis.reset();\n\t\tlet assembler = new OakJS.Assembler(core.instructionSet, OakJS.Endianness.little);\n\t\t\n\t\tlet lines = OakJS.Line.arrayFromFile(val);\n\t\t\n\t\tlet passZero = assembler.assemble(lines, 0); // Assembler Pass 0. Returns Line array with errored lines, which are in line.invalidReason\n\t\tif (passZero.length !== 0) {\n\t\t\tfor (let i in passZero) {\n\t\t\t\tlet line = passZero[i];\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Assembly error on line {line.number}:</b> {line.invalidReason}.</span>);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tlet pass = null;\n\t\tlet passCounter = 1;\n\t\tdo { // Subsequent assembler passes. Typically one pass is needed, but when there's a lot of variance in ISA word sizes, another pass might be needed.\n\t\t\tpass = assembler.assemble(lines, passCounter);\n\t\t\tif (pass.length !== 0) {\n\t\t\t\tfor (let i in pass) {\n\t\t\t\t\tlet line = pass[i];\n\t\t\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Assembly error on line {line.number}:</b> {line.invalidReason}.</span>);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpassCounter += 1;\n\t\t} while (pass === null);\n\n\t\tlet machineCode = lines.map(line=> line.machineCode).reduce((a, b)=> a.concat(b), []); // Get machine code from lines\n\t\tcore.memset(0, machineCode); // memset\n\n\t\tthis.checkUpdatedTabs();\n\n\t\tlet error = false; //output.errorMessage===null;\n\t\tif (!error) {\n\t\t\ttab.machine_code = machineCode;\n\t\t\tthis.addConsoleMessage(MessageType.Success, <span><b>Complete:</b> Assembly succeeded.</span>);\n\t\t}\n\t\telse {\n\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Error:</b> Assembler failed.</span>);\n\t\t}\n\n\t\tthis.props.updateTab(current_tab, tab);\n\t}\n\n\thandleSettingsChange = () => {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tif (!tab)\n\t\t\treturn;\n\n\t\tlet file_name = this.props.project_settings.file_name;\n\t\tlet isa_type = this.props.project_settings.isa;\n\t\tlet memory_size = this.props.project_settings.memory_size;\n\n\t\ttab.name = file_name;\n\n\t\tlet diff_isa = isa_type !== tab.instruction_set;\n\t\tlet diff_mem = memory_size !== tab.core.memorySize;\n\n\t\tlet new_isa_found = false;\n\n\t\tif (diff_isa || diff_mem) {\n\t\t\tlet instruction_sets = OakJS.CoreFactory.ISAs;\n\t\t\tif (instruction_sets[isa_type]) {\n\t\t\t\tnew_isa_found = true;\n\t\t\t\ttab.core = OakJS.CoreFactory.getCore(isa_type, memory_size, this.virtual_os, []);\n\t\t\t\ttab.instruction_set = isa_type;\n\t\t\t\tthis.resetUI();\n\t\t\t}\n\n\t\t\tif (!new_isa_found) {\n\t\t\t\tthis.addConsoleMessage(MessageType.Error, <span><b>Error: </b>Could not find ISA {isa_type}.</span>);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.updateTab(current_tab, tab);\n\n\t\tif (new_isa_found) {\n\t\t\tif (diff_isa)\n\t\t\t\tthis.addConsoleMessage(MessageType.Success, <span><b>Complete: </b>Successfully changed ISA to {isa_type}.</span>);\n\n\t\t\tif (diff_mem)\n\t\t\t\tthis.addConsoleMessage(MessageType.Success, <span><b>Complete: </b>Successfully changed memory size to {memory_size}.</span>);\n\t\t}\n\t}\n\n\thandleStartDragX = (event) => {\n\t\twindow.addEventListener(\"mousemove\", this.handleDragX);\n\t\twindow.addEventListener(\"mouseup\", this.handleStopDragX);\n\t}\n\n\thandleX = (event) => {\n\t\tlet x = event.pageX;\n\t\tlet w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\t\tx = w - x;\n\n\t\tif (x < 200) {\n\t\t\tx = 200;\n\t\t}\n\t\telse if (x > w - 200) {\n\t\t\tx = w - 200;\n\t\t}\n\n\t\tthis.setState({panel_x: x});\n\t}\n\n\thandleX = (event) => {\n\t\tlet x = event.pageX;\n\t\tlet w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\t\tx = w - x;\n\n\t\tif (x < 150) {\n\t\t\tx = 150;\n\t\t}\n\t\telse if (x > w - 200) {\n\t\t\tx = w - 200;\n\t\t}\n\n\t\tthis.setState({panel_x: x});\n\t}\n\n\thandleY = (event) => {\n\t\tlet y = event.pageY + 20;\n\t\tlet h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\t\ty =  h - y;\n\t\t\n\t\tif (y < 50) {\n\t\t\ty = 50;\n\t\t}\n\t\telse if (y > h - 50) {\n\t\t\ty = h - 50;\n\t\t}\n\n\t\tthis.setState({panel_y: y});\n\t}\n\n\thandleDragX = (event) => {\n\t\tthis.handleX(event);\n\t}\n\n\thandleStopDragX = (event) => {\n\t\tthis.handleX(event);\n\t\twindow.removeEventListener(\"mousemove\", this.handleDragX);\n\t\twindow.removeEventListener(\"mouseup\", this.handleStopDragX);\n\t}\n\n\thandleStartDragY = (event) => {\n\t\twindow.addEventListener(\"mousemove\", this.handleDragY);\n\t\twindow.addEventListener(\"mouseup\", this.handleStopDragY);\n\t}\n\n\thandleDragY = (event) => {\n\t\tthis.handleY(event);\n\t}\n\n\thandleStopDragY = (event) => {\n\t\tthis.handleY(event);\n\t\twindow.removeEventListener(\"mousemove\", this.handleDragY);\n\t\twindow.removeEventListener(\"mouseup\", this.handleStopDragY);\n\t}\n\n\tshowSettings = () => {\n\t\tthis.props.setSettingsVisible(true);\n\t}\n\n\tshowHelp = () => {\n\t\tthis.props.setHelpVisible(true);\n\t}\n\n\tshowAbout =  () => {\n\t\talert(1);\n\t\tthis.props.setAboutVisible(true);\n\t}\n\n\trender() {\n\t\tlet current_tab = this.props.selectedtab;\n\t\tlet tab = this.props.tabs[current_tab];\n\n\t\tlet has_tabs = this.props.tabs.length > 0;\n\t\tlet show_input = false;\n\t\t\n\t\tif (tab)\n\t\t\tshow_input = tab.console_input_type !== CONSOLE_INPUT_NONE;\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<About />\n\t\t\t\t<Help />\n\t\t\t\t<Settings\n\t\t\t\t\tcanhandleinput={!show_input}\n\t\t\t\t\tfn_new={this.addTabDefault}\n\t\t\t\t\tfn_load={this.handleLoadAsm}\n\t\t\t\t\tfn_save={this.handleDownloadAsm}\n\t\t\t\t\tfn_ass={this.uiAssemble}\n\t\t\t\t\tfn_sim={this.uiSimulate}\n\t\t\t\t\tfn_step={this.uiStepByStep} />\n\t\t\t\t<Navigation\n\t\t\t\t\tassemble={this.uiAssemble}\n\t\t\t\t\tsimulate={this.uiSimulate}\n\t\t\t\t\tstepbystep={this.uiStepByStep}\n\t\t\t\t\tdownloadRam={this.downloadRam}\n\t\t\t\t\tdownloadBin={this.downloadBin}\n\t\t\t\t\tdownloadBinH={this.downloadBinH}\n\t\t\t\t\thandleAddTabRiscv={this.addTabDefaultRISCV}\n\t\t\t\t\thandleAddTabMips={this.addTabDefaultMIPS}\n\t\t\t\t\thandleLoadAsm={this.handleLoadAsm}\n\t\t\t\t\thandleLoadBin={this.handleLoadBin}\n\t\t\t\t\thandleDownloadAsm={this.handleDownloadAsm}\n\t\t\t\t/>\n\t\t\t\t{!has_tabs && <div className=\"no_tabs\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2><Translate id=\"welcome.title\">Welcome to Oak.js</Translate></h2>\n\t\t\t\t\t\t<p><Translate id=\"welcome.subtitle\">Oak.js is an online javascript IDE, Assembler, Disassembler, and Simulator for assembly languages such as RISC-V and MIPS.</Translate></p>\n\t\t\t\t\t\t<button className=\"button\" onClick={this.addTabDefault}><Translate id=\"menus.add_tab\">Add a Tab</Translate></button>\n\t\t\t\t\t\t<button className=\"button\" onClick={this.handleLoadAsm}><Translate id=\"menus.load_assembly\">Load Assembly</Translate></button>\n\t\t\t\t\t\t<button className=\"button\" onClick={this.handleLoadBin}><Translate id=\"menus.load_binary\">Load Binary</Translate></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t\t{has_tabs && <div className=\"grid\" style={{gridTemplateColumns: `auto ${this.state.panel_x}px`, gridTemplateRows: `auto calc(${this.state.panel_y}px)`}}>\n\t\t\t\t\t<TextEditor is_disabled={show_input} addTab={this.addTabDefault} />\n\t\t\t\t\t<PanelContainer handleStartDrag={this.handleStartDragY} className=\"panel_bottom\">\n\t\t\t\t\t\t<PanelConsole show_input={show_input} input={tab.console_input} />\n\t\t\t\t\t\t<PanelMachineCode />\n\t\t\t\t\t\t<PanelMemory />\n\t\t\t\t\t\t<PanelLog />\n\t\t\t\t\t</PanelContainer>\n\t\t\t\t\t<PanelContainer handleStartDrag={this.handleStartDragX} className=\"panel_side\">\n\t\t\t\t\t\t<PanelSettings submitChanges={this.handleSettingsChange} />\n\t\t\t\t\t\t<PanelRegisters />\n\t\t\t\t\t\t<PanelConversion />\n\t\t\t\t\t</PanelContainer>\n\t\t\t\t</div>}\n\t\t\t\t<input type=\"file\" onChange={this.handleUpload} ref={this.component_input} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst appStateToProps = state => {\n\treturn {\n\t\ttabs: state.tabs,\n\t\tselectedtab: state.selectedtab,\n\t\tproject_settings: state.project_settings\n\t};\n};\n\nconst appDispatchToProps = (dispatch, ownProps) => ({\n\taddTab: (tab) => dispatch(addTab(tab)),\n\tupdateTab: (index, tab) => dispatch(updateTab(index, tab)),\n\tselectTab: (id) => dispatch(selectTab(id)),\n\tsetProjectSettings: (n, s, i) => dispatch(setProjectSettings(n, s, i)),\n\tsetHelpVisible: (visible) => dispatch(setHelpVisible(visible)),\n\tsetAboutVisible: (visible) => dispatch(setAboutVisible(visible)),\n\tsetSettingsVisible: (visible) => dispatch(setSettingsVisible(visible))\n});\n\nexport default withLocalize(\n\tconnect(appStateToProps,\n\t\t\tappDispatchToProps\n\t)(App));","const tabReducer = (state = [], action) => {\n    switch (action.type) {\n        case 'ADD_TAB':\n            return [\n                ...state,\n                action.tab\n            ];\n        case 'UPDATE_TAB': {\n            return state.map((t, index) => {\n                if (index === action.index) {\n                    return Object.assign({}, t, action.tab);\n                }\n              \n              return t;\n            });\n        }\n        case 'DELETE_TAB':\n            return [\n                ...state.slice(0, action.id),\n                ...state.slice(action.id + 1)\n            ];\n        default:\n            return state;\n    }\n}\n  \nexport default tabReducer;","const selectedTabReducer = (state = 0, action) => {\n    switch (action.type) {\n        case 'SELECT_TAB':\n            return action.id;\n        default:\n            return state;\n    }\n}\n  \nexport default selectedTabReducer;","const globalSettingsReducer = (state = {}, action) => {\n    return state;\n}\n  \nexport default globalSettingsReducer;","const projectSettingsReducer = (state = {}, action) => {\n    switch (action.type) {\n        case 'UPDATE_PROJECT_SETTINGS':\n            return action.payload;\n        default:\n            return state;\n    }\n}\n  \nexport default projectSettingsReducer;","const selectedTabReducer = (state = {\n    settings: false,\n    help: false\n}, action) => {\n    switch (action.type) {\n        case 'SET_HELP_VISIBLE':\n            return {\n                ...state,\n                help: action.state\n            };\n        case 'SET_ABOUT_VISIBLE':\n            return {\n                ...state,\n                about: action.state\n            };\n        case 'SET_SETTINGS_VISIBLE':\n            return {\n                ...state,\n                settings: action.state\n            };\n        default:\n            return state;\n    }\n}\n  \nexport default selectedTabReducer;","import { combineReducers } from 'redux';\nimport tabs from './tab';\nimport selectedtab from './selectedtab';\nimport global_settings from './globalsettings';\nimport project_settings from './projectsettings';\nimport panel_visibility from './setvisibility';\nimport { localizeReducer } from \"react-localize-redux\";\n\nexport default combineReducers({\n    tabs,\n    selectedtab,\n    global_settings,\n    project_settings,\n    panel_visibility,\n    localize: localizeReducer\n});","// React Imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// App Imports\nimport App from './app';\n\n// Redux Store Imports\nimport allReducers from './reducers'\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { LocalizeProvider } from 'react-localize-redux';\n\n// Create a store...\nconst store = createStore(\n    // ... with the list of all reducers\n    allReducers,\n    {},\n    // ...connext it to the dev tools\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\n\n// Render the app with an attached memory store to the element #root\nReactDOM.render(\n    <LocalizeProvider store={store}>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </LocalizeProvider>,\n    \n    document.getElementById('root'));\n"],"sourceRoot":""}