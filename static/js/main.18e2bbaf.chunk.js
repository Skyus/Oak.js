(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e){e.exports={welcome:{title:"Welcome to Oak.js",subtitle:"Oak.js is an online javascript IDE, Assembler, Disassembler, and Simulator for assembly languages such as RISC-V and MIPS."},menus:{about:"About",settings:"Settings",help:"Help",add_tab:"Add Tab",add_tab_riscv:"Add Tab RISC-V",add_tab_mips:"Add Tab MIPS",load_assembly:"Load Assembly",load_binary:"Load Binary",download_assembly:"Download Assembly",download_binary:"Download Binary",download_memory:"Download Memory"},panels:{projectsettings:{name:"Project Settings",file_name:"File Name",isa:"File Name",memory_size:"Memory Size"}},about:{title:"About",core_devs:"Developers",additional_devs:"Special Thanks",translators:"Translators"},help:{title:"Help",data:"<p>Oak.js is a web-based assembler, disassembler and simulator for the RISCV instruction set architecture. It is designed after version 2.1 and currently supports most of the RV32I base integer instruction set.</p><p>Oak.js starts executing from address 0 and implements an \"amorphous\" structure; i.e., there is no distinction between program data and machine code in binary files. It is the programmer's responsibility to make sure static data is not interpreted as instructions (to halt execution, see environment call 10). </p><h3>Instruction Support</h3><h4>RISC-V</h4><p>Oak.js supports the RV32I base integer instruction set, save for the following instructions: </p> <p><i> fence, fence.i, ebreak, csrrw, csrrs, cssrc, csrrwi, csrrsi, csrrci </i></p> <h4>MIPS</h4> <p> The entire MIPS core integer instruction set is supported. </p> <h4>Pseudoinstructions</h4> <p> As a limitation of Oak.js's architecture, very few pseudoinstructions are supported, and they all expand into only one instruction. The currently supported pseudoinstructions for RISC-V are li, mv, la, jr, scall, and syscall (the last two just mirror ecall). MIPS does not support pseudoinstructions. </p> <h4>Environment Calls</h4> <p> The calling convention is as follows: </p> <p> a7<sup>RISC-V</sup>/v0<sup>MIPS</sup> - Service Number <br /> a0-a3 - Arguments </p> <p> The return value will be placed in the same register as the service number. </p> <p> Oak.js supports four environment calls at the moment. </p> <ul> <li><b>1: Print Integer.</b> Arguments: 0 - Integer to print. Prints integer to console.</li> <li><b>4: Print String.</b> Arguments: 0 - Address of string to print in memory. Prints string to console.</li> <li><b>5: Read Integer.</b> Arguments: None. Reads integer from user, stores in a7.</li> <li><b>8: Read String.</b> Arguments: 0 - Address in memory to read string to.</li> <li><b>10: Exit.</b> Arguments: None. Concludes execution of the current program.</li> </ul> <h3>Usage</h3> <p> Input text into the main editor field. Assemble using the <img src='images/assembleHelp.png' class='help_icon' alt='assemble' /> button. You can press <img src='images/playAssembleHelp.png' class='help_icon' alt='assemble + play' /> to assemble, and then start the simulation. Alternatively, when you have a blank codebase but you have machine code, if you press <img src='images/playHelp.png' class='help_icon' alt='play' /> you can simply directly simulate the machine code. </p> <p> You can create new tabs to manage multiple files as well, and the tabs do not share any memory or registers so you can keep different things running, no problem. You can add a new tab by going to file and pressing add tab. </p> <p> The output panel has three output modes: console, memory and instructions. The console shows the output generated by environment calls and shows the status of the editor. The memory shows the state of the memory following simulation. The Instruction Log shows the step by step disassembly of the program. You can switch between them in the select drop down menu in the top right of the output panel. </p> <p> Registers are also displayed to the right side menu. Simply press the register tab. You can select the view type under the dropdown menu. </p> <h4>Uploading</h4> <p> You can also upload either assembly code or binary files directly to Oak.js. </p> <p> To do it, go to the file menu in the top left of the editor, and and press \"Load Binary\" or \"Load Assembly\" to upload a file. Keep in mind, binaries and assembly files must be in the correct file. After assembly files are uploaded, you need to press the assemble <img src='images/assembleHelp.png' class='help_icon' alt='assemble' /> button. After either that or the binary file, you must press play <img src='images/playHelp.png' class='help_icon' alt='play' />. </p> <h4>Downloading</h4> <p> Downloading is similar. Simply open the file menu, and press \"Download RAM\", \"Download Binary\", or \"Download Assembly\". The first two must be opened in a hex editor or other program capable of opening binaries. Assembly files can be loaded in any text editor. </p> <h4>Keyboard Shortcuts</h4> <p> <b>F8</b>: Assemble.<br /> <b>F9</b>: Assemble if there's assembly code, and simulate.<br /> <b>F10</b>: Step by Step (requires assembly first). </p>"}}},32:function(e,t,n){e.exports=n(56)},56:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(26),i=n.n(s),l=n(1),o=n(2),u=n(5),c=n(3),p=n(4),d=n(9),m=n(27),h=n.n(m),g=(n(45),n(47),"SELECT_TAB"),f="ADD_TAB",b="UPDATE_TAB",v="DELETE_TAB",y="UPDATE_PROJECT_SETTINGS",w="SET_HELP_VISIBLE",_="SET_ABOUT_VISIBLE",E="SET_SETTINGS_VISIBLE",S=function(e){return{type:E,state:e}},k=function(e){return{type:w,state:e}},A=function(e){return{type:_,state:e}},C=function(e){return{type:g,id:e}},O=function(e,t){return{type:b,index:e,tab:t}},F=function(e,t,n){return{type:y,payload:{file_name:e,memory_size:t,isa:n}}},j=n(7),T=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).addTab=function(){n.props.addTab()},n.handleTabChange=function(e){n.props.selectTab(e);var t=n.props.tabs[e];t&&n.props.setProjectSettings(t.name,t.core.memorySize,t.instruction_set)},n.handleTabClose=function(e,t){e.stopPropagation();var r=n.props.selectedtab;r>=t&&(r-=1),r=Math.min(Math.max(r,0),n.props.tabs.length-1),n.props.selectTab(r);var a=n.props.tabs[r];a&&n.props.setProjectSettings(a.name,a.core.memorySize,a.instruction_set),n.props.deleteTab(t)},n.setEditorValue=function(e){var t=n.props.selectedtab,r=n.props.tabs[t];r.content=e,n.props.updateTab(t,r)},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tabs;return a.a.createElement("main",{id:"text_editor",className:"text_editor"},a.a.createElement("ul",{className:"page_tabs"},t.map(function(t,n){return a.a.createElement("li",{onClick:function(){return e.handleTabChange(n)},key:n,className:e.props.selectedtab===n?"selected":""},a.a.createElement("span",null,t.name),a.a.createElement("div",{onClick:function(t){return e.handleTabClose(t,n)}}))}),a.a.createElement("li",{className:"add_tab",onClick:this.addTab})),a.a.createElement(h.a,{mode:"java",theme:"github",onChange:this.setEditorValue,width:"100%",height:"",name:"editor_area",className:"editor_area",value:t[this.props.selectedtab].content,readOnly:this.props.is_disabled,editorProps:{$blockScrolling:1/0}}))}}]),t}(r.Component),I=Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}},function(e,t){return{selectTab:function(t){return e(C(t))},updateTab:function(t,n){return e(O(t,n))},deleteTab:function(t){return e(function(e){return{type:v,id:e}}(t))},setProjectSettings:function(t,n,r){return e(F(t,n,r))}}})(T),z=n(6),x=0,R=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e="",t=this.props.tabs[this.props.selectedtab];return t&&(t.runningStatus===x&&(e=" assemble_ready"),0!==t.console_input_type&&(e+=" simulate_prevent_input")),a.a.createElement("nav",{id:"navigation",className:"navigation"},a.a.createElement("ul",null,a.a.createElement("li",{className:"oak_logo"},a.a.createElement("ul",{className:"drop_down"},a.a.createElement("li",{onClick:this.props.handleAddTabRiscv},a.a.createElement(z.b,{id:"menus.add_tab_riscv"})),a.a.createElement("li",{onClick:this.props.handleAddTabMips},a.a.createElement(z.b,{id:"menus.add_tab_mips"})),a.a.createElement("li",{onClick:this.props.handleLoadAsm},a.a.createElement(z.b,{id:"menus.load_assembly"})),a.a.createElement("li",{onClick:this.props.handleLoadBin},a.a.createElement(z.b,{id:"menus.load_binary"})),a.a.createElement("li",{onClick:this.props.handleDownloadAsm},a.a.createElement(z.b,{id:"menus.download_assembly"})),a.a.createElement("li",{onClick:this.props.downloadBin},a.a.createElement(z.b,{id:"menus.download_binary"})),a.a.createElement("li",{onClick:this.props.downloadRam},a.a.createElement(z.b,{id:"menus.download_memory"})))),a.a.createElement("li",{onClick:this.props.showSettings},a.a.createElement(z.b,{id:"menus.settings"})),a.a.createElement("li",{onClick:this.props.showHelp},a.a.createElement(z.b,{id:"menus.help"})),a.a.createElement("li",{onClick:this.props.showAbout},a.a.createElement(z.b,{id:"menus.about"}))),a.a.createElement("div",{className:"buttons_right"},a.a.createElement("button",{className:"assemble",onClick:this.props.assemble}),a.a.createElement("button",{className:"simulate".concat(e),onClick:this.props.simulate}),a.a.createElement("button",{className:"simulate_step".concat(e),onClick:this.props.stepbystep})))}}]),t}(r.Component),L=Object(z.d)(Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}},function(e,t){return{showHelp:function(t){return e(k(t))},showAbout:function(t){return e(A(t))},showSettings:function(t){return e(S(t))}}})(R)),D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).renderTabs=function(){return a.a.createElement("ul",{className:"panel_tabs"},a.a.Children.map(n.props.children,function(e,t){return a.a.createElement("li",{className:n.state.selected===t?"selected":"",key:e.type.display_name,onClick:function(e){return n.handleClickTab(e,t)}},e.type.display_name)}))},n.state={selected:0},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleClickTab",value:function(e,t){e.preventDefault(),this.setState({selected:t})}},{key:"render",value:function(){var e=this,t=this.props.children,n=a.a.Children.map(t,function(t,n){return e.state.selected===n&&a.a.cloneElement(t)});return a.a.createElement("div",{id:"panel_container",className:"panel_container ".concat(this.props.className)},a.a.createElement("div",{onMouseDown:this.props.handleStartDrag,className:"panel_drag"}),this.renderTabs(),n)}}]),t}(r.Component),N=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"select_group"},a.a.createElement("select",{onChange:this.props.onChange,value:this.props.value,style:{backgroundImage:"url(images/icons/input_select_arrow.svg), url(".concat(this.props.icon,")")}},this.props.children),a.a.createElement("label",{className:"group_label"},this.props.placeholder))}}]),t}(r.Component);function M(e,t){for(var n=e,r=0;r<t-e.length;r++)n="0"+n;return n}function B(e){return e}var $=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleType=function(e){n.setState({register_type:parseInt(e.target.value,10)})},n.translateRegister=function(e){switch(n.state.register_type){default:case 0:return M((e>>>0).toString(16),2);case 1:return M((e>>>0).toString(10),3);case 2:return M((e>>>0).toString(8),3);case 3:return M((e>>>0).toString(2),8)}},n.state={register_type:0},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tabs;if(0===t.length)return a.a.createElement("div",null);var n=t[this.props.selectedtab].core.memory,r=0===n.length;return a.a.createElement("div",{id:"panel_memory",className:"panel panel_memory"},r&&a.a.createElement("span",{className:"panel_empty"},"Memory Empty"),!r&&a.a.createElement(N,{onChange:this.handleType,icon:"images/icons/input_type.svg",placeholder:"Display Type",defaultValue:"0"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Decimal"),a.a.createElement("option",{value:"2"},"Octal"),a.a.createElement("option",{value:"3"},"Binary")),!r&&n.map(function(t,n){var r=e.translateRegister(t);return a.a.createElement("span",{key:n},r," ")}))}}]),t}(r.Component);$.display_name="memory";var P=Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}})($),Z=0,U=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.tabs[this.props.selectedtab];if(!e)return a.a.createElement("div",null);var t=e.console,n=0===t.length,r=e.runningStatus!==Z;return a.a.createElement("div",{id:"panel_console",className:"panel panel_console"},n&&a.a.createElement("span",{className:"panel_empty"},"Console Empty"),!n&&t.map(function(e,t){return a.a.createElement("div",{key:t},e)}),this.props.show_input&&a.a.createElement("span",null,a.a.createElement("span",{className:"blinker"},"<<")," ",this.props.input),r&&a.a.createElement("div",{className:"running_console"},"Simulation still not completed..."))}}]),t}(r.Component);U.display_name="console";var V=Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}})(U),H=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=0===this.props.core.log.length;return a.a.createElement("div",{id:"panel_log",className:"panel panel_log"},e&&a.a.createElement("span",{className:"panel_empty"},"Instruction Log Empty"),!e&&this.props.core.log.map(function(e,t){return a.a.createElement("div",{key:t},e)}))}}]),t}(r.Component);H.display_name="log";var K,W,X=Object(j.b)(function(e){return{core:e.tabs[e.selectedtab]}})(H),Y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).handleClose=function(e){e.preventDefault(),n.props.setHelpVisible(!1)},n.handleStopClose=function(e){e.stopPropagation()},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"help",onClick:this.handleClose,className:"settings_overlay overlay fader".concat(this.props.visible?" fader_shown":"")},a.a.createElement("div",{className:"settings_container",onClick:this.handleStopClose},a.a.createElement("button",{className:"floating_close",onClick:this.handleClose}),a.a.createElement("h2",null,a.a.createElement(z.b,{id:"help.title"})),a.a.createElement("div",{className:"overlay_contents"},a.a.createElement(z.b,{id:"help.data",options:{renderInnerHtml:!0}}),a.a.createElement("button",{className:"button",onClick:this.handleClose},"Close"))))}}]),t}(r.Component),J=Object(z.d)(Object(j.b)(function(e){return{visible:e.panel_visibility.help}},function(e,t){return{setHelpVisible:function(t){return e(k(t))}}})(Y)),G={core:[{affiliation:"Student, American University in Cairo",pic:"donn.jpg",name:'Mohamed "Donn" Gaber',job:"Assembler / Simulator Developer",link:"https://donn.github.io/",desc:"Hi I play video games"},{affiliation:"Student, American University in Cairo",pic:"karimio.jpg",name:"Karim Abdel Hamid",job:"Primary Front-End/IDE Developer",link:"https://karimio.github.io/",desc:"I'm a game and web developer; love to write stories, play guitar, & paint."}],additional:[{affiliation:"Student, American University in Cairo",pic:"ali_khaled.jpg",name:"Ali Khaled",job:"MIPS co-developer",link:"https://github.com/loshya",desc:"\u308a\u3085\u3046\u304c\u308f\u304c\u3066\u304d\u3092\u30af\u30e9\u30a6\uff01"},{affiliation:"Professor, American University in Cairo",pic:"shalan.jpg",name:"Dr. Mohamed Shalan",job:"Advisor",link:"https://github.com/shalan",desc:"Founder at Cloud V, Open Hardware Researcher and Advocate"}],translators:[]},Q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).handleClose=function(e){e.preventDefault(),n.props.setAboutVisible(!1)},n.handleStopClose=function(e){e.stopPropagation()},n.printdev=function(e){return e.map(function(e,t){return a.a.createElement("a",{key:t,href:e.link},a.a.createElement("img",{src:"images/about/".concat(e.pic)}),a.a.createElement("h4",null,e.name),a.a.createElement("span",null,e.job),a.a.createElement("span",null,e.affiliation),a.a.createElement("p",null,e.desc))})},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"about",onClick:this.handleClose,className:"settings_overlay overlay fader".concat(this.props.visible?" fader_shown":"")},a.a.createElement("div",{className:"settings_container",onClick:this.handleStopClose},a.a.createElement("button",{className:"floating_close",onClick:this.handleClose}),a.a.createElement("h2",null,a.a.createElement(z.b,{id:"about.title"})),a.a.createElement("div",{className:"overlay_contents"},a.a.createElement("div",{className:"devlist"},a.a.createElement("h3",null,a.a.createElement(z.b,{id:"about.core_devs"})),this.printdev(G.core)),a.a.createElement("div",{className:"devlist"},a.a.createElement("h3",null,a.a.createElement(z.b,{id:"about.additional_devs"})),this.printdev(G.additional)),G.translators.length>0&&a.a.createElement("div",{className:"translatorlist"},a.a.createElement("h3",null,a.a.createElement(z.b,{id:"about.translators"})),G.translators.map(function(e,t){return a.a.createElement("a",{key:t,href:e.link},a.a.createElement("h4",null,e.name),a.a.createElement("span",null,e.lang))}))),a.a.createElement("button",{className:"button",onClick:this.handleClose},"Close")))}}]),t}(r.Component),q=Object(z.d)(Object(j.b)(function(e){return{visible:e.panel_visibility.about}},function(e,t){return{setAboutVisible:function(t){return e(A(t))}}})(Q)),ee=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleClick=function(e){n.setState({capturing:!0}),window.addEventListener("keydown",n.handleKey)},n.handleKey=function(e){if(n.state.capturing){e.stopPropagation(),e.preventDefault();var t=e.key.toLowerCase();if("control"===t||"shift"===t||"alt"===t)return!1;n.setState({shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,key_name:t,capturing:!1}),window.removeEventListener("keydown",n.handleKey),n.props.save()}},n.testKey=function(e,t,r,a){return r===n.state.shift&&t===n.state.alt&&e===n.state.ctrl&&a===n.state.key_name},n.setKey=function(e,t,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};n.setState({ctrl:e,alt:t,shift:r,key_name:a},s)},n.getKey=function(){var e="_"+n.state.key_name;return n.state.shift&&(e="s"+e),n.state.alt&&(e="a"+e),n.state.ctrl&&(e="c"+e),e},n.setKeyStr=function(e){var t=e.indexOf("_"),r=e.substr(0,t),a=-1!==r.indexOf("s"),s=-1!==r.indexOf("a"),i=-1!==r.indexOf("c"),l=e.substr(t+1);n.setKey(i,s,a,l)},n.state={capturing:!1,combo:"a_110",shift:!0,alt:!0,ctrl:!0,key_name:"n"},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=!this.state.capturing;return a.a.createElement("div",{className:"key_bar".concat(this.state.capturing?" capturing":""),onClick:this.handleClick,tabIndex:0},!e&&a.a.createElement("span",null,"Capturing"),e&&this.state.ctrl&&a.a.createElement("span",null,"Ctrl"),e&&this.state.alt&&a.a.createElement("span",null,"Alt"),e&&this.state.shift&&a.a.createElement("span",null,"Shift"),e&&a.a.createElement("span",null,this.state.key_name))}}]),t}(r.Component),te=["theme_light","theme_dark","theme_dos","theme_apple2"],ne=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleClose=function(e){e.preventDefault(),n.props.setSettingsVisible(!1)},n.handleStopClose=function(e){e.stopPropagation()},n.handleKey=function(e){if(n.props.canhandleinput){var t=e.key.toLowerCase();if("control"===t||"shift"===t||"alt"===t)return!1;for(var r=e.ctrlKey,a=e.altKey,s=e.shiftKey,i=!1,l=[n.comp_new.current,n.comp_load.current,n.comp_save.current,n.comp_assemble.current,n.comp_step.current,n.comp_sim.current],o=[n.props.fn_new,n.props.fn_load,n.props.fn_save,n.props.fn_ass,n.props.fn_step,n.props.fn_sim],u=0;u<l.length;++u)l[u].testKey(r,a,s,t)&&(o[u](),i=!0);i&&(e.preventDefault(),e.stopPropagation())}},n.setDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};n.comp_new.current.setKey(!1,!0,!1,"n",function(){n.comp_load.current.setKey(!0,!1,!1,"o",function(){n.comp_save.current.setKey(!0,!1,!1,"s",function(){n.comp_assemble.current.setKey(!1,!0,!1,"f5",function(){n.comp_sim.current.setKey(!1,!0,!1,"f7",function(){n.comp_step.current.setKey(!1,!0,!1,"f6",function(){n.setTheme("theme_light",e)})})})})})})},n.setDefaultsSave=function(){n.setDefaults(n.saveSettings)},n.saveSettings=function(){var e=new Date;e.setTime(e.getTime()+2592e6);var t="; expires="+e.toUTCString()+"; path=/";document.cookie="ojs_hotkey_new="+n.comp_new.current.getKey()+t,document.cookie="ojs_hotkey_load="+n.comp_load.current.getKey()+t,document.cookie="ojs_hotkey_save="+n.comp_save.current.getKey()+t,document.cookie="ojs_hotkey_ass="+n.comp_assemble.current.getKey()+t,document.cookie="ojs_hotkey_sim="+n.comp_sim.current.getKey()+t,document.cookie="ojs_hotkey_step="+n.comp_step.current.getKey()+t,document.cookie="ojs_theme="+n.state.theme+t},n.setTheme=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};te.includes(e)||(e=te[0]),te.forEach(function(t){document.getElementById(t).disabled=t!==e}),n.setState({theme:e},t)},n.handleISA=function(e){n.setState({default_isa:e.target.value})},n.handleTheme=function(e){n.setTheme(e.target.value,n.saveSettings)},n.acceptCookies=function(e){e.preventDefault(),n.setState({use_cookies:!0}),n.setDefaultsSave()},n.deleteAllCookies=function(){for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var r=e[t],a=r.indexOf("="),s=a>-1?r.substr(0,a):r;"ojs"===s.substr(0,3)&&(document.cookie=s+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT")}n.setState({use_cookies:!1}),n.setDefaults()},n.state={default_isa:"RISC-V",theme:"theme_light",use_cookies:!1},window.addEventListener("keydown",n.handleKey);for(var r=1;r<te.length;++r)document.getElementById(te[r]).disabled=!0;return n.comp_new=a.a.createRef(),n.comp_load=a.a.createRef(),n.comp_save=a.a.createRef(),n.comp_assemble=a.a.createRef(),n.comp_sim=a.a.createRef(),n.comp_step=a.a.createRef(),n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){for(var e=!1,t=document.cookie.split("; "),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);var a=r.indexOf("="),s=r.substr(0,a),i=r.substr(a+1);"ojs_hotkey_new"===s?(this.comp_new.current.setKeyStr(i),e=!0):"ojs_hotkey_load"===s?(this.comp_load.current.setKeyStr(i),e=!0):"ojs_hotkey_save"===s?(this.comp_save.current.setKeyStr(i),e=!0):"ojs_hotkey_ass"===s?(this.comp_assemble.current.setKeyStr(i),e=!0):"ojs_hotkey_sim"===s?(this.comp_sim.current.setKeyStr(i),e=!0):"ojs_hotkey_step"===s?(this.comp_step.current.setKeyStr(i),e=!0):"ojs_theme"===s&&(this.setTheme(i),e=!0)}e&&this.setState({use_cookies:!0})}},{key:"render",value:function(){return a.a.createElement("div",{id:"settings",onClick:this.handleClose,className:"settings_overlay overlay fader".concat(this.props.visible?" fader_shown":"")},a.a.createElement("div",{className:"settings_container",onClick:this.handleStopClose},a.a.createElement("button",{className:"floating_close",onClick:this.handleClose}),a.a.createElement("h2",null,"Settings"),!this.state.use_cookies&&a.a.createElement("div",{className:"cookie_screen"},a.a.createElement("h3",null,"Cookies"),a.a.createElement("p",null,"In order to set your own settings, you need to enable cookies. Cookies are the way websites store data for individual users. We store your cookies directly in the browser, and only store the options stored here."),a.a.createElement("button",{onClick:this.acceptCookies,className:"button"},"Accept Cookies, Show Settings"),a.a.createElement("button",{onClick:this.handleClose,className:"button subbutton"},"Close Window")),a.a.createElement("div",{style:{display:this.state.use_cookies?"block":"none",position:"relative"}},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"General Settings"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement(N,{onChange:this.handleTheme,icon:"images/icons/input_type.svg",placeholder:"Theme",value:this.state.theme},a.a.createElement("option",{value:"theme_light"},"Light"),a.a.createElement("option",{value:"theme_dark"},"Dark"),a.a.createElement("option",{value:"theme_dos"},"DOS"),a.a.createElement("option",{value:"theme_apple2"},"Apple ]["))))),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"Hotkeys"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"New Tab"),a.a.createElement("td",null,a.a.createElement(ee,{ref:this.comp_new,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Save Tab"),a.a.createElement("td",null,a.a.createElement(ee,{ref:this.comp_save,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Load"),a.a.createElement("td",null,a.a.createElement(ee,{ref:this.comp_load,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Assemble"),a.a.createElement("td",null,a.a.createElement(ee,{ref:this.comp_assemble,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Step-By-Step"),a.a.createElement("td",null,a.a.createElement(ee,{ref:this.comp_step,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Simulate"),a.a.createElement("td",null,a.a.createElement(ee,{ref:this.comp_sim,save:this.saveSettings}))))),a.a.createElement("button",{className:"button",onClick:this.handleClose},"Accept Changes"),a.a.createElement("button",{className:"button subbutton",onClick:this.setDefaultsSave},"Restore Defaults"),a.a.createElement("button",{className:"button subbutton",onClick:this.deleteAllCookies},"Delete Cookies"))))}}]),t}(r.Component),re=Object(z.d)(Object(j.b)(function(e){return{visible:e.panel_visibility.settings}},function(e,t){return{setSettingsVisible:function(t){return e(S(t))}}})(ne)),ae=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"input_group"},a.a.createElement("input",{onChange:this.props.onChange,value:this.props.value,style:{backgroundImage:"url(".concat(this.props.icon,")")},type:this.props.type,placeholder:this.props.placeholder}),a.a.createElement("label",{className:"group_label"},this.props.placeholder))}}]),t}(r.Component);!function(e){function t(e,t){var n=e;return 0!==(n&1<<t-1)&&(n=-1>>>t<<t|e),n}e.signExt=t,e.rangeCheck=function(e,n){if(n>=32)return null;var r=(1<<n-1)-1;return-(1<<n-1)<=(e=t(e,n))>>0&&e>>0<=r},e.catBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length>4)return null;t&&e.reverse();for(var n=0,r=0;r<e.length;r++)n|=e[r]<<8*r;return n},e.pad=function(e,t,n){for(var r=e.toString(n);t>r.length;)r="0"+r;return r},e.hex=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16).toUpperCase();1===r.length&&(r="0"+r),t+=r+" "}return t}}(K||(K={})),String.prototype.interpretedBytes=function(){for(var e=this.split(" "),t=[],n=0;n<e.length;n++){var r=parseInt(e[n],16);isNaN(r)||t.push(r)}return t},String.prototype.hasPrefix=function(e){return this.substr(0,e.length)===e},function(e){e[e.instruction=0]="instruction",e[e.data=1]="data",e[e.directive=2]="directive",e[e.noise=3]="noise"}(W||(W={}));var se,ie,le,oe,ue=function(){function e(t,n){Object(l.a)(this,e),this.addressThisPass=null,this.sensitive=!1,this.machineCode=[],this.raw=t,this.number=n,this.kind=W.noise,this.sensitivityList=[],this.possibleInstructions=[]}return Object(o.a)(e,[{key:"initialProcess",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.keywordRegexes[le.comment].exec(this.raw)[1],a=e.keywordRegexes[le.label].exec(r);if(this.label=a[1],this.processed=a[2]||"",null!==/^s*$/.exec(this.processed))return n;if(null!=e.keywordRegexes[le.directive]){var s=RegExp(e.keywordRegexes[le.directive]).exec(this.processed);null!==s&&(this.directive=e.directives[s[1]],this.directiveData=s[2])}if(n){if(void 0!==this.directive){switch(this.directive){case oe.data:return this.kind=W.directive,!1;case oe.text:this.kind=W.directive;break;default:this.invalidReason="text.unsupportedDirective"}return!0}if(this.kind=W.instruction,e.instructionSet.instructions.forEach(function(e){var n=e.format.regex.exec(t.processed);return null!==n&&n[1].toUpperCase()===e.mnemonic&&t.possibleInstructions.push([e,n.slice(2),[],null]),null!==n}),0===this.possibleInstructions.length)return this.invalidReason="text.noMatchingInstructions",!0;var i=this.possibleInstructions[0][0].bytes;return(this.machineCode=[]).length=i,this.machineCode.fill(0),!0}var l=null,o=0;if(void 0!==this.directive)switch(this.kind=W.data,this.directive){case oe.data:this.kind=W.directive;break;case oe.text:return this.kind=W.directive,!0;case oe._32bit:l=l||4;case oe._16bit:l=l||2;case oe._8bit:l=l||1;var u=this.directiveData.split(/\s*,\s*/);(this.machineCode=[]).length=u.length*l,this.machineCode.fill(0),this.kind=W.data;break;case oe.cString:o=1;case oe.string:null===e.keywordRegexes[le.string]&&(this.invalidReason="isa.noStringTokenDefined");var c=e.keywordRegexes[le.string].exec(this.directiveData);if(null===c)this.invalidReason="data.invalidString";else{for(var p=RegExp(e.generalCharacters,"g"),d=[],m=null;m=p.exec(c[1]);)d.push(m);for(var h in(this.machineCode=[]).length=d.length+o,d){var g=String(d[h]),f=g.charCodeAt(0);g.length>2&&(f=ce.escapedCharacters[g[1]]),this.machineCode[h]=f}1===o&&(this.machineCode[this.machineCode.length-1]=0)}this.kind=W.data;break;default:this.invalidReason="data.unrecognizedDirective"}else{var b=!1;e.instructionSet.instructions.forEach(function(e){var n=e.format.regex.exec(t.processed);null!==n&&n[1].toUpperCase()===e.mnemonic&&(b=!0)}),this.invalidReason=b?"data.instruction":"data.unknownInput"}return!1}},{key:"assembleText",value:function(e,t,n){var r=!1;e:for(var a in this.possibleInstructions){var s=this.possibleInstructions[a],i=s[0],l=s[1],o=i.template;for(var u in i.format.ranges){var c=i.format.ranges[u];if(void 0!==c.parameter){var p=c.totalBits,d=p||c.bits,m=null;if(null!==(m=c.parameterType==se.special?i.format.processSpecialParameter(l[c.parameter],se.special,d,n,e):e.process(l[c.parameter],c.parameterType,d,n,i.bytes)).errorMessage){s[3]=m.errorMessage;continue e}if(null!==m.context&&null===m.value){m.context.sensitivityList.push(this),this.sensitive=!0;break e}var h=m.value,g=c.limitStart,f=c.limitEnd;void 0!==p&&void 0!==g&&void 0!==f&&(h>>=g,h&=(1<<f-g+1)-1),o|=(h&(1<<d)-1)<<c.start}}for(var b=0;b<i.bytes;b+=1)s[2].push(255&o),o>>>=8;r=!0}if(r){var v=this.possibleInstructions.filter(function(e){return null===e[3]})[0];this.machineCode=v[2]}var y=null;return!(r||this.sensitive)&&(y=this.possibleInstructions[this.possibleInstructions.length-1][3]),y}},{key:"assembleData",value:function(e,t,n){var r=null,a=null;switch(this.directive){case oe._32bit:a=a||4;case oe._16bit:a=a||2;case oe._8bit:a=a||1;for(var s=this.directiveData.split(/\s*,\s*/),i=0;i<s.length;i+=1){var l=s[i],o=a<<3,u=e.process(l,se.immediate,o,n,0);if(null!==u.errorMessage){r=u.errorMessage;break}if(null!==u.context&&null===u.value){u.context.sensitivityList.push(this),this.sensitive=!0;break}for(var c=u.value,p=0;p<a;p+=1){var d=a*i;this.machineCode[p+d]=255&c,c>>>=8}}break;case oe.cString:case oe.string:break;default:this.invalidReason="data.unrecognizedDirective"}return r}},{key:"assemble",value:function(e,t,n){this.sensitive=!1;var r=[null,!1];switch(this.kind){case W.instruction:r[0]=this.assembleText(e,t,n);break;case W.data:r[0]=this.assembleData(e,t,n)}var a=e.linesByLabel[this.label];if(void 0!==a&&(a[1]=n),null===r[0])for(var s in this.sensitivityList){var i=this.sensitivityList[s];if(null!==i.addressThisPass){var l=i.machineCode.length,o=i.assemble(e,t,i.addressThisPass);if(i.sensitive);else{if(o[1]){r[1]=!0;break}if(i.machineCode.length!==l){r[1]=!0;break}}}}else this.invalidReason=r[0];return r}}],[{key:"arrayFromFile",value:function(t){return t.split("\n").map(function(t,n){return new e(t,n)})}}]),e}(),ce=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(l.a)(this,e),this.linesByLabel=[],this.incrementOnFetch=t.incrementOnFetch,this.keywordRegexes=[],this.memoryMap=r,t.keywordRegexes)this.keywordRegexes=t.keywordRegexes;else if(t.keywords){var a=t.keywords;if(this.keywordRegexes=[],a[le.directive]){var s=e.options(t.keywords[le.directive]);s&&(this.keywordRegexes[le.directive]=RegExp(s+"([^\\s]+)\\s*(.+)*"))}if(a[le.comment]){var i=e.options(a[le.comment]);i&&(this.keywordRegexes[le.comment]=RegExp("^(.*?)("+i+".*)?$"))}if(a[le.label]){var o=e.options(a[le.label]);o&&(this.keywordRegexes[le.label]=RegExp("^(?:([A-Za-z_][A-Za-z0-9_]*)"+o+")?\\s*(.*)?$"))}if(a[le.register]){var u=e.options(a[le.register]);u&&(this.keywordRegexes[le.register]=RegExp(u+"([0-9]+)"))}if(this.keywordRegexes[le.numeric]=RegExp("(-?(?:0(["+e.radixList+"]))?[A-F0-9]+)"),a[le.charMarker]){var c=e.options(a[le.charMarker]);if(c){var p=c.length>1?"":"\\"+c;this.generalCharacters="(?:(?:\\\\[\\\\"+e.escapedCharacterList+p+"])|(?:[\\x20-\\x5b\\x5d-\\x7e]))",this.keywordRegexes[le.char]=RegExp(c+"("+this.generalCharacters+")"+c)}}else this.generalCharacters="(?:(?:\\\\[\\\\"+e.escapedCharacterList+"])|(?:[\\x20-\\x5b\\x5d-\\x7e]))";if(a[le.stringMarker]){var d=e.options(a[le.stringMarker]);d&&(this.keywordRegexes[le.string]=RegExp(d+"("+this.generalCharacters+"*)"+d))}}else console.log("INSTRUCTION SET WARNING: This instruction set doesn't define any keywords.");this.directives=t.directives,this.endianness=n||t.endianness,this.instructionSet=t}return Object(o.a)(e,[{key:"process",value:function(t,n,r,a,s){var i={errorMessage:null,value:null,context:null};switch(n){case se.register:var l=this.instructionSet.abiNames.indexOf(t);if(-1!==l)return i.value=l,i;var o=null;if(this.keywordRegexes[le.register]){var u=this.keywordRegexes[le.register].exec(t);null!==u&&(o=u[1])}return null===o?(i.errorMessage="args.registerDoesNotExist(".concat(t,")"),i):0!==((o=parseInt(o,10))&-1<<r)?(i.errorMessage="args.registerDoesNotExist(".concat(t,")"),i):(i.value=o,i);case se.offset:case se.immediate:var c=null,p=this.linesByLabel[t];if(void 0!==p){if(i.context=p[0],null===p[1])return i;c=p[1]}if(null===c&&this.keywordRegexes[le.char]){var d=RegExp(this.keywordRegexes[le.char]).exec(t);if(null!==d&&void 0!==d[1]&&(c=d[1].charCodeAt(0))>255)return i.errorMessage="Non-ascii character "+d[1]+" unsupported.",i}if(null===c&&void 0!==this.keywordRegexes[le.numeric]){var m=RegExp(this.keywordRegexes[le.numeric]).exec(t);if(null!==m){var h=e.radixes[m[2]]||10,g=m[1];c=parseInt(g,h)}}return null!==c&&n===se.offset&&(c-=a,this.incrementOnFetch&&(c-=s)),null===c||isNaN(c)?(i.errorMessage="args.valueUnrecognized(".concat(t,")"),i):!1===K.rangeCheck(c,r)?(i.errorMessage="args.outOfRange(".concat(t,")"),i):(i.value=c,i);default:return i.errorMessage="oak.paramUnsupported",i}}},{key:"assemble",value:function(e,t){e.map(function(e){return e.addressThisPass=null});var n=[],r=!0,a=0;for(var s in e){var i=e[s];switch(t){case 0:r=i.initialProcess(this,r),void 0!==i.invalidReason&&n.push(i),void 0!==i.label&&(this.linesByLabel[i.label]=[i,null]);break;default:i.addressThisPass=a;var l=i.assemble(this,e,a);if(null!==l[0]&&n.push(i),l[1])return null;a+=i.machineCode.length}}return n}}],[{key:"options",value:function(e){if(0===e.length)return null;for(var t="",n=0;n<e.length;n++){var r=e[n];if("\\"===r)return console.log("INSTRUCTION SET WARNING: '\\' used as keyword. This behavior is undefined."),null;""===t?t="(?:":t+="|",t+=r}return t+")"}}]),e}();ce.radixes={b:2,o:8,d:10,h:16},ce.radixList=Object.keys(ce.radixes).join(""),ce.escapedCharacters={0:0,t:9,n:10,r:13,"'":47,'"':42},ce.escapedCharacterList=Object.keys(ce.escapedCharacters).join(""),function(e){e[e.immediate=0]="immediate",e[e.register=1]="register",e[e.condition=2]="condition",e[e.offset=3]="offset",e[e.special=4]="special",e[e.fpImmediate=5]="fpImmediate"}(se||(se={})),function(e){e[e.little=0]="little",e[e.big=1]="big",e[e.bi=2]="bi"}(ie||(ie={})),function(e){e[e.directive=0]="directive",e[e.comment=1]="comment",e[e.label=2]="label",e[e.stringMarker=3]="stringMarker",e[e.charMarker=4]="charMarker",e[e.register=5]="register",e[e.string=6]="string",e[e.char=7]="char",e[e.numeric=8]="numeric"}(le||(le={})),function(e){e[e.text=0]="text",e[e.data=1]="data",e[e.string=2]="string",e[e.cString=3]="cString",e[e._8bit=4]="_8bit",e[e._16bit=5]="_16bit",e[e._32bit=6]="_32bit",e[e._64bit=7]="_64bit",e[e.fixedPoint=8]="fixedPoint",e[e.floatingPoint=9]="floatingPoint",e[e.custom=10]="custom"}(oe||(oe={}));var pe=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(l.a)(this,e),this.field=t,this.start=n,this.bits=r,this.constant=a,this.signed=s}return Object(o.a)(e,[{key:"end",get:function(){return this.start+this.bits-1}}]),Object(o.a)(e,[{key:"limited",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.totalBits=e,this.limitStart=t,this.limitEnd=n,this}},{key:"parameterized",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.parameter=e,this.parameterDefaultValue=n,this.parameterType=t,this}}]),e}(),de=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(l.a)(this,e),this.ranges=t,this.regex=n,this.disassembly=r,this.processSpecialParameter=a,this.decodeSpecialParameter=s},me=function(){function e(t,n,r,a,s){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];for(var u in Object(l.a)(this,e),this.computedBits=null,this.computedMask=null,this.computedTemplate=null,this.mnemonic=t,this.format=n,this.constants=[],r)this.constants[r[u]]=a[u];this.executor=s,this.signatoryOverride=i,this.pseudoInstructionFor=o}return Object(o.a)(e,[{key:"pad",value:function(e,t){for(var n=e,r=0;r<t-e.length;r++)n="0"+n;return n}},{key:"match",value:function(e){for(var t=e>>>0,n=this.mask.split(""),r=this.bits-1;r>=0;r--){var a=1&t;if(t>>=1,"X"!==n[r]&&parseInt(n[r],10)!==a)return!1}return!0}},{key:"bits",get:function(){if(null!==this.computedBits)return this.computedBits;var e=0;for(var t in this.format.ranges)e+=this.format.ranges[t].bits;return this.computedBits=e,this.computedBits}},{key:"bytes",get:function(){return Math.ceil(this.bits/8)}},{key:"mask",get:function(){if(null!==this.computedMask)return this.computedMask;for(var e="",t=0;t<this.bits;t+=1)e+="X";for(var n in this.format.ranges){var r=this.format.ranges[n],a=this.constants[r.field];if(null===a&&(a=r.constant),null!=a){var s=e.substr(0,this.bits-r.end-1),i=K.pad(a,r.bits,2),l=0===r.start?"":e.substr(-r.start);e=s+i+l}}return this.computedMask=e,this.computedMask}},{key:"template",get:function(){if(null!=this.computedTemplate)return this.computedTemplate;var e=0;for(var t in this.format.ranges){var n=this.format.ranges[t],r=this.constants[n.field];null===r&&(r=n.constant),null!=r&&(e|=r<<n.start)}return this.computedTemplate=e,e}}]),e}(),he=function(){function e(t,n,r,a,s,i,o,u,c){Object(l.a)(this,e),this.bits=t,this.formats=n,this.instructions=r,r.sort(function(e,t){return e.bytes-t.bytes}),this.pseudoInstructions=a,this.abiNames=s,this.keywords=i,this.directives=o,this.incrementOnFetch=u,this.exampleCode=c}return Object(o.a)(e,[{key:"pseudoMnemonicSearch",value:function(e){return-1}},{key:"mnemonicSearch",value:function(e){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t].mnemonic===e)return t;return-1}},{key:"instructionsPrefixing",value:function(e){var t=[];for(var n in this.instructions){var r=this.instructions[n];if(e.toUpperCase().hasPrefix(r.mnemonic)){var a=r.format.regex.exec(e);a&&a[1].toUpperCase()===r.mnemonic&&t.push(r)}}return t}},{key:"disassemble",value:function(e,t){var n=e.format.disassembly;n=n.replace("@mnem",e.mnemonic);for(var r=0;r<e.format.ranges.length;r++){var a=e.format.ranges[r],s=a.parameter;null!=s&&(n=n.replace("@arg"+a.parameter,a.parameterType===se.register?this.abiNames[t[s]]:t[s].toString()))}return n}}]),e}(),ge=function(){function e(){Object(l.a)(this,e),this.continueInputString=function(e,t){for(var n=e.virtualOSArgumentVectorStart,r=e.registerFile.read(n),a=[],s=0;s<t.length;++s)a.push(t.charCodeAt(s));e.memset(r,a)},this.continueInputInt=function(e,t){var n=e.virtualOSArgumentVectorStart;e.registerFile.write(n,t)}}return Object(o.a)(e,[{key:"ecall",value:function(e){var t=e.registerFile.read(e.virtualOSServiceRegister),n=e.virtualOSArgumentVectorStart;switch(t){case 1:var r=e.registerFile.read(n);this.outputInt(r);break;case 4:for(var a=e.registerFile.read(n),s=[],i=null;0!==(i=e.memcpy(a,1)[0]);)s.push(i),a+=1;var l=s.map(function(e){return String.fromCharCode(e)}).join("");return this.outputString(l),null;case 5:return this.inputInt(),"WAIT";case 8:return this.inputString(),"WAIT";case 10:return this.handleHalt(),"HALT";default:return"UNHANDLED"}return null}}]),e}(),fe=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,[{key:"memcpy",value:function(e,t){if(e+t>>>0>this.memorySize)return null;for(var n=[],r=0;r<t;r++)n.push(this.memory[e+r]);return n}},{key:"memset",value:function(e,t){if(e<0)return!1;if(e+t.length>this.memorySize)return!1;for(var n=0;n<t.length;n++)this.memory[e+n]=t[n];return!0}},{key:"decode",value:function(){var e=this.instructionSet.instructions;this.decoded=null,this.arguments=[];for(var t=0;t<e.length;t++)if(e[t].match(this.fetched)){this.decoded=e[t];break}if(null===this.decoded)return null;var n=this.decoded.format.ranges;for(var r in n){var a=n[r];if(null!=a.parameter){var s=a.limitStart,i=(this.fetched>>>a.start&(1<<a.bits)-1)<<s;a.parameterType===se.special&&(i=this.decoded.format.decodeSpecialParameter(i,this.pc)),this.arguments[a.parameter]=this.arguments[a.parameter]||0,this.arguments[a.parameter]=this.arguments[a.parameter]|i,this.decoded.format.ranges[r].signed&&a.parameterType!==se.register&&(this.arguments[a.parameter]=K.signExt(this.arguments[a.parameter],a.totalBits?a.totalBits:a.bits))}}return this.instructionSet.disassemble(this.decoded,this.arguments)}},{key:"execute",value:function(){return this.decoded.executor(this)}}]),e}(),be=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"getCoreList",value:function(){return Object.keys(this.ISAs)}},{key:"getCore",value:function(e,t,n,r){var a=this.ISAs[e];if(void 0===a)throw"oak.unregisteredISA";for(var s in r)if(void 0===a.options[s])throw"isa.unsupportedOptions";var i=a.generator(r);return new a.core(t,n,i)}}]),e}();be.ISAs={};var ve=function(){function e(t,n){Object(l.a)(this,e),this.physicalFile=[],this.modifiedRegisters=[];for(var r=0;r<32;r++)this.physicalFile.push(0),this.modifiedRegisters.push(!1);this.memorySize=t,this.physicalFile[2]=t,this.abiNames=n}return Object(o.a)(e,[{key:"print",value:function(){console.log("Registers\n------");for(var e=0;e<32;e++)console.log("x"+e.toString(),this.abiNames[e],this.physicalFile[e].toString(),(this.physicalFile[e]>>>0).toString(16).toUpperCase());console.log("------")}},{key:"read",value:function(e){return 0===e?0:this.physicalFile[e]}},{key:"write",value:function(e,t){this.physicalFile[e]=t,this.modifiedRegisters[e]=!0}},{key:"getRegisterCount",value:function(){return 32}},{key:"getModifiedRegisters",value:function(){for(var e=this.modifiedRegisters.slice(),t=0;t<this.getRegisterCount();t++)this.modifiedRegisters[t]=!1;return e}},{key:"reset",value:function(){for(var e=0;e<32;e++)this.physicalFile[e]=0,this.modifiedRegisters[e]=!1;this.physicalFile[2]=this.memorySize}}]),e}(),ye=function(e){function t(e,n,r){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this))).virtualOSServiceRegister=10,a.virtualOSArgumentVectorStart=11,a.virtualOSArgumentVectorEnd=17,a.pc=0,a.memorySize=e,a.virtualOS=n,a.instructionSet=r,a.registerFile=new ve(e,r.abiNames),a.memory=new Array(e);for(var s=0;s<e;s++)a.memory[s]=0;return a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"reset",value:function(){this.pc=0,this.memory=[];for(var e=0;e<this.memorySize;e++)this.memory[e]=0;this.registerFile.reset()}},{key:"fetch",value:function(){if(this.pc<0)return"fetch.negativePC";var e=this.memcpy(this.pc,4);return null===e?"fetch.invalidMemoryAccess":(this.fetched=K.catBytes(e),null)}}]),t}(fe);be.ISAs.RISCV={generator:function(e){var t=[],n=[];t.push(new de([new pe("funct7",25,7),new pe("rs2",20,5).parameterized(2,se.register),new pe("rs1",15,5).parameterized(1,se.register),new pe("funct3",12,3),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var r=t[t.length-1];n.push(new me("ADD",r,["opcode","funct3","funct7"],[51,0,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("SUB",r,["opcode","funct3","funct7"],[51,0,32],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])-e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("SLL",r,["opcode","funct3","funct7"],[51,1,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("SLT",r,["opcode","funct3","funct7"],[51,2,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.registerFile.read(e.arguments[2])?1:0),e.pc+=4,null})),n.push(new me("SLTU",r,["opcode","funct3","funct7"],[51,3,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0<e.registerFile.read(e.arguments[2])>>>0?1:0),e.pc+=4,null})),n.push(new me("XOR",r,["opcode","funct3","funct7"],[51,4,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])^e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("SRL",r,["opcode","funct3","funct7"],[51,5,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("SRA",r,["opcode","funct3","funct7"],[51,5,32],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("OR",r,["opcode","funct3","funct7"],[51,6,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])|e.registerFile.read(e.arguments[2])),e.pc+=4,null})),n.push(new me("AND",r,["opcode","funct3","funct7"],[51,7,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])&e.registerFile.read(e.arguments[2])),e.pc+=4,null})),t.push(new de([new pe("imm",20,12,null,!0).parameterized(2,se.immediate),new pe("rs1",15,5).parameterized(1,se.register),new pe("funct3",12,3),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+),\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var a=t[t.length-1];n.push(new me("JALR",a,["opcode","funct3"],[103,0],function(e){return e.registerFile.write(e.arguments[0],e.pc+4),e.pc=e.registerFile.read(e.arguments[1])+K.signExt(e.arguments[2],12),null})),n.push(new me("ADDI",a,["opcode","funct3"],[19,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.arguments[2]),e.pc+=4,null})),n.push(new me("SLTI",a,["opcode","funct3"],[19,2],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.arguments[2]?1:0),e.pc+=4,null})),n.push(new me("SLTIU",a,["opcode","funct3"],[19,3],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0<e.arguments[2]>>>0?1:0),e.pc+=4,null},!1)),n.push(new me("XORI",a,["opcode","funct3"],[19,4],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0^e.arguments[2]),e.pc+=4,null})),n.push(new me("ORI",a,["opcode","funct3"],[19,6],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0|e.arguments[2]),e.pc+=4,null})),n.push(new me("ANDI",a,["opcode","funct3"],[19,7],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0&e.arguments[2]),e.pc+=4,null})),t.push(new de([new pe("imm",20,12,null,!0).parameterized(1,se.immediate),new pe("rs1",15,5).parameterized(2,se.register),new pe("funct3",12,3),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*(-?0?[boxd]?[0-9A-F]+)\s*\(\s*([A-Za-z0-9]+)\s*\)\s*$/,"@mnem @arg0, @arg2(@arg1)"));var s=t[t.length-1];n.push(new me("LB",s,["opcode","funct3"],[3,0],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.signExt(t[0],8)),e.pc+=4,null)})),n.push(new me("LH",s,["opcode","funct3"],[3,1],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.signExt(K.catBytes(t),16)),e.pc+=4,null)})),n.push(new me("LW",s,["opcode","funct3"],[3,2],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],4);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.catBytes(t)),e.pc+=4,null)})),n.push(new me("LBU",s,["opcode","funct3"],[3,4],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],t[0]),e.pc+=4,null)})),n.push(new me("LHU",s,["opcode","funct3"],[3,5],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.catBytes(t)),e.pc+=4,null)})),t.push(new de([new pe("funct7",25,7),new pe("shamt",20,5).parameterized(2,se.immediate),new pe("rs1",15,5).parameterized(1,se.register),new pe("funct3",12,3),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+),\s*(-?0?[boxd]?[0-9A-F]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var i=t[t.length-1];n.push(new me("SLLI",i,["opcode","funct3","funct7"],[19,1,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.arguments[2]),e.pc+=4,null})),n.push(new me("SRLI",i,["opcode","funct3","funct7"],[19,5,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.arguments[2]),e.pc+=4,null})),n.push(new me("SRAI",i,["opcode","funct3","funct7"],[19,5,32],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.arguments[2]),e.pc+=4,null})),t.push(new de([new pe("imm",25,7,null,!0).parameterized(1,se.immediate).limited(12,5,11),new pe("rs2",20,5).parameterized(0,se.register),new pe("rs1",15,5).parameterized(2,se.register),new pe("funct3",12,3),new pe("imm",7,5,null,!0).parameterized(1,se.immediate).limited(12,0,4),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*(-?0?[boxd]?[0-9A-F]+)\(\s*([A-Za-z0-9]+)\s*\)\s*$/,"@mnem @arg0, @arg2(@arg1)"));var l=t[t.length-1];n.push(new me("SB",l,["opcode","funct3"],[35,0],function(e){var t=[];return t.push(255&e.registerFile.read(e.arguments[0])),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?(e.pc+=4,null):"Illegal memory access."})),n.push(new me("SH",l,["opcode","funct3"],[35,1],function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?(e.pc+=4,null):"Illegal memory access."})),n.push(new me("SW",l,["opcode","funct3"],[35,2],function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?(e.pc+=4,null):"Illegal memory access."})),t.push(new de([new pe("imm",12,20,null,!0).parameterized(1,se.immediate),new pe("rd",7,5).parameterized(0,se.offset),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var o=t[t.length-1];n.push(new me("LUI",o,["opcode"],[55],function(e){return e.registerFile.write(e.arguments[0],e.arguments[1]<<12),e.pc+=4,null})),n.push(new me("AUIPC",o,["opcode"],[23],function(e){return e.registerFile.write(e.arguments[0],(e.arguments[1]<<12)+e.pc),e.pc+=4,null})),t.push(new de([new pe("imm",31,1,null,!0).parameterized(2,se.offset).limited(13,12,12),new pe("imm",25,6,null,!0).parameterized(2,se.offset).limited(13,5,10),new pe("rs2",20,5).parameterized(1,se.register),new pe("rs1",15,5).parameterized(0,se.register),new pe("funct3",12,3),new pe("imm",8,4,null,!0).parameterized(2,se.offset).limited(13,1,4),new pe("imm",7,1,null,!0).parameterized(2,se.offset).limited(13,11,11),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*,\s*([a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var u=t[t.length-1];n.push(new me("BEQ",u,["opcode","funct3"],[99,0],function(e){return e.registerFile.read(e.arguments[0])===e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null})),n.push(new me("BNE",u,["opcode","funct3"],[99,1],function(e){return e.registerFile.read(e.arguments[0])!==e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null})),n.push(new me("BLT",u,["opcode","funct3"],[99,4],function(e){return e.registerFile.read(e.arguments[0])<e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null})),n.push(new me("BGE",u,["opcode","funct3"],[99,5],function(e){return e.registerFile.read(e.arguments[0])>=e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null})),n.push(new me("BLTU",u,["opcode","funct3"],[99,6],function(e){return e.registerFile.read(e.arguments[0])>>>0<e.registerFile.read(e.arguments[1])>>>0?e.pc+=e.arguments[2]:e.pc+=4,null})),n.push(new me("BGEU",u,["opcode","funct3"],[99,7],function(e){return e.registerFile.read(e.arguments[0])>>>0>=e.registerFile.read(e.arguments[1])>>>0?e.pc+=e.arguments[2]:e.pc+=4,null})),t.push(new de([new pe("imm",31,1,null,!0).parameterized(1,se.offset).limited(21,20,20),new pe("imm",21,10,null,!0).parameterized(1,se.offset).limited(21,1,10),new pe("imm",20,1,null,!0).parameterized(1,se.offset).limited(21,11,11),new pe("imm",12,8,null,!0).parameterized(1,se.offset).limited(21,12,19),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var c=t[t.length-1];n.push(new me("JAL",c,["opcode"],[111],function(e){return e.registerFile.write(e.arguments[0],e.pc+4),e.pc+=K.signExt(e.arguments[1],21),null})),t.push(new de([new pe("const",0,32)],/^\s*([a-zA-Z]+)\s*$/,"@mnem"));var p=t[t.length-1];n.push(new me("ECALL",p,["const"],[115],function(e){var t=e.virtualOS.ecall(e);return e.pc+=4,t})),t.push(new de([new pe("funct7",25,7),new pe("rs2",20,5).parameterized(1,se.register),new pe("rs1",15,5),new pe("funct3",12,3),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1"));var d=t[t.length-1];n.push(new me("MV",d,["opcode","funct3","rs1","funct7"],[51,0,0,0],function(e){return null},!1,["ADD"])),t.push(new de([new pe("imm",20,12,null,!0).parameterized(1,se.immediate),new pe("rs1",15,5),new pe("funct3",12,3),new pe("rd",7,5).parameterized(0,se.register),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var m=t[t.length-1];n.push(new me("LI",m,["opcode","funct3","rs1"],[19,0,0],function(e){return null},!1,["ADDI"])),n.push(new me("LA",m,["opcode","funct3","rs1"],[19,0,0],function(e){return null},!1,["ADDI"])),t.push(new de([new pe("imm",20,12,null,!0),new pe("rs1",15,5).parameterized(0,se.register),new pe("funct3",12,3),new pe("rd",7,5),new pe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*$/,"@mnem @arg0"));var h=t[t.length-1];n.push(new me("JR",h,["opcode","rd","funct3","imm"],[103,0,0,0],function(e){return null},!1,["ADDI"])),n.push(new me("SCALL",p,["const"],[115],function(e){return null},!1,["ECALL"])),n.push(new me("SYSCALL",p,["const"],[115],function(e){return null},!1,["ECALL"]));var g=[];g[le.directive]=["\\."],g[le.comment]=["#"],g[le.label]=["\\:"],g[le.stringMarker]=['\\"'],g[le.charMarker]=["\\'"],g[le.register]=["x"];var f=[];return f.text=oe.text,f.data=oe.data,f.string=oe.cString,f.byte=oe._8bit,f.half=oe._16bit,f.word=oe._32bit,new he(32,t,n,[],["zero","ra","sp","gp","tp","t0","t1","t2","s0","s1","a0","a1","a2","a3","a4","a5","a6","a7","s2","s3","s4","s5","s6","s7","s8","s9","s10","s11","t3","t4","t5","t6"],g,f,!1,'    la a1, str\n    li a0, 4 #4 is the string print service number...\n    ecall\n    li a0, 10 #...and 10 is the program termination service number!\n    ecall\n.data\nstr:    .string "Hello, World!"')},core:ye,options:[]};var we=function(){function e(t,n){Object(l.a)(this,e),this.physicalFile=[],this.modifiedRegisters=[];for(var r=0;r<32;r++)this.physicalFile.push(0),this.modifiedRegisters.push(!1);this.memorySize=t,this.physicalFile[29]=t,this.abiNames=n}return Object(o.a)(e,[{key:"print",value:function(){console.log("Registers\n------");for(var e=0;e<32;e++)console.log("$"+e.toString(),this.abiNames[e],this.physicalFile[e].toString(),(this.physicalFile[e]>>>0).toString(16).toUpperCase());console.log("------")}},{key:"read",value:function(e){return 0===e?0:this.physicalFile[e]}},{key:"write",value:function(e,t){this.physicalFile[e]=t,this.modifiedRegisters[e]=!0}},{key:"getRegisterCount",value:function(){return 32}},{key:"getModifiedRegisters",value:function(){for(var e=this.modifiedRegisters.slice(),t=0;t<this.getRegisterCount();t++)this.modifiedRegisters[t]=!1;return e}},{key:"reset",value:function(){for(var e=0;e<32;e++)this.physicalFile[e]=0,this.modifiedRegisters[e]=!1;this.physicalFile[29]=this.memorySize}}]),e}(),_e=function(e){function t(e,n,r){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this))).virtualOSServiceRegister=2,a.virtualOSArgumentVectorStart=4,a.virtualOSArgumentVectorEnd=7,a.instructionSet=r,a.pc=0,a.memorySize=e,a.virtualOS=n,a.registerFile=new we(e,r.abiNames),a.memory=new Array(e);for(var s=0;s<e;s++)a.memory[s]=0;return a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"reset",value:function(){this.pc=0,this.memory=[];for(var e=0;e<this.memorySize;e++)this.memory[e]=0;this.registerFile.reset()}},{key:"fetch",value:function(){var e=this.memcpy(this.pc,4);return null===e?"fetch.illegalMemoryAddress":(this.pc+=4,this.fetched=K.catBytes(e),null)}}]),t}(fe);be.ISAs.MIPS={generator:function(e){var t=[],n=[];t.push(new de([new pe("opcode",26,6),new pe("rs",21,5).parameterized(1,se.register),new pe("rt",16,5).parameterized(2,se.register),new pe("rd",11,5).parameterized(0,se.register),new pe("shamt",6,5,0),new pe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var r=t[t.length-1];n.push(new me("ADD",r,["opcode","funct"],[0,32],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.registerFile.read(e.arguments[2])),null})),n.push(new me("ADDU",r,["opcode","funct"],[0,33],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.registerFile.read(e.arguments[2])),null})),n.push(new me("SUB",r,["opcode","funct"],[0,34],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])-e.registerFile.read(e.arguments[2])),null})),n.push(new me("SUBU",r,["opcode","funct"],[0,35],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])-e.registerFile.read(e.arguments[2])),null})),n.push(new me("AND",r,["opcode","funct"],[0,36],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])&e.registerFile.read(e.arguments[2])),null})),n.push(new me("OR",r,["opcode","funct"],[0,37],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])|e.registerFile.read(e.arguments[2])),null})),n.push(new me("NOR",r,["opcode","funct"],[0,39],function(e){return e.registerFile.write(e.arguments[0],~(e.registerFile.read(e.arguments[1])|e.registerFile.read(e.arguments[2]))),null})),n.push(new me("XOR",r,["opcode","funct"],[0,38],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])^e.registerFile.read(e.arguments[2])),null})),n.push(new me("SLT",r,["opcode","funct"],[0,42],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.registerFile.read(e.arguments[2])?1:0),null})),n.push(new me("SLLV",r,["opcode","funct"],[0,4],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.registerFile.read(e.arguments[2])),null})),n.push(new me("SRLV",r,["opcode","funct"],[0,6],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.registerFile.read(e.arguments[2])),null})),n.push(new me("SRAV",r,["opcode","funct"],[0,7],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.registerFile.read(e.arguments[2])),null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5).parameterized(0,se.register),new pe("rt",16,5,0),new pe("rd",11,5,0),new pe("shamt",6,5,0),new pe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*$/,"@mnem @arg0"));var a=t[t.length-1];n.push(new me("JR",a,["opcode","funct"],[0,8],function(e){return e.pc=e.registerFile.read(e.arguments[0]),null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5,0),new pe("rt",16,5).parameterized(1,se.register),new pe("rd",11,5).parameterized(0,se.register),new pe("shamt",6,5).parameterized(2,se.immediate),new pe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*([0-9]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var s=t[t.length-1];n.push(new me("SLL",s,["opcode","funct"],[0,0],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.arguments[2]),null})),n.push(new me("SRL",s,["opcode","funct"],[0,2],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.arguments[2]),null})),n.push(new me("SRA",s,["opcode","funct"],[0,2],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.arguments[2]),null})),t.push(new de([new pe("funct",0,32)],/^\s*([a-zA-Z]+)\s*$/,"@mnem"));var i=t[t.length-1];n.push(new me("SYSCALL",i,["funct"],[12],function(e){return e.virtualOS.ecall(e)})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5).parameterized(1,se.register),new pe("rt",16,5).parameterized(0,se.register),new pe("imm",0,16,null,!0).parameterized(2,se.immediate)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var l=t[t.length-1];n.push(new me("ADDI",l,["opcode"],[8],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.arguments[2]),null})),n.push(new me("ADDIU",l,["opcode"],[9],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.arguments[2]),null})),n.push(new me("SLTI",l,["opcode"],[10],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.arguments[2]?1:0),null})),n.push(new me("SLTIU",l,["opcode"],[11],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0<e.arguments[2]>>>0?1:0),null})),n.push(new me("ANDI",l,["opcode"],[12],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0&e.arguments[2]),null})),n.push(new me("ORI",l,["opcode"],[13],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0|e.arguments[2]),null})),n.push(new me("XORI",l,["opcode"],[14],function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0^e.arguments[2]),null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5).parameterized(0,se.register),new pe("rt",16,5).parameterized(1,se.register),new pe("imm",0,16,null,!0).parameterized(2,se.offset).limited(18,2,17)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var o=t[t.length-1];n.push(new me("BEQ",o,["opcode"],[4],function(e){return e.registerFile.read(e.arguments[0])===e.registerFile.read(e.arguments[1])&&(e.pc+=e.arguments[2]),null})),n.push(new me("BNE",o,["opcode"],[5],function(e){return e.registerFile.read(e.arguments[0])!==e.registerFile.read(e.arguments[1])&&(e.pc+=e.arguments[2]),null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5,0),new pe("rt",16,5).parameterized(0,se.register),new pe("imm",0,16,null,!0).parameterized(1,se.register)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var u=t[t.length-1];n.push(new me("LUI",u,["opcode"],[15],function(e){return e.registerFile.write(e.arguments[0],e.arguments[1]<<16),null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5).parameterized(2,se.register),new pe("rt",16,5).parameterized(0,se.register),new pe("imm",0,16,null,!0).parameterized(1,se.immediate)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(-?0?[boxd]?[0-9A-F]+)\(\s*(\$[A-Za-z0-9]+)\s*\)\s*$/,"@mnem @arg0, @arg1(@arg2)"));var c=t[t.length-1];n.push(new me("LB",c,["opcode"],[32],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.signExt(t[0],8)),null)})),n.push(new me("LH",c,["opcode"],[33],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.signExt(K.catBytes(t),16)),null)})),n.push(new me("LW",c,["opcode"],[35],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],4);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.catBytes(t)),null)})),n.push(new me("LBU",c,["opcode"],[36],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],t[0]),null)})),n.push(new me("LHU",c,["opcode"],[37],function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],K.catBytes(t)),null)})),n.push(new me("SB",c,["opcode"],[40],function(e){var t=[];t.push(255&e.registerFile.read(e.arguments[0]));var n=e.registerFile.read(e.arguments[2])+e.arguments[1];return e.memset(n,t)?null:"Illegal memory access."})),n.push(new me("SH",c,["opcode"],[41],function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?null:"Illegal memory access."})),n.push(new me("SW",c,["opcode"],[43],function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?null:"Illegal memory access."})),t.push(new de([new pe("opcode",26,6),new pe("imm",0,26).parameterized(0,se.special)],/^\s*([A-Za-z]+)\s*([A-Za-z0-9_]+)\s*$/,"@mnem @arg0",function(e,t,n,r,a){var s={errorMessage:null,context:null,value:null},i=null,l=a.linesByLabel[e];if(void 0!==l){if(s.context=l[0],null===l[1])return s;i=l[1]}if(null===i&&a.keywordRegexes[le.char]){var o=a.keywordRegexes[le.char].exec(e);if(null!==o&&void 0!==o[1]&&(i=o[1].charCodeAt(0))>255)return s.errorMessage="Non-ascii character "+o[1]+" unsupported.",s}if(null===i&&void 0!==a.keywordRegexes[le.numeric]){var u=a.keywordRegexes[le.numeric].exec(e);if(null!==u){var c=ce.radixes[u[2]]||10,p=u[1];i=parseInt(p,c)}}return null===i||isNaN(i)?(s.errorMessage="args.valueUnrecognized(".concat(e,")"),s):(i>>>28===r>>>28?0===(3&i)?s.value=(268435452&i)>>>2:s.errorMessage="mips.wordUnlignedJump(".concat(e,")"):s.errorMessage="args.outOfRange(".concat(e,")"),s)},function(e,t){return e<<2|4026531840&t}));var p=t[t.length-1];n.push(new me("J",p,["opcode"],[2],function(e){return e.pc=e.arguments[0],null})),n.push(new me("JAL",p,["opcode"],[3],function(e){return e.registerFile.write(31,e.pc),e.pc=e.arguments[0],null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5).parameterized(1,se.register),new pe("rt",16,5,0),new pe("rd",11,5).parameterized(0,se.register),new pe("shamt",6,5,0),new pe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1"));var d=t[t.length-1];n.push(new me("MV",d,["opcode","funct"],[0,32],function(e){return null})),t.push(new de([new pe("opcode",26,6),new pe("rs",21,5,0),new pe("rt",16,5).parameterized(0,se.register),new pe("imm",0,16,null,!0).parameterized(1,se.immediate)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var m=t[t.length-1];n.push(new me("LI",m,["opcode"],[8],function(e){return null})),n.push(new me("LA",m,["opcode"],[8],function(e){return null}));var h=[];h[le.directive]=["\\."],h[le.comment]=["#"],h[le.label]=["\\:"],h[le.stringMarker]=['\\"'],h[le.charMarker]=["\\'"],h[le.register]=["x"];var g=[];return g.text=oe.text,g.data=oe.data,g.asciiz=oe.cString,g.byte=oe._8bit,g.half=oe._16bit,g.word=oe._32bit,new he(32,t,n,[],["$zero","$at","$v0","$v1","$a0","$a1","$a2","$a3","$t0","$t1","$t2","$t3","$t4","$t5","$t6","$t7","$s0","$s1","$s2","$s3","$s4","$s5","$s6","$s7","$t8","$t9","$k0","$k1","$gp","$sp","$fp","$ra"],h,g,!0,'    la $a0, str\n    li $v0, 4 #4 is the string print service number...\n    syscall\n    li $v0, 10 #...and 10 is the program termination service number!\n    syscall\n.data\nstr:    .asciiz "Hello, World!"')},core:_e,options:[]};var Ee={VirtualOS:ge,Endianness:ie,Assembler:ce,Line:ue,CoreFactory:be},Se=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).handleFileName=function(e){n.props.setProjectSettings(e.target.value,n.props.project_settings.memory_size,n.props.project_settings.isa)},n.handleISA=function(e){n.props.setProjectSettings(n.props.project_settings.file_name,n.props.project_settings.memory_size,e.target.value)},n.handleMemorySize=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&n.props.setProjectSettings(n.props.project_settings.file_name,e.target.value,n.props.project_settings.isa)},n.handleSubmit=function(e){e.preventDefault(),n.props.submitChanges()},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=Ee.CoreFactory.getCoreList();return a.a.createElement("div",{id:"panel_settings",className:"panel panel_settings"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement(ae,{onChange:this.handleFileName,value:this.props.project_settings.file_name,icon:"images/icons/input_name.svg",placeholder:"File Name",id:"filename"}),a.a.createElement(N,{onChange:this.handleISA,value:this.props.project_settings.isa,icon:"images/icons/input_code.svg",placeholder:"Instruction Set"},e.map(function(e,t){return a.a.createElement("option",{key:e,value:e},e)})),a.a.createElement(ae,{onChange:this.handleMemorySize,value:this.props.project_settings.memory_size,icon:"images/icons/input_memory.svg",placeholder:"Memory Size (Bytes)",type:"number"}),a.a.createElement("input",{className:"button",value:"Accept Changes",type:"submit"})))}}]),t}(r.Component);Se.display_name="settings";var ke=Object(z.d)(Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab,project_settings:e.project_settings}},function(e,t){return{setProjectSettings:function(t,n,r){return e(F(t,n,r))}}})(Se)),Ae=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).calculateOutput=function(e,t,n){var r,a=e;switch(t){case 0:a=parseInt(a,16);break;default:case 1:case 2:a=parseInt(a,10);break;case 3:a=parseInt(a,2);break;case 4:a=a}if("NaN"===a.toString())return"";switch(n){case 0:r="0x"+M((a>>>0).toString(16),8);break;case 1:r=(a>>>0).toString(10);break;default:case 2:(r=a.toString(10))>2147483648&&(r-=4294967296);break;case 3:r="0b"+M((a>>>0).toString(2),32);break;case 4:r=B(a)}return r},n.onChangeInput=function(e){var t=e.target.value,r=n.state.input_type,a=n.state.output_type,s=n.calculateOutput(t,r,a);n.setState({input:t,has_value:""!==t,output:s})},n.onChangeInputType=function(e){var t=n.state.input,r=parseInt(e.target.value,10),a=n.state.output_type,s=n.calculateOutput(t,r,a);n.setState({input:t,input_type:r,has_value:""!==t,output:s})},n.onChangeOutputType=function(e){var t=n.state.input,r=n.state.input_type,a=parseInt(e.target.value,10),s=n.calculateOutput(t,r,a);n.setState({input:t,output_type:a,has_value:""!==t,output:s})},n.state={input:0,input_type:0,output_type:0,output:"",has_value:!1},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"panel_conversion",className:"panel panel_conversion"},a.a.createElement(ae,{onChange:this.onChangeInput,icon:"images/icons/input_in.svg",placeholder:"Input",type:"text"}),a.a.createElement(N,{onChange:this.onChangeInputType,icon:"images/icons/input_type.svg",placeholder:"Input Type"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Integer"),a.a.createElement("option",{value:"3"},"Binary")),a.a.createElement("hr",null),a.a.createElement(N,{onChange:this.onChangeOutputType,icon:"images/icons/input_type.svg",placeholder:"Output Type"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Unsigned Integer"),a.a.createElement("option",{value:"2"},"Signed Integer"),a.a.createElement("option",{value:"3"},"Binary")),a.a.createElement("span",{className:"conversion_output"},""!==this.state.output?this.state.output:"<Output>"))}}]),t}(r.Component);Ae.display_name="conversion";var Ce=0,Oe=1,Fe=2,je=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleType=function(e){n.setState({register_type:parseInt(e.target.value,10)})},n.translateRegister=function(e){switch(n.state.register_type){case 0:return"0x"+M((e>>>0).toString(16),8);case 1:return(e>>>0).toString(10);default:case 2:var t=e.toString(10);return t>2147483648&&(t-=4294967296),t;case 3:return"0b"+M((e>>>0).toString(2),32);case 4:return B(e)}},n.getChangedRegisterClass=function(e){switch(e){default:case Ce:return"reg_normal";case Oe:return"reg_assigned";case Fe:return"reg_new"}},n.state={register_type:0},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tabs[this.props.selectedtab];if(!t||!t.core)return a.a.createElement("div",null);var n=t.core,r=n.registerFile.physicalFile,s=t.register_changed,i=n.registerFile.abiNames;return a.a.createElement("div",{id:"panel_registers",className:"panel panel_registers"},a.a.createElement(N,{onChange:this.handleType,icon:"images/icons/input_type.svg",placeholder:"Display Type",defaultValue:"0"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Unsigned Integer"),a.a.createElement("option",{value:"2"},"Signed Integer"),a.a.createElement("option",{value:"3"},"Binary"),a.a.createElement("option",{value:"4"},"Float")),a.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Reg"),a.a.createElement("th",null,"Value"))),a.a.createElement("tbody",null,r.map(function(t,n){var r=e.translateRegister(t);return a.a.createElement("tr",{key:n,className:e.getChangedRegisterClass(s[n])},a.a.createElement("td",null,i[n]),a.a.createElement("td",{"data-info":t},r))}))))}}]),t}(r.Component);je.display_name="registers";var Te=Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}})(je),Ie=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleType=function(e){n.setState({register_type:parseInt(e.target.value,10)})},n.translateRegister=function(e){switch(n.state.register_type){default:case 0:return M((e>>>0).toString(16),2);case 1:return M((e>>>0).toString(10),3);case 2:return M((e>>>0).toString(8),3);case 3:return M((e>>>0).toString(2),8)}},n.state={register_type:0},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tabs;if(0===t.length)return a.a.createElement("div",null);var n=t[this.props.selectedtab].machine_code,r=0===n.length;return a.a.createElement("div",{id:"panel_machine_code",className:"panel panel_machine_code"},r&&a.a.createElement("span",{className:"panel_empty"},"Machine Code Empty"),!r&&a.a.createElement(N,{onChange:this.handleType,icon:"images/icons/input_type.svg",placeholder:"Display Type",defaultValue:"0"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Decimal"),a.a.createElement("option",{value:"2"},"Octal"),a.a.createElement("option",{value:"3"},"Binary")),!r&&n.map(function(t,n){var r=e.translateRegister(t);return a.a.createElement("span",{key:n},r," ")}))}}]),t}(r.Component);Ie.display_name="machine code";var ze=Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}})(Ie),xe=n(30),Re=n(31),Le={Stopped:0,Step:1,Play:2},De=0,Ne=1,Me=2,Be=0,$e=1,Pe=2,Ze=a.a.createElement("span",null,a.a.createElement("b",null,"Error: "),"Failed to decode instruction. In practice, the most likely cause is forgetting to terminate the program using the appropriate system call (see help section)."),Ue={Log:0,Input:1,Output:2,Success:3,Warning:4,Error:5},Ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleKeyPress=function(e){var t=n.props.selectedtab,r=n.props.tabs[t];if(r&&r.console_input_type!==Be){e.preventDefault();var a=r.console_input,s=r.cursor_pos;if("Enter"===e.key)n.continueAfterConsole(a),r.console_input="";else if(8===e.which){if(s>0){var i=a.slice(0,s-1)+a.slice(s);r.cursor_pos=s-1,r.console_input=i}}else if(46===e.keyCode){if(s<a.length){var l=a.slice(0,s)+a.slice(s+1);r.cursor_pos=s-1,r.console_input=l}}else if(37===e.keyCode)s=s<=0?0:s-1,r.cursor_pos=s;else if(39===e.keyCode){var o=r.console_input.length;s=s>=o?o:s+1,r.cursor_pos=o}else{var u=e.key,c=e.keyCode,p=r.console_input_type===$e;(c>47&&c<58||!p&&(32===c||13===c||c>64&&c<91||c>95&&c<112||c>185&&c<193||c>218&&c<223))&&(u=a.slice(0,s)+u+a.slice(s),r.console_input=u,r.cursor_pos=s+1)}return n.props.updateTab(t,r),!1}},n.addConsoleMessage=function(e,t){var r,s=n.props.selectedtab,i=n.props.tabs[s];r=e===Ue.Error?"console_error":e===Ue.Warning?"console_warning":e===Ue.Success?"console_success":e===Ue.Output?"console_output":e===Ue.Input?"console_input":"console_log",i.console.push(a.a.createElement("div",{className:r},t)),n.props.updateTab(s,i)},n.continueAfterConsole=function(e){var t=n.props.selectedtab,r=n.props.tabs[t],a=r.core;r.console_input_type===$e?(e=parseInt(e,10),n.virtual_os.continueInputInt(a,e),n.addConsoleMessage(Ue.Log,"<< "+e)):r.console_input_type===Pe&&(n.virtual_os.continueInputString(a,e),n.addConsoleMessage(Ue.Log,"<< "+e)),r.console_input_type=Be,n.checkUpdatedTabs(),n.props.updateTab(t,r)},n.checkUpdatedTabs=function(){for(var e=n.props.tabs[n.props.selectedtab],t=e.core.registerFile.getModifiedRegisters(),r=0;r<e.register_changed.length;++r)t[r]?e.register_changed[r]=Me:e.register_changed[r]===Me&&(e.register_changed[r]=Ne)},n.addTabFull=function(e,t,r,a,s,i){var l=n.props.tabs.length,o=Ee.CoreFactory.getCore(s,a,n.virtual_os,[]),u={name:e,content:i?o.instructionSet.exampleCode:t,log:[],console:[],machine_code:r,core:o,register_changed:[],runningStatus:Le.Stopped,instruction_set:s,console_input:"",console_input_type:Be,cursor_pos:0};u.register_changed=Array.from({length:o.registerFile.physicalFile.length},function(){return De}),n.props.setProjectSettings(e,a,s),n.props.addTab(u),n.props.selectTab(l)},n.addTab=function(e,t,r){n.addTabFull(e,t,r,4096,n.getDefaultISA(),!1)},n.addTabDefault=function(){n.addTabFull("New Tab","",[],4096,n.getDefaultISA(),!0)},n.addTabDefaultRISCV=function(){n.addTabFull("New Tab","",[],4096,"RISCV",!0)},n.addTabDefaultMIPS=function(){n.addTabFull("New Tab","",[],4096,"MIPS",!0)},n.getDefaultISA=function(){return Ee.CoreFactory.getCoreList()[0]},n.handleUpload=function(e){var t=n.component_input.current.files;if(!(t.length<=0)){var r=t[0];if(n.is_upload_bin){var a=r.name,s=r.slice(0,r.size),i=new FileReader,l=Object(d.a)(Object(d.a)(n));i.addEventListener("load",function(){var e=new Uint8Array(this.result);l.addTab(a,"",Array.from(e))}),i.readAsArrayBuffer(s)}else{var o=r.name,u=r.slice(0,r.size),c=new FileReader,p=Object(d.a)(Object(d.a)(n));c.addEventListener("load",function(){var e=this.result;p.addTab(o,e,[])}),c.readAsText(u)}}},n.handleLoadAsm=function(){n.is_upload_bin=!1,n.component_input.current.click()},n.handleLoadBin=function(){n.is_upload_bin=!0,n.component_input.current.click()},n.handleDownloadAsm=function(){var e=n.props.selectedtab,t=n.props.tabs[e],r=t.content;if(0!==r.length){var a=document.createElement("a"),s=new Blob([r],{type:"text/plain"}),i=URL.createObjectURL(s),l=t.name+".s";a.setAttribute("href",i),a.setAttribute("download",l),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},n.downloadBin=function(){var e=n.props.selectedtab,t=n.props.tabs[e],r=t.machine_code,a=new Uint8Array(r),s=new Blob([a],{type:"application/octet-stream"}),i=URL.createObjectURL(s),l=document.createElement("a"),o=t.name+".bin";l.setAttribute("href",i),l.setAttribute("download",o),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},n.downloadRam=function(){var e=n.props.selectedtab,t=n.props.tabs[e],r=t.core.memory,a=new Uint8Array(r),s=new Blob([a],{type:"application/octet-stream"}),i=URL.createObjectURL(s),l=document.createElement("a"),o=t.name+".ram";l.setAttribute("href",i),l.setAttribute("download",o),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},n.resetUI=function(){var e=n.props.selectedtab,t=n.props.tabs[e];t.log=[],t.console=[],t.register_changed=Array.from({length:t.register_changed.length},function(){return De}),t.runningStatus=Le.Stopped,t.console_input="",t.console_input_type=Be,t.cursor_pos=0,n.props.updateTab(e,t)},n.reset=function(){var e=n.props.selectedtab;n.props.tabs[e].core.reset(),n.resetUI()},n.uiSimulate=function(){var e=n.props.selectedtab,t=n.props.tabs[e];if(t.console_input_type===Be){t.runningStatus===Le.Stopped&&n.uiAssemble();var r=t.core;for(t.runningStatus=Le.Play;;){var a=r.fetch();if(null!==a){n.addConsoleMessage(Ue.Error,a),t.runningStatus=Le.Stopped;break}var s=r.decode();if(null===s){n.addConsoleMessage(Ue.Error,Ze),t.runningStatus=Le.Stopped;break}t.log.push(s);var i=r.execute();if(null!==i){"HALT"!==i&&"WAIT"!==i&&(n.addConsoleMessage(Ue.Error,i),t.runningStatus=Le.Stopped);break}}n.checkUpdatedTabs(),n.props.updateTab(e,t)}},n.uiStepByStep=function(){var e=n.props.selectedtab,t=n.props.tabs[e];if(t.console_input_type===Be){t.runningStatus===Le.Stopped&&n.uiAssemble();var r=t.core;t.runningStatus=Le.Step;var a=r.fetch();if(null!==a)return n.addConsoleMessage(Ue.Error,a),t.runningStatus=Le.Stopped,void n.props.updateTab(e,t);var s=r.decode();if(null===s)return n.addConsoleMessage(Ue.Error,Ze),t.runningStatus=Le.Stopped,void n.props.updateTab(e,t);t.log.push(s);var i=r.execute();null!==i&&"HALT"!==i&&"WAIT"!==i&&(n.addConsoleMessage(Ue.Error,i),t.runningStatus=Le.Stopped),n.checkUpdatedTabs(),n.props.updateTab(e,t)}},n.uiAssemble=function(){var e=n.props.selectedtab,t=n.props.tabs[e],r=t.content;if(""!==r){var s=t.core;n.reset();var i=new Ee.Assembler(s.instructionSet,Ee.Endianness.little),l=Ee.Line.arrayFromFile(r),o=i.assemble(l,0);if(0!==o.length)for(var u in o){var c=o[u];return void n.addConsoleMessage(Ue.Error,a.a.createElement("span",null,a.a.createElement("b",null,"Assembly error on line ",c.number,":")," ",c.invalidReason,"."))}var p=null,d=1;do{if(0!==(p=i.assemble(l,d)).length)for(var m in p){var h=p[m];return void n.addConsoleMessage(Ue.Error,a.a.createElement("span",null,a.a.createElement("b",null,"Assembly error on line ",h.number,":")," ",h.invalidReason,"."))}d+=1}while(null===p);var g=l.map(function(e){return e.machineCode}).reduce(function(e,t){return e.concat(t)},[]);s.memset(0,g),n.checkUpdatedTabs();t.machine_code=g,n.addConsoleMessage(Ue.Success,a.a.createElement("span",null,a.a.createElement("b",null,"Complete:")," Assembly succeeded.")),n.props.updateTab(e,t)}},n.handleSettingsChange=function(){var e=n.props.selectedtab,t=n.props.tabs[e];if(t){var r=n.props.project_settings.file_name,s=n.props.project_settings.isa,i=n.props.project_settings.memory_size;t.name=r;var l=s!==t.instruction_set,o=i!==t.core.memorySize,u=!1;if(l||o)Ee.CoreFactory.ISAs[s]&&(u=!0,t.core=Ee.CoreFactory.getCore(s,i,n.virtual_os,[]),t.instruction_set=s,n.resetUI()),u||n.addConsoleMessage(Ue.Error,a.a.createElement("span",null,a.a.createElement("b",null,"Error: "),"Could not find ISA ",s,"."));n.props.updateTab(e,t),u&&(l&&n.addConsoleMessage(Ue.Success,a.a.createElement("span",null,a.a.createElement("b",null,"Complete: "),"Successfully changed ISA to ",s,".")),o&&n.addConsoleMessage(Ue.Success,a.a.createElement("span",null,a.a.createElement("b",null,"Complete: "),"Successfully changed memory size to ",i,".")))}},n.handleStartDragX=function(e){window.addEventListener("mousemove",n.handleDragX),window.addEventListener("mouseup",n.handleStopDragX)},n.handleX=function(e){var t=e.pageX,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;(t=r-t)<200?t=200:t>r-200&&(t=r-200),n.setState({panel_x:t})},n.handleX=function(e){var t=e.pageX,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;(t=r-t)<150?t=150:t>r-200&&(t=r-200),n.setState({panel_x:t})},n.handleY=function(e){var t=e.pageY+20,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;(t=r-t)<50?t=50:t>r-50&&(t=r-50),n.setState({panel_y:t})},n.handleDragX=function(e){n.handleX(e)},n.handleStopDragX=function(e){n.handleX(e),window.removeEventListener("mousemove",n.handleDragX),window.removeEventListener("mouseup",n.handleStopDragX)},n.handleStartDragY=function(e){window.addEventListener("mousemove",n.handleDragY),window.addEventListener("mouseup",n.handleStopDragY)},n.handleDragY=function(e){n.handleY(e)},n.handleStopDragY=function(e){n.handleY(e),window.removeEventListener("mousemove",n.handleDragY),window.removeEventListener("mouseup",n.handleStopDragY)},n.showSettings=function(){n.props.setSettingsVisible(!0)},n.showHelp=function(){n.props.setHelpVisible(!0)},n.showAbout=function(){alert(1),n.props.setAboutVisible(!0)},n.props.initialize({languages:[{name:"English",code:"en"}],options:{renderToStaticMarkup:xe.renderToStaticMarkup}}),n.state={panel_x:256,panel_y:256},n.component_input=a.a.createRef(),window.addEventListener("keyup",n.handleKeyPress),n.props.addTranslationForLanguage(Re,"en"),n.virtual_os=new Ee.VirtualOS,n.virtual_os.inputInt=function(){var e=n.props.tabs[n.props.selectedtab];e&&(e.console_input_type=$e)},n.virtual_os.inputString=function(){var e=n.props.tabs[n.props.selectedtab];e&&(e.console_input_type=Pe)},n.virtual_os.outputInt=function(e){n.addConsoleMessage(Ue.Output,">> "+e)},n.virtual_os.outputString=function(e){n.addConsoleMessage(Ue.Output,">> "+e)},n.virtual_os.handleHalt=function(){var e=n.props.selectedtab,t=n.props.tabs[e];t&&(t.runningStatus=Le.Stopped,n.addConsoleMessage(Ue.Success," == SIMULATION COMPLETED == "),n.props.updateTab(e,t))},n.addTabDefault(),n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.selectedtab,t=this.props.tabs[e],n=this.props.tabs.length>0,r=!1;return t&&(r=t.console_input_type!==Be),a.a.createElement(a.a.Fragment,null,a.a.createElement(q,null),a.a.createElement(J,null),a.a.createElement(re,{canhandleinput:!r,fn_new:this.addTabDefault,fn_load:this.handleLoadAsm,fn_save:this.handleDownloadAsm,fn_ass:this.uiAssemble,fn_sim:this.uiSimulate,fn_step:this.uiStepByStep}),a.a.createElement(L,{assemble:this.uiAssemble,simulate:this.uiSimulate,stepbystep:this.uiStepByStep,downloadRam:this.downloadRam,downloadBin:this.downloadBin,handleAddTabRiscv:this.addTabDefaultRISCV,handleAddTabMips:this.addTabDefaultMIPS,handleLoadAsm:this.handleLoadAsm,handleLoadBin:this.handleLoadBin,handleDownloadAsm:this.handleDownloadAsm}),!n&&a.a.createElement("div",{className:"no_tabs"},a.a.createElement("div",null,a.a.createElement("h2",null,a.a.createElement(z.b,{id:"welcome.title"},"Welcome to Oak.js")),a.a.createElement("p",null,a.a.createElement(z.b,{id:"welcome.subtitle"},"Oak.js is an online javascript IDE, Assembler, Disassembler, and Simulator for assembly languages such as RISC-V and MIPS.")),a.a.createElement("button",{className:"button",onClick:this.addTabDefault},a.a.createElement(z.b,{id:"menus.add_tab"},"Add a Tab")),a.a.createElement("button",{className:"button",onClick:this.handleLoadAsm},a.a.createElement(z.b,{id:"menus.load_assembly"},"Load Assembly")),a.a.createElement("button",{className:"button",onClick:this.handleLoadBin},a.a.createElement(z.b,{id:"menus.load_binary"},"Load Binary")))),n&&a.a.createElement("div",{className:"grid",style:{gridTemplateColumns:"auto ".concat(this.state.panel_x,"px"),gridTemplateRows:"auto calc(".concat(this.state.panel_y,"px)")}},a.a.createElement(I,{is_disabled:r,addTab:this.addTabDefault}),a.a.createElement(D,{handleStartDrag:this.handleStartDragY,className:"panel_bottom"},a.a.createElement(V,{show_input:r,input:t.console_input}),a.a.createElement(ze,null),a.a.createElement(P,null),a.a.createElement(X,null)),a.a.createElement(D,{handleStartDrag:this.handleStartDragX,className:"panel_side"},a.a.createElement(ke,{submitChanges:this.handleSettingsChange}),a.a.createElement(Te,null),a.a.createElement(Ae,null))),a.a.createElement("input",{type:"file",onChange:this.handleUpload,ref:this.component_input}))}}]),t}(r.Component),He=Object(z.d)(Object(j.b)(function(e){return{tabs:e.tabs,selectedtab:e.selectedtab,project_settings:e.project_settings}},function(e,t){return{addTab:function(t){return e(function(e){return{type:f,tab:e}}(t))},updateTab:function(t,n){return e(O(t,n))},selectTab:function(t){return e(C(t))},setProjectSettings:function(t,n,r){return e(F(t,n,r))},setHelpVisible:function(t){return e(k(t))},setAboutVisible:function(t){return e(A(t))},setSettingsVisible:function(t){return e(S(t))}}})(Ve)),Ke=n(11),We=n(16),Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAB":return[].concat(Object(We.a)(e),[t.tab]);case"UPDATE_TAB":return e.map(function(e,n){return n===t.index?Object.assign({},e,t.tab):e});case"DELETE_TAB":return[].concat(Object(We.a)(e.slice(0,t.id)),Object(We.a)(e.slice(t.id+1)));default:return e}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TAB":return t.id;default:return e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROJECT_SETTINGS":return t.payload;default:return e}},Qe=n(17),qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:!1,help:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HELP_VISIBLE":return Object(Qe.a)({},e,{help:t.state});case"SET_ABOUT_VISIBLE":return Object(Qe.a)({},e,{about:t.state});case"SET_SETTINGS_VISIBLE":return Object(Qe.a)({},e,{settings:t.state});default:return e}},et=Object(Ke.b)({tabs:Xe,selectedtab:Ye,global_settings:Je,project_settings:Ge,panel_visibility:qe,localize:z.c}),tt=Object(Ke.c)(et,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(a.a.createElement(z.a,{store:tt},a.a.createElement(j.a,{store:tt},a.a.createElement(He,null))),document.getElementById("root"))}},[[32,2,1]]]);
//# sourceMappingURL=main.18e2bbaf.chunk.js.map